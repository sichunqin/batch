{
	"action":[
		
	],
	"authority":[
		
	],
	"children":[
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"id",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"客户ID",
					"otherChildren":[
						
					],
					"property":[
						
					],
					"sort":12
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"code",
					"control":"Text",
					"dataPermission":[
						
					],
					"isReference":false,
					"name":"客户编号",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Width",
							"value":"80"
						}
					],
					"sort":2
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"name",
					"control":"Text",
					"dataPermission":[
						
					],
					"isReference":false,
					"name":"客户名称",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Width",
							"value":"340"
						},
						{
							"isHide":false,
							"name":"align",
							"value":"left"
						},
						{
							"isHide":false,
							"name":"halign",
							"value":"center"
						}
					],
					"sort":3
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"capital",
					"control":"Number",
					"dataPermission":[
						
					],
					"isReference":false,
					"name":"注册资本",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Width",
							"value":"160"
						},
						{
							"isHide":false,
							"name":"halign",
							"value":"center"
						},
						{
							"isHide":false,
							"name":"align",
							"value":"right"
						}
					],
					"sort":4
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"customerNature",
					"control":"Text",
					"dataPermission":[
						
					],
					"isReference":false,
					"name":"客户性质",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Width",
							"value":"200"
						},
						{
							"isHide":false,
							"name":"align",
							"value":"left"
						},
						{
							"isHide":false,
							"name":"halign",
							"value":"center"
						}
					],
					"sort":5
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"industryType",
					"control":"Text",
					"dataPermission":[
						
					],
					"isReference":false,
					"name":"行业分类",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Width",
							"value":"200"
						}
					],
					"sort":6
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"showAddress",
					"control":"Text",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"注册地址",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Width",
							"value":"160"
						}
					],
					"sort":7
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"undertakesDate",
					"control":"Date",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"首次承接日期",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Width",
							"value":"120"
						}
					],
					"sort":8
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"undertakesAndDept",
					"control":"Text",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"承接人/部门",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Width",
							"value":"160"
						}
					],
					"sort":10
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"treeName",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"承办单位",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Width",
							"value":"120"
						}
					],
					"sort":11
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"deptid",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"部门ID",
					"otherChildren":[
						
					],
					"property":[
						
					],
					"sort":1
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"pcount",
					"control":"Text",
					"dataPermission":[
						
					],
					"isReference":false,
					"name":"期间增减",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"width",
							"value":"90"
						}
					],
					"sort":9
				}
			],
			"code":"columnGroup",
			"control":"ColumnGroup",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"列集合",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":0
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"uuid",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"uuid",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":1000
		}
	],
	"code":"customerStatistical",
	"control":"GridPanel",
	"dataPermission":[
		
	],
	"isReference":false,
	"name":"客户统计报表",
	"otherChildren":[
		
	],
	"property":[
		{
			"isHide":false,
			"name":"BaseCode",
			"value":"customerStatistical"
		},
		{
			"isHide":false,
			"name":"Name",
			"value":"客户统计报表"
		},
		{
			"isHide":false,
			"name":"IsReadOnly",
			"value":false
		},
		{
			"isHide":false,
			"name":"Description"
		},
		{
			"isHide":false,
			"name":"FormId",
			"value":343035
		},
		{
			"isHide":false,
			"name":"OrderBy"
		},
		{
			"isHide":false,
			"name":"IsSqlForm",
			"value":true
		},
		{
			"isHide":false,
			"name":"SearchForm",
			"value":"CustomerStatisticalWhere"
		},
		{
			"isHide":false,
			"name":"Height",
			"value":"90%"
		}
	],
	"sort":0,
	"sql":"select distinct c.Id,ud.id deptid,c.Code,c.Name,Capital,cn.name CustomerNature,it.Name IndustryType,ShowAddress,UndertakesDate,u.Name+'/'+ud.TreeName UndertakesAndDept,'' TreeName ,
CONVERT(varchar(100), c.CreatedOn, 23) CreatedOn,
case when p1.countPId>0 then '本期增加' else ' 本期减少' end Pcount
from Cust_Customer C
left join (
select c.id,sum(p.id) countPId from Cust_Customer C
inner join Prj_project p on p.customerNameId=c.id
group by c.id
) P1 on p1.id=c.id
left join Prj_ComprositionCustome cc on c.id=cc.CustomerNameId
left join Sys_EnumValue cn on cn.value=c.CustomerNature and  cn.EnumTypeId=15851
left join Sys_EnumValue it on it.value=c.IndustryType and  it.EnumTypeId=16030
left join Base_Department d on d.Id=c.UndertakesDeptId
left join Base_User u on u.Id=c.UndertakesId
left join Base_Department ud on ud.Id=u.DeptId"
}
{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"code":"id","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"客户ID","otherChildren":[],"property":[],"sort":12},{"action":[],"authority":[],"children":[],"code":"code","control":"Text","dataPermission":[],"isReference":false,"name":"客户编号","otherChildren":[],"property":[{"isHide":false,"name":"Width","value":"80"}],"sort":2},{"action":[],"authority":[],"children":[],"code":"name","control":"Text","dataPermission":[],"isReference":false,"name":"客户名称","otherChildren":[],"property":[{"isHide":false,"name":"Width","value":"340"},{"isHide":false,"name":"align","value":"left"},{"isHide":false,"name":"halign","value":"center"}],"sort":3},{"action":[],"authority":[],"children":[],"code":"capital","control":"Number","dataPermission":[],"isReference":false,"name":"注册资本","otherChildren":[],"property":[{"isHide":false,"name":"Width","value":"160"},{"isHide":false,"name":"halign","value":"center"},{"isHide":false,"name":"align","value":"right"}],"sort":4},{"action":[],"authority":[],"children":[],"code":"customerNature","control":"Text","dataPermission":[],"isReference":false,"name":"客户性质","otherChildren":[],"property":[{"isHide":false,"name":"Width","value":"200"},{"isHide":false,"name":"align","value":"left"},{"isHide":false,"name":"halign","value":"center"}],"sort":5},{"action":[],"authority":[],"children":[],"code":"industryType","control":"Text","dataPermission":[],"isReference":false,"name":"行业分类","otherChildren":[],"property":[{"isHide":false,"name":"Width","value":"200"}],"sort":6},{"action":[],"authority":[],"children":[],"code":"showAddress","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"注册地址","otherChildren":[],"property":[{"isHide":false,"name":"Width","value":"160"}],"sort":7},{"action":[],"authority":[],"children":[],"code":"undertakesDate","control":"Date","dataPermission":[],"isReference":false,"javaScript":"","name":"首次承接日期","otherChildren":[],"property":[{"isHide":false,"name":"Width","value":"120"}],"sort":8},{"action":[],"authority":[],"children":[],"code":"undertakesAndDept","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"承接人/部门","otherChildren":[],"property":[{"isHide":false,"name":"Width","value":"160"}],"sort":10},{"action":[],"authority":[],"children":[],"code":"treeName","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"承办单位","otherChildren":[],"property":[{"isHide":false,"name":"Width","value":"120"}],"sort":11},{"action":[],"authority":[],"children":[],"code":"deptid","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"部门ID","otherChildren":[],"property":[],"sort":1},{"action":[],"authority":[],"children":[],"code":"pcount","control":"Text","dataPermission":[],"isReference":false,"name":"期间增减","otherChildren":[],"property":[{"isHide":false,"name":"width","value":"90"}],"sort":9}],"code":"columnGroup","control":"ColumnGroup","dataPermission":[],"isReference":false,"javaScript":"","name":"列集合","otherChildren":[],"property":[],"sort":0},{"action":[],"authority":[],"children":[],"code":"uuid","control":"Hidden","dataPermission":[],"isReference":false,"name":"uuid","otherChildren":[],"property":[],"sort":1000}],"code":"customerStatistical","control":"GridPanel","dataPermission":[],"isReference":false,"name":"客户统计报表","otherChildren":[],"property":[{"isHide":false,"name":"BaseCode","value":"customerStatistical"},{"isHide":false,"name":"Name","value":"客户统计报表"},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"Description"},{"isHide":false,"name":"FormId","value":343035},{"isHide":false,"name":"OrderBy"},{"isHide":false,"name":"IsSqlForm","value":true},{"isHide":false,"name":"SearchForm","value":"CustomerStatisticalWhere"},{"isHide":false,"name":"Height","value":"90%"}],"sort":0,"sql":"select&nbsp;distinct&nbsp;c.Id,ud.id&nbsp;deptid,c.Code,c.Name,Capital,cn.name&nbsp;CustomerNature,it.Name&nbsp;IndustryType,ShowAddress,UndertakesDate,u.Name+'/'+ud.TreeName&nbsp;UndertakesAndDept,''&nbsp;TreeName&nbsp;,\nCONVERT(varchar(100),&nbsp;c.CreatedOn,&nbsp;23)&nbsp;CreatedOn,\ncase&nbsp;when&nbsp;p1.countPId&gt;0&nbsp;then&nbsp;'本期增加'&nbsp;else&nbsp;'&nbsp;本期减少'&nbsp;end&nbsp;Pcount\nfrom&nbsp;Cust_Customer&nbsp;C\nleft&nbsp;join&nbsp;(\nselect&nbsp;c.id,sum(p.id)&nbsp;countPId&nbsp;from&nbsp;Cust_Customer&nbsp;C\ninner&nbsp;join&nbsp;Prj_project&nbsp;p&nbsp;on&nbsp;p.customerNameId=c.id\ngroup&nbsp;by&nbsp;c.id\n)&nbsp;P1&nbsp;on&nbsp;p1.id=c.id\nleft&nbsp;join&nbsp;Prj_ComprositionCustome&nbsp;cc&nbsp;on&nbsp;c.id=cc.CustomerNameId\nleft&nbsp;join&nbsp;Sys_EnumValue&nbsp;cn&nbsp;on&nbsp;cn.value=c.CustomerNature&nbsp;and&nbsp;&nbsp;cn.EnumTypeId=15851\nleft&nbsp;join&nbsp;Sys_EnumValue&nbsp;it&nbsp;on&nbsp;it.value=c.IndustryType&nbsp;and&nbsp;&nbsp;it.EnumTypeId=16030\nleft&nbsp;join&nbsp;Base_Department&nbsp;d&nbsp;on&nbsp;d.Id=c.UndertakesDeptId\nleft&nbsp;join&nbsp;Base_User&nbsp;u&nbsp;on&nbsp;u.Id=c.UndertakesId\nleft&nbsp;join&nbsp;Base_Department&nbsp;ud&nbsp;on&nbsp;ud.Id=u.DeptId"}
2020-03-09 16:26:07