{
	"action":[
		{
			"code":"Back",
			"name":"Back",
			"property":[
				
			],
			"sort":0
		}
	],
	"authority":[
		
	],
	"children":[
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"dataPermission":[
						
					],
					"isReference":false,
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":true,
							"name":"referenceFormId",
							"value":342950
						}
					],
					"sort":0
				}
			],
			"code":"fieldSet",
			"control":"FieldSet",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"项目列表",
			"otherChildren":[
				
			],
			"property":[
				{
					"isHide":false,
					"name":"style:min-height",
					"value":"50%"
				}
			],
			"sort":4
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"id",
							"control":"Hidden",
							"dataPermission":[
								
							],
							"isReference":false,
							"name":"主键",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":16
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								}
							],
							"select":"Id",
							"sort":1
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"projectId",
							"control":"Hidden",
							"dataPermission":[
								
							],
							"isReference":false,
							"name":"主项目",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":16
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								},
								{
									"isHide":false,
									"name":"EntityConfig",
									"value":"Entity(Project|Code(Code)#Name(Name))]"
								},
								{
									"isHide":false,
									"name":"EntityCode",
									"value":"Project"
								}
							],
							"select":"ProjectIdEntity(Project|Code(Code)#Name(Name))]",
							"sort":6
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"borrowReason",
							"control":"TextArea",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"借阅事由",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":2000
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								},
								{
									"isHide":false,
									"name":"Colspan",
									"value":"3"
								},
								{
									"isHide":false,
									"name":"Required",
									"value":"true"
								}
							],
							"select":"BorrowReason",
							"sort":11
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"borrowDays",
							"control":"Number",
							"dataPermission":[
								
							],
							"isReference":false,
							"name":"借阅天数",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":20
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								}
							],
							"select":"BorrowDays",
							"sort":9
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"borrowDeptId",
							"control":"GridCombobox",
							"dataPermission":[
								
							],
							"isReference":false,
							"name":"借阅部门",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":16
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								},
								{
									"isHide":false,
									"name":"EntityConfig",
									"value":"[Entity(Department|Code(Code)#Name(TreeName))]"
								},
								{
									"isHide":false,
									"name":"EntityCode",
									"value":"Department"
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":"true"
								}
							],
							"select":"BorrowDeptId[Entity(Department|Code(Code)#Name(TreeName))]",
							"sort":8
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"borrowerId",
							"control":"GridCombobox",
							"dataPermission":[
								
							],
							"isReference":false,
							"name":"借阅人",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":16
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								},
								{
									"isHide":false,
									"name":"EntityConfig",
									"value":"[Entity(User|Code(Code)#Name(Name))]"
								},
								{
									"isHide":false,
									"name":"EntityCode",
									"value":"User"
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":"true"
								}
							],
							"select":"BorrowerId[Entity(User|Code(Code)#Name(Name))]",
							"sort":7
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"timestamp",
							"control":"Hidden",
							"dataPermission":[
								
							],
							"isReference":false,
							"name":"时间戳",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":8
								},
								{
									"isHide":false,
									"name":"Required",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								}
							],
							"select":"Timestamp",
							"sort":5
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"isExternal",
							"control":"CheckBox",
							"dataPermission":[
								
							],
							"isReference":false,
							"name":"是否外部单位使用",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":50
								},
								{
									"isHide":false,
									"name":"Required",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								}
							],
							"select":"IsExternal",
							"sort":10
						}
					],
					"code":"columnGroup",
					"control":"ColumnGroup",
					"dataPermission":[
						
					],
					"isReference":false,
					"name":"列集合",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"DetailColumns",
							"value":"3"
						}
					],
					"sort":0
				}
			],
			"code":"fieldSet1",
			"control":"FieldSet",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"FieldSet1",
			"otherChildren":[
				
			],
			"property":[
				{
					"isHide":false,
					"name":"IsNtitle",
					"value":"true"
				}
			],
			"sort":2
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"uuid",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"uuid",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":1000
		}
	],
	"code":"applyForLoanForm",
	"control":"FormPanel",
	"dataPermission":[
		
	],
	"isReference":false,
	"javaScript":"this.BeforeLoad = function () {
    var me = this;
    var row = me.OpenSelectRow;
    if(Framework.IsNullOrEmpty(row))
    {
        return;
    }
    var project = me.DownForCode("ProjectId");
    project.SetValue(row.id);

    var profile = AppContext.Profile;

    me.DownForCode("BorrowerId").SetValue({id: profile.id, name: profile.name, code: profile.code});
    me.DownForCode("BorrowDeptId").SetValue({id: profile.deptId, name: profile.deptName,treeName:profile.deptTreeName});
};

this.AfterLoad = function () {
    var me = this;
    var timestamp = me.DownForCode("Timestamp");
    if (timestamp && Framework.IsNullOrEmpty(timestamp.GetValue())) {
        //只有新增的时候在走,保存过就不在调用
        var borrowChilds = me.DownForCode("borrowChilds");
        if (borrowChilds && borrowChilds.Load) borrowChilds.Load();
    }
};",
	"name":"申请借阅",
	"otherChildren":[
		
	],
	"property":[
		{
			"isHide":false,
			"name":"BaseCode",
			"value":"applyForLoanForm"
		},
		{
			"isHide":false,
			"name":"Name",
			"value":"申请借阅"
		},
		{
			"isHide":false,
			"name":"IsReadOnly",
			"value":false
		},
		{
			"isHide":false,
			"name":"Description"
		},
		{
			"isHide":false,
			"name":"FormId",
			"value":342817
		},
		{
			"isHide":false,
			"name":"OrderBy"
		},
		{
			"isHide":false,
			"name":"IsSqlForm",
			"value":false
		},
		{
			"isHide":false,
			"name":"JavaScript",
			"value":"var registerJavaScript = function () {

 

this.BeforeLoad = function () {
    var me = this;
    var row = me.OpenSelectRow;
    if(Framework.IsNullOrEmpty(row))
    {
        return;
    }
    var project = me.DownForCode("ProjectId");
    project.SetValue(row.id);

    var profile = AppContext.Profile;

    me.DownForCode("BorrowerId").SetValue({id: profile.id, name: profile.name, code: profile.code});
    me.DownForCode("BorrowDeptId").SetValue({id: profile.deptId, name: profile.deptName,treeName:profile.deptTreeName});
};

this.AfterLoad = function () {
    var me = this;
    var timestamp = me.DownForCode("Timestamp");
    if (timestamp && Framework.IsNullOrEmpty(timestamp.GetValue())) {
        //只有新增的时候在走,保存过就不在调用
        var borrowChilds = me.DownForCode("borrowChilds");
        if (borrowChilds && borrowChilds.Load) borrowChilds.Load();
    }
};

 

};"
		},
		{
			"isHide":false,
			"name":"EntityType",
			"value":"BorrowMaster"
		},
		{
			"isHide":false,
			"name":"IsShowRefresh",
			"value":"false"
		},
		{
			"container":"Window",
			"isHide":false,
			"name":"Width",
			"value":"90%"
		}
	],
	"sort":0
}
{"action":[{"code":"Back","name":"Back","property":[],"sort":0}],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":342950}],"sort":0}],"code":"fieldSet","control":"FieldSet","dataPermission":[],"isReference":false,"javaScript":"","name":"项目列表","otherChildren":[],"property":[{"isHide":false,"name":"style:min-height","value":"50%"}],"sort":4},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"code":"id","control":"Hidden","dataPermission":[],"isReference":false,"name":"主键","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":16},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"Id","sort":1},{"action":[],"authority":[],"children":[],"code":"projectId","control":"Hidden","dataPermission":[],"isReference":false,"name":"主项目","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":16},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"EntityConfig","value":"Entity(Project|Code(Code)#Name(Name))]"},{"isHide":false,"name":"EntityCode","value":"Project"}],"select":"ProjectIdEntity(Project|Code(Code)#Name(Name))]","sort":6},{"action":[],"authority":[],"children":[],"code":"borrowReason","control":"TextArea","dataPermission":[],"isReference":false,"javaScript":"","name":"借阅事由","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":2000},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"Colspan","value":"3"},{"isHide":false,"name":"Required","value":"true"}],"select":"BorrowReason","sort":11},{"action":[],"authority":[],"children":[],"code":"borrowDays","control":"Number","dataPermission":[],"isReference":false,"name":"借阅天数","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":20},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"BorrowDays","sort":9},{"action":[],"authority":[],"children":[],"code":"borrowDeptId","control":"GridCombobox","dataPermission":[],"isReference":false,"name":"借阅部门","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":16},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"EntityConfig","value":"[Entity(Department|Code(Code)#Name(TreeName))]"},{"isHide":false,"name":"EntityCode","value":"Department"},{"isHide":false,"name":"IsReadOnly","value":"true"}],"select":"BorrowDeptId[Entity(Department|Code(Code)#Name(TreeName))]","sort":8},{"action":[],"authority":[],"children":[],"code":"borrowerId","control":"GridCombobox","dataPermission":[],"isReference":false,"name":"借阅人","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":16},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"EntityConfig","value":"[Entity(User|Code(Code)#Name(Name))]"},{"isHide":false,"name":"EntityCode","value":"User"},{"isHide":false,"name":"IsReadOnly","value":"true"}],"select":"BorrowerId[Entity(User|Code(Code)#Name(Name))]","sort":7},{"action":[],"authority":[],"children":[],"code":"timestamp","control":"Hidden","dataPermission":[],"isReference":false,"name":"时间戳","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":8},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"Timestamp","sort":5},{"action":[],"authority":[],"children":[],"code":"isExternal","control":"CheckBox","dataPermission":[],"isReference":false,"name":"是否外部单位使用","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":50},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"IsExternal","sort":10}],"code":"columnGroup","control":"ColumnGroup","dataPermission":[],"isReference":false,"name":"列集合","otherChildren":[],"property":[{"isHide":false,"name":"DetailColumns","value":"3"}],"sort":0}],"code":"fieldSet1","control":"FieldSet","dataPermission":[],"isReference":false,"name":"FieldSet1","otherChildren":[],"property":[{"isHide":false,"name":"IsNtitle","value":"true"}],"sort":2},{"action":[],"authority":[],"children":[],"code":"uuid","control":"Hidden","dataPermission":[],"isReference":false,"name":"uuid","otherChildren":[],"property":[],"sort":1000}],"code":"applyForLoanForm","control":"FormPanel","dataPermission":[],"isReference":false,"javaScript":"this.BeforeLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;row&nbsp;=&nbsp;me.OpenSelectRow;\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNullOrEmpty(row))\n&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;project&nbsp;=&nbsp;me.DownForCode(&quot;ProjectId&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;project.SetValue(row.id);\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;profile&nbsp;=&nbsp;AppContext.Profile;\n\n&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode(&quot;BorrowerId&quot;).SetValue({id:&nbsp;profile.id,&nbsp;name:&nbsp;profile.name,&nbsp;code:&nbsp;profile.code});\n&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode(&quot;BorrowDeptId&quot;).SetValue({id:&nbsp;profile.deptId,&nbsp;name:&nbsp;profile.deptName,treeName:profile.deptTreeName});\n};\n\nthis.AfterLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;timestamp&nbsp;=&nbsp;me.DownForCode(&quot;Timestamp&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(timestamp&nbsp;&&&nbsp;Framework.IsNullOrEmpty(timestamp.GetValue()))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//只有新增的时候在走,保存过就不在调用\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;borrowChilds&nbsp;=&nbsp;me.DownForCode(&quot;borrowChilds&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(borrowChilds&nbsp;&&&nbsp;borrowChilds.Load)&nbsp;borrowChilds.Load();\n&nbsp;&nbsp;&nbsp;&nbsp;}\n};","name":"申请借阅","otherChildren":[],"property":[{"isHide":false,"name":"BaseCode","value":"applyForLoanForm"},{"isHide":false,"name":"Name","value":"申请借阅"},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"Description"},{"isHide":false,"name":"FormId","value":342817},{"isHide":false,"name":"OrderBy"},{"isHide":false,"name":"IsSqlForm","value":false},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.BeforeLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;row&nbsp;=&nbsp;me.OpenSelectRow;\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNullOrEmpty(row))\n&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;project&nbsp;=&nbsp;me.DownForCode(&quot;ProjectId&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;project.SetValue(row.id);\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;profile&nbsp;=&nbsp;AppContext.Profile;\n\n&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode(&quot;BorrowerId&quot;).SetValue({id:&nbsp;profile.id,&nbsp;name:&nbsp;profile.name,&nbsp;code:&nbsp;profile.code});\n&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode(&quot;BorrowDeptId&quot;).SetValue({id:&nbsp;profile.deptId,&nbsp;name:&nbsp;profile.deptName,treeName:profile.deptTreeName});\n};\n\nthis.AfterLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;timestamp&nbsp;=&nbsp;me.DownForCode(&quot;Timestamp&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(timestamp&nbsp;&&&nbsp;Framework.IsNullOrEmpty(timestamp.GetValue()))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//只有新增的时候在走,保存过就不在调用\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;borrowChilds&nbsp;=&nbsp;me.DownForCode(&quot;borrowChilds&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(borrowChilds&nbsp;&&&nbsp;borrowChilds.Load)&nbsp;borrowChilds.Load();\n&nbsp;&nbsp;&nbsp;&nbsp;}\n};\r\n \r\n};"},{"isHide":false,"name":"EntityType","value":"BorrowMaster"},{"isHide":false,"name":"IsShowRefresh","value":"false"},{"container":"Window","isHide":false,"name":"Width","value":"90%"}],"sort":0}
2020-05-05 22:07:31