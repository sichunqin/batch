{
	"action":[
		{
			"code":"Export",
			"container":"GridPanel",
			"name":"导出",
			"property":[
				
			],
			"sort":0
		},
		{
			"code":"saveData",
			"name":"保存",
			"property":[
				{
					"isHide":false,
					"name":"OnClick",
					"value":"SaveData"
				},
				{
					"isHide":false,
					"name":"JavaScript",
					"value":"var registerJavaScript = function () {

 

this.SaveData = function () {
    console.log("SaveData");

    var top = this.Top();
    var boxAndNumberBooks = top.DownForCode('boxAndNumberBooks');
    var manuScirptItemArchive = top.DownForCode("manuScirptItemArchive")
    var project = top.DownForCode("project")
    var projectCode = top.DownForCode('ProjectCode');
    var fenOpinionsFirstTable = top.DownForCode('fenOpinionsFirstTable');
    var fenOpinionsTwoTable = top.DownForCode('FenOpinionsTwoTable');
    var fenOpinionsThreeTable = top.DownForCode('FenOpinionsThreeTable');
    var genernaOpinionsThreeTable = top.DownForCode('GenernaOpinionsThreeTable');
    var genernaOpinionsTwoTable = top.DownForCode('GenernaOpinionsTwoTable');
    var genernalOpinionsFirstTable = top.DownForCode('GenernalOpinionsFirstTable');
    var arrayReviewCommentzd = [];
    var arrayReviewCommentbg = [];
    var arrayReviewCommentdg = [];
    var arrayReviewCommentGenernazd = [];
    var arrayReviewCommentGenernabg = [];
    var arrayReviewCommentGenernadg = [];
    var transfererStaff = top.DownForCode('TransfererStaff').GetValue();
    var archiveDate = top.DownForCode('ArchiveDate').GetValue();
    if (Framework.IsNullOrEmpty(transfererStaff)) {
        Framework.Message("档案移交人必须填写");
        return;
    }
    if (Framework.IsNullOrEmpty(archiveDate)) {
        Framework.Message("归档日期必须填写");
        return;
    }
    if (Framework.IsNotNullOrEmpty(fenOpinionsFirstTable)) {
        Framework.ForEach(fenOpinionsFirstTable.GetSelections(), function (item) {
            arrayReviewCommentzd.push(item.id)
        });
    }
    if (Framework.IsNotNullOrEmpty(fenOpinionsTwoTable)) {
        Framework.ForEach(fenOpinionsTwoTable.GetSelections(), function (item) {
            arrayReviewCommentbg.push(item.id)
        });
    }
    if (Framework.IsNotNullOrEmpty(fenOpinionsThreeTable)) {
        Framework.ForEach(fenOpinionsThreeTable.GetSelections(), function (item) {
            arrayReviewCommentdg.push(item.id)
        });
    }

    if (Framework.IsNotNullOrEmpty(genernaOpinionsThreeTable)) {
        Framework.ForEach(genernaOpinionsThreeTable.GetSelections(), function (item) {
            arrayReviewCommentGenernadg.push(item.id)
        });
    }
    if (Framework.IsNotNullOrEmpty(genernaOpinionsTwoTable)) {
        Framework.ForEach(genernaOpinionsTwoTable.GetSelections(), function (item) {
            arrayReviewCommentGenernabg.push(item.id)
        });
    }
    if (Framework.IsNotNullOrEmpty(genernalOpinionsFirstTable)) {
        Framework.ForEach(genernalOpinionsFirstTable.GetSelections(), function (item) {
            arrayReviewCommentGenernazd.push(item.id)
        });
    }
    var paramsRC = {};
    paramsRC.FileName = "分所项目质量控制复核反馈意见及其回复.docx";
    paramsRC.ProjectCode = projectCode.GetValue();
    paramsRC.ReviewCommentZDList = JSON.stringify(arrayReviewCommentzd);
    paramsRC.ReviewCommentBGList = JSON.stringify(arrayReviewCommentbg);
    paramsRC.ReviewCommentDGList = JSON.stringify(arrayReviewCommentdg);
    if (arrayReviewCommentzd.length > 0 || arrayReviewCommentbg.length > 0 || arrayReviewCommentdg.length > 0) {
        Framework.AjaxRequest(this, "Project-DxCreateReviewOpinion.do", 'get', paramsRC, true, function (result) {
        })
    }
    var paramsGenernaRC = {};
    paramsGenernaRC.FileName = "总所项目质量控制复核反馈意见及其回复.docx";
    paramsGenernaRC.ProjectCode = projectCode.GetValue();
    paramsGenernaRC.ReviewCommentZDList = JSON.stringify(arrayReviewCommentGenernazd);
    paramsGenernaRC.ReviewCommentBGList = JSON.stringify(arrayReviewCommentGenernabg);
    paramsGenernaRC.ReviewCommentDGList = JSON.stringify(arrayReviewCommentGenernadg);
    if (arrayReviewCommentGenernazd.length > 0 || arrayReviewCommentGenernabg.length > 0 || arrayReviewCommentGenernadg.length > 0) {
        Framework.AjaxRequest(this, "Project-DxCreateReviewOpinion.do", 'get', paramsGenernaRC, true, function (result) {
        })
    }
    var FormPanel = top.DownForCode('Center').Down("[controltype='FormPanel']").First;
    var boxs = top.DownForCode('BoxAndBookFieldSet').Down("[controltype='EditorGridPanel']").First;
    var manuScirptItemArchiveBox = top.DownForCode('compositionCustomer');
    var manuScirptItemArchiveBox2 = top.DownForCode('ManuScirptItemArchiveBoxList');
    var manuScirptItemArchiveBoxList = manuScirptItemArchiveBox2.GetValue();
    var rightContent = top.DownForCode('Center').Down("[controltype='FormPanel']").First;
    var archiveModel = {};
    var array = [];
    var result;

    if (Framework.IsNullOrEmpty(top.DownForCode('TransfererStaff').GetValue()) && Framework.IsNullOrEmpty(top.DownForCode('ArchiveDate').GetValue())) {
        Framework.Message("请保证归档信息的完整性");
        return;
    }
    boxAndBookCount(manuScirptItemArchiveBox2);
    for (i = 0; i < manuScirptItemArchiveBoxList.length; i++) {
        if (Framework.IsNullOrEmpty(manuScirptItemArchiveBoxList[i].book)  || Framework.IsNullOrEmpty(manuScirptItemArchiveBoxList[i].content)) {//|| Framework.IsNullOrEmpty(manuScirptItemArchiveBoxList[i].bookRange)
            result = 1;
            Framework.Message("请保证盒数/册数列表中数据的完整性");
            return;
        }
        var model = {};
        if (i == 0) {
            model.id = manuScirptItemArchiveBoxList[i].id;
            model.box = "第" + (i + 1) + "盒";
            model.book = manuScirptItemArchiveBoxList[i].book;
            model.bookRange = "第" + stringParseInt(model.box) + "-" + model.book + "册";
            model.content = manuScirptItemArchiveBoxList[i].content;
            array.push(model);
        } else {
            model.id = manuScirptItemArchiveBoxList[i].id;
            model.box = "第" + (i + 1) + "盒";
            model.book = manuScirptItemArchiveBoxList[i].book;
            model.content = manuScirptItemArchiveBoxList[i].content;
            var range = manuScirptItemArchiveBoxList[i - 1].bookRange.indexOf("-");
            var end = parseInt(stringParseInt(array[i - 1].bookRange.substring(range)));
            var boxnum = end + 1;
            var booknum = end + parseInt(manuScirptItemArchiveBoxList[i].book);
            model.bookRange = "第" + boxnum + "-" + booknum + "册";
            array.push(model);
        }
    }


    // Framework.ForEach(manuScirptItemArchiveBoxList, function (item) {
    //     var arrayItem = {};
    //     if (Framework.IsNullOrEmpty(item.book) || Framework.IsNullOrEmpty(item.bookRange) || Framework.IsNullOrEmpty(item.content)) {
    //         result = 1;
    //         return;
    //     }
    //     arrayItem.id = item.id;
    //     arrayItem.box = item.box;
    //     arrayItem.book = item.book;
    //     arrayItem.bookRange = item.bookRange;
    //     arrayItem.Content = item.content;
    //     array.push(arrayItem);
    // });
    //if (result == 1) {
    // Framework.Message("请保证盒数/册数列表中数据的完整性");
    //return;
    //}
    var AcceptStaffId = {};
    var acceptStaffIdValue = top.DownForCode('AcceptStaffId').GetValue();
    if (Framework.IsNullOrEmpty(acceptStaffIdValue)) {
        Framework.Message("档案接收人不能为空请联系管理员", "提示");
        return;
    }
    AcceptStaffId.id = acceptStaffIdValue.id;

    archiveModel.boxAndBookDTOList = array;
    archiveModel.TransfererStaff = top.DownForCode('TransfererStaff').GetValue(); //
    archiveModel.AcceptStaffId = AcceptStaffId;
    archiveModel.Code = top.DownForCode('Code').GetValue();
    archiveModel.ArchiveDate = top.DownForCode('ArchiveDate').GetValue(); //
    archiveModel.BoxNumber = top.DownForCode('BoxNumber').GetValue();
    archiveModel.BookNumber = top.DownForCode('BookNumber').GetValue();
    archiveModel.CompostionCustomerId = top.DownForCode('CompostionCustomerId').GetValue();
    archiveModel.ProjectId = top.DownForCode('ProjectId').GetValue();
    var Id = top.DownForCode("ArchiveInfo").DownForCode("Id");
    if (Framework.IsNotNullOrEmpty(Id)) {
        archiveModel.Id = Id.GetValue();
    }
    var params = {};
    params.archive = JSON.stringify(archiveModel);
    var compostionCustomerId = this.Top().DownForCode('CompostionCustomerId').GetValue();
    Framework.AjaxRequest(me, "ManuScirptItemArchive-saveDataArchive.do", 'get', params, false, function (result) {
        // if(Framework.IsNotNullOrEmpty(project)) project.Load();
        Framework.Message("保存成功");
         var param = {};
         param.compostionCustomerId = compostionCustomerId;
         Framework.AjaxRequest(me, "/ManuScirptItemArchive-geCompostionCustomerAndArchiveInformation.do", 'get', param, false, function (result) {
             boxAndNumberBooks.SetValue(result.boxAndBookDTOList)
             rightContent.SetValue(result);
         })
    })
}

function stringParseInt(str) {
    return str.replace(/[^0-9]/ig, "");
};
function GetRowData(index, me) {
    return me.GetData(index);
};

function boxAndBookCount(me) {
    var model = {
        boxnum: 0,
        booknum: 0
    };
    for (i = 0; i < me.GetRows().length; i++) {
        var rowData = GetRowData(i, me);
        model.boxnum = parseInt(model.boxnum) + parseInt(stringParseInt(rowData.box));
        model.booknum = parseInt(model.booknum) + parseInt(stringParseInt(rowData.book));
    }
    var top = me.Top();
    top.DownForCode("BoxNumber").SetValue(me.GetRows().length);
    top.DownForCode("BookNumber").SetValue(model.booknum);
}



 

};"
				}
			],
			"sort":2
		},
		{
			"code":"Back",
			"name":"Back",
			"property":[
				
			],
			"sort":1
		}
	],
	"authority":[
		
	],
	"children":[
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"dataPermission":[
						
					],
					"isReference":true,
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":true,
							"name":"referenceFormId",
							"value":341542
						},
						{
							"isHide":false,
							"name":"MainParams",
							"value":"[{param:'manuScirptItemArchiveId',fieldId:'id'}]"
						},
						{
							"isHide":false,
							"name":"MustParam",
							"value":"query_manuScirptItemArchiveId"
						}
					],
					"sort":0
				}
			],
			"code":"boxAndBookFieldSet",
			"control":"FieldSet",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"盒数/册数",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":5
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"dataPermission":[
						
					],
					"isReference":false,
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":true,
							"name":"referenceFormId",
							"value":341790
						}
					],
					"sort":0
				}
			],
			"code":"reporFileSet",
			"control":"FieldSet",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"报告列表",
			"otherChildren":[
				
			],
			"property":[
				{
					"isHide":false,
					"name":"style:margin-top",
					"value":"5px"
				}
			],
			"sort":9
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"dataPermission":[
								
							],
							"isReference":false,
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":true,
									"name":"referenceFormId",
									"value":343104
								}
							],
							"sort":0
						}
					],
					"code":"reviewComments",
					"control":"Panel",
					"dataPermission":[
						
					],
					"isReference":false,
					"name":"复核意见",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"style:min-height",
							"value":"500px"
						},
						{
							"isHide":false,
							"name":"Height",
							"value":"auto"
						}
					],
					"sort":8
				}
			],
			"code":"reviewFileSet",
			"control":"FieldSet",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"复核意见",
			"otherChildren":[
				
			],
			"property":[
				{
					"isHide":false,
					"name":"AuthorityRemark",
					"value":"底稿归档-复核意见"
				}
			],
			"sort":11
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"id",
							"control":"Hidden",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"主键",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":16
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								}
							],
							"select":"Id",
							"sort":13
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"bookNumber",
							"control":"Number",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"纸质底稿总册数",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":200
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":"true"
								}
							],
							"select":"BookNumber",
							"sort":23
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"boxNumber",
							"control":"Number",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"纸质底稿总盒数",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":200
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":"true"
								}
							],
							"select":"BoxNumber",
							"sort":20
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"archiveDate",
							"control":"Date",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"归档日期",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":23
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								}
							],
							"select":"ArchiveDate",
							"sort":21
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"acceptStaffId",
							"control":"GridCombobox",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"档案接收人",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":16
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								},
								{
									"isHide":false,
									"name":"EntityConfig",
									"value":"[Entity(User|Code(Code)#Name(Name))]"
								},
								{
									"isHide":false,
									"name":"EntityCode",
									"value":"User"
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":"true"
								}
							],
							"select":"AcceptStaffId[Entity(User|Code(Code)#Name(Name))]",
							"sort":22
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"transfererStaff",
							"control":"Text",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"档案移交人",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":200
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								}
							],
							"select":"TransfererStaff",
							"sort":19
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"compostionCustomerId",
							"control":"Hidden",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"被审计单位",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":100
								},
								{
									"isHide":false,
									"name":"Required",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								},
								{
									"isHide":false,
									"name":"EntityCode",
									"value":"CompositionCustomer"
								}
							],
							"select":"CompostionCustomerId",
							"sort":25
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"name",
							"control":"Hidden",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"名称",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":200
								},
								{
									"isHide":false,
									"name":"Required",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								}
							],
							"select":"Name",
							"sort":26
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"code",
							"control":"Text",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"档案号",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":200
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":"true"
								}
							],
							"select":"Code",
							"sort":18
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"timestamp",
							"control":"Hidden",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"时间戳",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":8
								},
								{
									"isHide":false,
									"name":"Required",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								}
							],
							"select":"Timestamp",
							"sort":27
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"projectCode",
							"control":"Text",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"项目编号",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":"true"
								}
							],
							"sort":14
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"projectName",
							"control":"Text",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"项目名称",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":"true"
								}
							],
							"sort":15
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"projectManagerName",
							"control":"Text",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"项目经理",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":"true"
								}
							],
							"sort":16
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"businessCode",
							"control":"Text",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"业务约定书编号",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":"true"
								}
							],
							"sort":17
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"projectId",
							"control":"Hidden",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"项目id",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Length",
									"value":16
								},
								{
									"isHide":false,
									"name":"Required",
									"value":true
								},
								{
									"isHide":false,
									"name":"IsReadOnly",
									"value":false
								},
								{
									"isHide":false,
									"name":"IsTransient",
									"value":false
								},
								{
									"isHide":false,
									"name":"EntityCode",
									"value":"Project"
								}
							],
							"select":"ProjectId",
							"sort":7
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"reviewState",
							"control":"Hidden",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"复核等级",
							"otherChildren":[
								
							],
							"property":[
								
							],
							"sort":6
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"archivePath",
							"control":"Hidden",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"归档路径",
							"otherChildren":[
								
							],
							"property":[
								
							],
							"sort":2
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"code":"reviewStateAll",
							"control":"Hidden",
							"dataPermission":[
								
							],
							"isReference":false,
							"name":"ReviewStateAll",
							"otherChildren":[
								
							],
							"property":[
								
							],
							"sort":1
						}
					],
					"code":"columnGroup",
					"control":"ColumnGroup",
					"dataPermission":[
						
					],
					"isReference":false,
					"name":"列集合",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"DetailColumns",
							"value":"2"
						}
					],
					"sort":0
				}
			],
			"code":"archiveInfo",
			"control":"FieldSet",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"归档信息",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":4
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"dataPermission":[
						
					],
					"isReference":false,
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":true,
							"name":"referenceFormId",
							"value":342930
						}
					],
					"sort":0
				}
			],
			"code":"approvalTrajectoryFieldSet",
			"control":"FieldSet",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"审批轨迹",
			"otherChildren":[
				
			],
			"property":[
				{
					"isHide":false,
					"name":"style:min-height",
					"value":"100px"
				},
				{
					"isHide":false,
					"name":"IsWorkFlowHide",
					"value":"true"
				},
				{
					"isHide":false,
					"name":"style:margin-top",
					"value":"10px"
				}
			],
			"sort":12
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"uuid",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"uuid",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":1000
		}
	],
	"code":"manuscriptItemArchivesInfoQuery",
	"control":"FormPanel",
	"dataPermission":[
		
	],
	"isReference":false,
	"javaScript":"this.BeforeLoad=function(){
    console.log("隐藏意见");
   

}

 

this.BeforeLoad = function () {
    var me = this;
    var FormPanel=this;
    var report = this.DownForCode('ReporFileSet').Down("[controltype='GridPanel']").First;
    var boxs = this.DownForCode('BoxAndBookFieldSet').Down("[controltype='EditorGridPanel']").First;
    console.log("BeforeLoad 底稿归档111111");
    var tree = this.Top().DownForCode("compositionCustomerTreeQuery");
    var params = {};
    params.compostionCustomerId = parseInt(tree.GetSelected().id);
    Framework.AjaxRequest(me, "/ManuScirptItemArchive-geCompostionCustomerAndArchiveInformation-Query.do", 'get', params, true, function (result) {
        FormPanel.SetValue(result);
         report.SetValue(result.repostList);
         boxs.SetValue(result.boxAndBookDTOList);
         setTableData(me, result.reviewOpinionsDataDTOList);
    });
};
function setTableData(Top, data) {
    var fenOpinionsFirstTable = null;
    var FenOpinionsThreeTable = null;
    var FenOpinionsTwoTable = null;
    var generalOpinionsFirstTable = null;
    var generalOpinionsTwoTable = null;
    var generalOpinionsThreeTable = null;
    //分所重点问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('focusProblem')))
        fenOpinionsFirstTable = Top.DownForCode('focusProblem').DownForCode('fenOpinionsFirstTable');
    var FirstTableArray = [];
    //分所报告问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('reportProblem')))
        FenOpinionsTwoTable = Top.DownForCode('reportProblem').DownForCode('FenOpinionsTwoTable');
    var TwoTableArray = [];
    //分所底稿问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('papersProblem')))
        FenOpinionsThreeTable = Top.DownForCode('papersProblem').DownForCode('FenOpinionsThreeTable');
    var ThreeTableArray = [];

    //总所重点问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('generalFocusProblem')))
        generalOpinionsFirstTable = Top.DownForCode('generalFocusProblem').DownForCode('genernalOpinionsFirstTable');
    var generalFirstTableArray = [];
    //总所报告问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('generalReportProblem')))
        generalOpinionsTwoTable = Top.DownForCode('generalReportProblem').DownForCode('genernaOpinionsTwoTable');
    var generalTwoTableArray = [];
    //总所底稿问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('genernalPapersProblem')))
        generalOpinionsThreeTable = Top.DownForCode('genernalPapersProblem').DownForCode('genernaOpinionsThreeTable');
    var generalThreeTableArray = [];
    for (i = 0; i < data.length; i++) {
        if (data[i].manuscriptReviewState == 30) {
            if (data[i].rCType == 10) {
                FirstTableArray.push(data[i]);
            } else if (data[i].rCType == 20) {
                TwoTableArray.push(data[i]);
            } else {
                ThreeTableArray.push(data[i]);
            }
        } else {
            if (data[i].rCType == 10) {
                generalFirstTableArray.push(data[i]);
            } else if (data[i].rCType == 20) {
                generalTwoTableArray.push(data[i]);
            } else {
                generalThreeTableArray.push(data[i]);
            }
        }
    }
    if(Framework.IsNotNullOrEmpty(fenOpinionsFirstTable))
        fenOpinionsFirstTable.SetValue(FirstTableArray);
    if(Framework.IsNotNullOrEmpty(FenOpinionsTwoTable))
        FenOpinionsTwoTable.SetValue(TwoTableArray);
    if(Framework.IsNotNullOrEmpty(FenOpinionsThreeTable))
        FenOpinionsThreeTable.SetValue(ThreeTableArray);
    if(Framework.IsNotNullOrEmpty(generalOpinionsFirstTable))
        generalOpinionsFirstTable.SetValue(generalFirstTableArray);
    if(Framework.IsNotNullOrEmpty(generalOpinionsTwoTable))
        generalOpinionsTwoTable.SetValue(generalTwoTableArray);
    if(Framework.IsNotNullOrEmpty(generalOpinionsThreeTable))
        generalOpinionsThreeTable.SetValue(generalThreeTableArray);
}
",
	"name":"底稿归档详情",
	"otherChildren":[
		
	],
	"property":[
		{
			"isHide":false,
			"name":"BaseCode",
			"value":"manuscriptItemArchivesInfo"
		},
		{
			"isHide":false,
			"name":"Name",
			"value":"底稿归档"
		},
		{
			"isHide":false,
			"name":"IsReadOnly",
			"value":true
		},
		{
			"isHide":false,
			"name":"Description"
		},
		{
			"isHide":false,
			"name":"FormId",
			"value":343100
		},
		{
			"isHide":false,
			"name":"OrderBy"
		},
		{
			"isHide":false,
			"name":"IsSqlForm",
			"value":false
		},
		{
			"isHide":false,
			"name":"JavaScript",
			"value":"var registerJavaScript = function () {

 

this.BeforeLoad=function(){
    console.log("隐藏意见");
   

}

 

this.BeforeLoad = function () {
    var me = this;
    var FormPanel=this;
    var report = this.DownForCode('ReporFileSet').Down("[controltype='GridPanel']").First;
    var boxs = this.DownForCode('BoxAndBookFieldSet').Down("[controltype='EditorGridPanel']").First;
    console.log("BeforeLoad 底稿归档111111");
    var tree = this.Top().DownForCode("compositionCustomerTreeQuery");
    var params = {};
    params.compostionCustomerId = parseInt(tree.GetSelected().id);
    Framework.AjaxRequest(me, "/ManuScirptItemArchive-geCompostionCustomerAndArchiveInformation-Query.do", 'get', params, true, function (result) {
        FormPanel.SetValue(result);
         report.SetValue(result.repostList);
         boxs.SetValue(result.boxAndBookDTOList);
         setTableData(me, result.reviewOpinionsDataDTOList);
    });
};
function setTableData(Top, data) {
    var fenOpinionsFirstTable = null;
    var FenOpinionsThreeTable = null;
    var FenOpinionsTwoTable = null;
    var generalOpinionsFirstTable = null;
    var generalOpinionsTwoTable = null;
    var generalOpinionsThreeTable = null;
    //分所重点问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('focusProblem')))
        fenOpinionsFirstTable = Top.DownForCode('focusProblem').DownForCode('fenOpinionsFirstTable');
    var FirstTableArray = [];
    //分所报告问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('reportProblem')))
        FenOpinionsTwoTable = Top.DownForCode('reportProblem').DownForCode('FenOpinionsTwoTable');
    var TwoTableArray = [];
    //分所底稿问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('papersProblem')))
        FenOpinionsThreeTable = Top.DownForCode('papersProblem').DownForCode('FenOpinionsThreeTable');
    var ThreeTableArray = [];

    //总所重点问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('generalFocusProblem')))
        generalOpinionsFirstTable = Top.DownForCode('generalFocusProblem').DownForCode('genernalOpinionsFirstTable');
    var generalFirstTableArray = [];
    //总所报告问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('generalReportProblem')))
        generalOpinionsTwoTable = Top.DownForCode('generalReportProblem').DownForCode('genernaOpinionsTwoTable');
    var generalTwoTableArray = [];
    //总所底稿问题
    if(Framework.IsNotNullOrEmpty(Top.DownForCode('genernalPapersProblem')))
        generalOpinionsThreeTable = Top.DownForCode('genernalPapersProblem').DownForCode('genernaOpinionsThreeTable');
    var generalThreeTableArray = [];
    for (i = 0; i < data.length; i++) {
        if (data[i].manuscriptReviewState == 30) {
            if (data[i].rCType == 10) {
                FirstTableArray.push(data[i]);
            } else if (data[i].rCType == 20) {
                TwoTableArray.push(data[i]);
            } else {
                ThreeTableArray.push(data[i]);
            }
        } else {
            if (data[i].rCType == 10) {
                generalFirstTableArray.push(data[i]);
            } else if (data[i].rCType == 20) {
                generalTwoTableArray.push(data[i]);
            } else {
                generalThreeTableArray.push(data[i]);
            }
        }
    }
    if(Framework.IsNotNullOrEmpty(fenOpinionsFirstTable))
        fenOpinionsFirstTable.SetValue(FirstTableArray);
    if(Framework.IsNotNullOrEmpty(FenOpinionsTwoTable))
        FenOpinionsTwoTable.SetValue(TwoTableArray);
    if(Framework.IsNotNullOrEmpty(FenOpinionsThreeTable))
        FenOpinionsThreeTable.SetValue(ThreeTableArray);
    if(Framework.IsNotNullOrEmpty(generalOpinionsFirstTable))
        generalOpinionsFirstTable.SetValue(generalFirstTableArray);
    if(Framework.IsNotNullOrEmpty(generalOpinionsTwoTable))
        generalOpinionsTwoTable.SetValue(generalTwoTableArray);
    if(Framework.IsNotNullOrEmpty(generalOpinionsThreeTable))
        generalOpinionsThreeTable.SetValue(generalThreeTableArray);
}


 

};"
		},
		{
			"isHide":false,
			"name":"EntityType",
			"value":"ManuScirptItemArchive"
		},
		{
			"isHide":false,
			"name":"HelpPrompt",
			"value":""
		},
		{
			"isHide":false,
			"name":"IsShowRefresh",
			"value":"false"
		}
	],
	"sort":0
}
{"action":[{"code":"Export","container":"GridPanel","name":"导出","property":[],"sort":0},{"code":"saveData","name":"保存","property":[{"isHide":false,"name":"OnClick","value":"SaveData"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.SaveData&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;SaveData&quot;);\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;top&nbsp;=&nbsp;this.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;boxAndNumberBooks&nbsp;=&nbsp;top.DownForCode('boxAndNumberBooks');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;manuScirptItemArchive&nbsp;=&nbsp;top.DownForCode(&quot;manuScirptItemArchive&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;project&nbsp;=&nbsp;top.DownForCode(&quot;project&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectCode&nbsp;=&nbsp;top.DownForCode('ProjectCode');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fenOpinionsFirstTable&nbsp;=&nbsp;top.DownForCode('fenOpinionsFirstTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fenOpinionsTwoTable&nbsp;=&nbsp;top.DownForCode('FenOpinionsTwoTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fenOpinionsThreeTable&nbsp;=&nbsp;top.DownForCode('FenOpinionsThreeTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;genernaOpinionsThreeTable&nbsp;=&nbsp;top.DownForCode('GenernaOpinionsThreeTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;genernaOpinionsTwoTable&nbsp;=&nbsp;top.DownForCode('GenernaOpinionsTwoTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;genernalOpinionsFirstTable&nbsp;=&nbsp;top.DownForCode('GenernalOpinionsFirstTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;arrayReviewCommentzd&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;arrayReviewCommentbg&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;arrayReviewCommentdg&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;arrayReviewCommentGenernazd&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;arrayReviewCommentGenernabg&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;arrayReviewCommentGenernadg&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;transfererStaff&nbsp;=&nbsp;top.DownForCode('TransfererStaff').GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;archiveDate&nbsp;=&nbsp;top.DownForCode('ArchiveDate').GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(transfererStaff))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.Message(&quot;档案移交人必须填写&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(archiveDate))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.Message(&quot;归档日期必须填写&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(fenOpinionsFirstTable))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(fenOpinionsFirstTable.GetSelections(),&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrayReviewCommentzd.push(item.id)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(fenOpinionsTwoTable))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(fenOpinionsTwoTable.GetSelections(),&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrayReviewCommentbg.push(item.id)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(fenOpinionsThreeTable))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(fenOpinionsThreeTable.GetSelections(),&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrayReviewCommentdg.push(item.id)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(genernaOpinionsThreeTable))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(genernaOpinionsThreeTable.GetSelections(),&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrayReviewCommentGenernadg.push(item.id)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(genernaOpinionsTwoTable))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(genernaOpinionsTwoTable.GetSelections(),&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrayReviewCommentGenernabg.push(item.id)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(genernalOpinionsFirstTable))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(genernalOpinionsFirstTable.GetSelections(),&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrayReviewCommentGenernazd.push(item.id)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;paramsRC&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;paramsRC.FileName&nbsp;=&nbsp;&quot;分所项目质量控制复核反馈意见及其回复.docx&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsRC.ProjectCode&nbsp;=&nbsp;projectCode.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;paramsRC.ReviewCommentZDList&nbsp;=&nbsp;JSON.stringify(arrayReviewCommentzd);\n&nbsp;&nbsp;&nbsp;&nbsp;paramsRC.ReviewCommentBGList&nbsp;=&nbsp;JSON.stringify(arrayReviewCommentbg);\n&nbsp;&nbsp;&nbsp;&nbsp;paramsRC.ReviewCommentDGList&nbsp;=&nbsp;JSON.stringify(arrayReviewCommentdg);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(arrayReviewCommentzd.length&nbsp;&gt;&nbsp;0&nbsp;||&nbsp;arrayReviewCommentbg.length&nbsp;&gt;&nbsp;0&nbsp;||&nbsp;arrayReviewCommentdg.length&nbsp;&gt;&nbsp;0)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(this,&nbsp;&quot;Project-DxCreateReviewOpinion.do&quot;,&nbsp;'get',&nbsp;paramsRC,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;paramsGenernaRC&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;paramsGenernaRC.FileName&nbsp;=&nbsp;&quot;总所项目质量控制复核反馈意见及其回复.docx&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsGenernaRC.ProjectCode&nbsp;=&nbsp;projectCode.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;paramsGenernaRC.ReviewCommentZDList&nbsp;=&nbsp;JSON.stringify(arrayReviewCommentGenernazd);\n&nbsp;&nbsp;&nbsp;&nbsp;paramsGenernaRC.ReviewCommentBGList&nbsp;=&nbsp;JSON.stringify(arrayReviewCommentGenernabg);\n&nbsp;&nbsp;&nbsp;&nbsp;paramsGenernaRC.ReviewCommentDGList&nbsp;=&nbsp;JSON.stringify(arrayReviewCommentGenernadg);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(arrayReviewCommentGenernazd.length&nbsp;&gt;&nbsp;0&nbsp;||&nbsp;arrayReviewCommentGenernabg.length&nbsp;&gt;&nbsp;0&nbsp;||&nbsp;arrayReviewCommentGenernadg.length&nbsp;&gt;&nbsp;0)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(this,&nbsp;&quot;Project-DxCreateReviewOpinion.do&quot;,&nbsp;'get',&nbsp;paramsGenernaRC,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;FormPanel&nbsp;=&nbsp;top.DownForCode('Center').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;boxs&nbsp;=&nbsp;top.DownForCode('BoxAndBookFieldSet').Down(&quot;[controltype='EditorGridPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;manuScirptItemArchiveBox&nbsp;=&nbsp;top.DownForCode('compositionCustomer');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;manuScirptItemArchiveBox2&nbsp;=&nbsp;top.DownForCode('ManuScirptItemArchiveBoxList');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;manuScirptItemArchiveBoxList&nbsp;=&nbsp;manuScirptItemArchiveBox2.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rightContent&nbsp;=&nbsp;top.DownForCode('Center').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;archiveModel&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;array&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;result;\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(top.DownForCode('TransfererStaff').GetValue())&nbsp;&&&nbsp;Framework.IsNullOrEmpty(top.DownForCode('ArchiveDate').GetValue()))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.Message(&quot;请保证归档信息的完整性&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;boxAndBookCount(manuScirptItemArchiveBox2);\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;manuScirptItemArchiveBoxList.length;&nbsp;i++)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(manuScirptItemArchiveBoxList[i].book)&nbsp;&nbsp;||&nbsp;Framework.IsNullOrEmpty(manuScirptItemArchiveBoxList[i].content))&nbsp;{//||&nbsp;Framework.IsNullOrEmpty(manuScirptItemArchiveBoxList[i].bookRange)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;1;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.Message(&quot;请保证盒数/册数列表中数据的完整性&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(i&nbsp;==&nbsp;0)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.id&nbsp;=&nbsp;manuScirptItemArchiveBoxList[i].id;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.box&nbsp;=&nbsp;&quot;第&quot;&nbsp;+&nbsp;(i&nbsp;+&nbsp;1)&nbsp;+&nbsp;&quot;盒&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.book&nbsp;=&nbsp;manuScirptItemArchiveBoxList[i].book;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.bookRange&nbsp;=&nbsp;&quot;第&quot;&nbsp;+&nbsp;stringParseInt(model.box)&nbsp;+&nbsp;&quot;-&quot;&nbsp;+&nbsp;model.book&nbsp;+&nbsp;&quot;册&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.content&nbsp;=&nbsp;manuScirptItemArchiveBoxList[i].content;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array.push(model);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.id&nbsp;=&nbsp;manuScirptItemArchiveBoxList[i].id;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.box&nbsp;=&nbsp;&quot;第&quot;&nbsp;+&nbsp;(i&nbsp;+&nbsp;1)&nbsp;+&nbsp;&quot;盒&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.book&nbsp;=&nbsp;manuScirptItemArchiveBoxList[i].book;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.content&nbsp;=&nbsp;manuScirptItemArchiveBoxList[i].content;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;range&nbsp;=&nbsp;manuScirptItemArchiveBoxList[i&nbsp;-&nbsp;1].bookRange.indexOf(&quot;-&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;end&nbsp;=&nbsp;parseInt(stringParseInt(array[i&nbsp;-&nbsp;1].bookRange.substring(range)));\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;boxnum&nbsp;=&nbsp;end&nbsp;+&nbsp;1;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;booknum&nbsp;=&nbsp;end&nbsp;+&nbsp;parseInt(manuScirptItemArchiveBoxList[i].book);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.bookRange&nbsp;=&nbsp;&quot;第&quot;&nbsp;+&nbsp;boxnum&nbsp;+&nbsp;&quot;-&quot;&nbsp;+&nbsp;booknum&nbsp;+&nbsp;&quot;册&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array.push(model);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Framework.ForEach(manuScirptItemArchiveBoxList,&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;arrayItem&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(item.book)&nbsp;||&nbsp;Framework.IsNullOrEmpty(item.bookRange)&nbsp;||&nbsp;Framework.IsNullOrEmpty(item.content))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;1;\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrayItem.id&nbsp;=&nbsp;item.id;\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrayItem.box&nbsp;=&nbsp;item.box;\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrayItem.book&nbsp;=&nbsp;item.book;\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrayItem.bookRange&nbsp;=&nbsp;item.bookRange;\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrayItem.Content&nbsp;=&nbsp;item.content;\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array.push(arrayItem);\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;});\n&nbsp;&nbsp;&nbsp;&nbsp;//if&nbsp;(result&nbsp;==&nbsp;1)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Framework.Message(&quot;请保证盒数/册数列表中数据的完整性&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;//return;\n&nbsp;&nbsp;&nbsp;&nbsp;//}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;AcceptStaffId&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;acceptStaffIdValue&nbsp;=&nbsp;top.DownForCode('AcceptStaffId').GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(acceptStaffIdValue))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.Message(&quot;档案接收人不能为空请联系管理员&quot;,&nbsp;&quot;提示&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;AcceptStaffId.id&nbsp;=&nbsp;acceptStaffIdValue.id;\n\n&nbsp;&nbsp;&nbsp;&nbsp;archiveModel.boxAndBookDTOList&nbsp;=&nbsp;array;\n&nbsp;&nbsp;&nbsp;&nbsp;archiveModel.TransfererStaff&nbsp;=&nbsp;top.DownForCode('TransfererStaff').GetValue();&nbsp;//\n&nbsp;&nbsp;&nbsp;&nbsp;archiveModel.AcceptStaffId&nbsp;=&nbsp;AcceptStaffId;\n&nbsp;&nbsp;&nbsp;&nbsp;archiveModel.Code&nbsp;=&nbsp;top.DownForCode('Code').GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;archiveModel.ArchiveDate&nbsp;=&nbsp;top.DownForCode('ArchiveDate').GetValue();&nbsp;//\n&nbsp;&nbsp;&nbsp;&nbsp;archiveModel.BoxNumber&nbsp;=&nbsp;top.DownForCode('BoxNumber').GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;archiveModel.BookNumber&nbsp;=&nbsp;top.DownForCode('BookNumber').GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;archiveModel.CompostionCustomerId&nbsp;=&nbsp;top.DownForCode('CompostionCustomerId').GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;archiveModel.ProjectId&nbsp;=&nbsp;top.DownForCode('ProjectId').GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;Id&nbsp;=&nbsp;top.DownForCode(&quot;ArchiveInfo&quot;).DownForCode(&quot;Id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(Id))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;archiveModel.Id&nbsp;=&nbsp;Id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;params.archive&nbsp;=&nbsp;JSON.stringify(archiveModel);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;compostionCustomerId&nbsp;=&nbsp;this.Top().DownForCode('CompostionCustomerId').GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;ManuScirptItemArchive-saveDataArchive.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;false,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;if(Framework.IsNotNullOrEmpty(project))&nbsp;project.Load();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.Message(&quot;保存成功&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;param&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;param.compostionCustomerId&nbsp;=&nbsp;compostionCustomerId;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;/ManuScirptItemArchive-geCompostionCustomerAndArchiveInformation.do&quot;,&nbsp;'get',&nbsp;param,&nbsp;false,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boxAndNumberBooks.SetValue(result.boxAndBookDTOList)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rightContent.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\n&nbsp;&nbsp;&nbsp;&nbsp;})\n}\n\nfunction&nbsp;stringParseInt(str)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;str.replace(/[^0-9]/ig,&nbsp;&quot;&quot;);\n};\nfunction&nbsp;GetRowData(index,&nbsp;me)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;me.GetData(index);\n};\n\nfunction&nbsp;boxAndBookCount(me)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boxnum:&nbsp;0,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;booknum:&nbsp;0\n&nbsp;&nbsp;&nbsp;&nbsp;};\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;me.GetRows().length;&nbsp;i++)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rowData&nbsp;=&nbsp;GetRowData(i,&nbsp;me);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.boxnum&nbsp;=&nbsp;parseInt(model.boxnum)&nbsp;+&nbsp;parseInt(stringParseInt(rowData.box));\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.booknum&nbsp;=&nbsp;parseInt(model.booknum)&nbsp;+&nbsp;parseInt(stringParseInt(rowData.book));\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;top&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;top.DownForCode(&quot;BoxNumber&quot;).SetValue(me.GetRows().length);\n&nbsp;&nbsp;&nbsp;&nbsp;top.DownForCode(&quot;BookNumber&quot;).SetValue(model.booknum);\n}\n\n\r\n \r\n};"}],"sort":2},{"code":"Back","name":"Back","property":[],"sort":1}],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":true,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":341542},{"isHide":false,"name":"MainParams","value":"[{param:'manuScirptItemArchiveId',fieldId:'id'}]"},{"isHide":false,"name":"MustParam","value":"query_manuScirptItemArchiveId"}],"sort":0}],"code":"boxAndBookFieldSet","control":"FieldSet","dataPermission":[],"isReference":false,"name":"盒数/册数","otherChildren":[],"property":[],"sort":5},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":341790}],"sort":0}],"code":"reporFileSet","control":"FieldSet","dataPermission":[],"isReference":false,"name":"报告列表","otherChildren":[],"property":[{"isHide":false,"name":"style:margin-top","value":"5px"}],"sort":9},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":343104}],"sort":0}],"code":"reviewComments","control":"Panel","dataPermission":[],"isReference":false,"name":"复核意见","otherChildren":[],"property":[{"isHide":false,"name":"style:min-height","value":"500px"},{"isHide":false,"name":"Height","value":"auto"}],"sort":8}],"code":"reviewFileSet","control":"FieldSet","dataPermission":[],"isReference":false,"name":"复核意见","otherChildren":[],"property":[{"isHide":false,"name":"AuthorityRemark","value":"底稿归档-复核意见"}],"sort":11},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"code":"id","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"主键","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":16},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"Id","sort":13},{"action":[],"authority":[],"children":[],"code":"bookNumber","control":"Number","dataPermission":[],"isReference":false,"javaScript":"","name":"纸质底稿总册数","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":200},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"IsReadOnly","value":"true"}],"select":"BookNumber","sort":23},{"action":[],"authority":[],"children":[],"code":"boxNumber","control":"Number","dataPermission":[],"isReference":false,"javaScript":"","name":"纸质底稿总盒数","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":200},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"IsReadOnly","value":"true"}],"select":"BoxNumber","sort":20},{"action":[],"authority":[],"children":[],"code":"archiveDate","control":"Date","dataPermission":[],"isReference":false,"javaScript":"","name":"归档日期","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":23},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"ArchiveDate","sort":21},{"action":[],"authority":[],"children":[],"code":"acceptStaffId","control":"GridCombobox","dataPermission":[],"isReference":false,"javaScript":"","name":"档案接收人","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":16},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"EntityConfig","value":"[Entity(User|Code(Code)#Name(Name))]"},{"isHide":false,"name":"EntityCode","value":"User"},{"isHide":false,"name":"IsReadOnly","value":"true"}],"select":"AcceptStaffId[Entity(User|Code(Code)#Name(Name))]","sort":22},{"action":[],"authority":[],"children":[],"code":"transfererStaff","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"档案移交人","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":200},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"TransfererStaff","sort":19},{"action":[],"authority":[],"children":[],"code":"compostionCustomerId","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"被审计单位","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":100},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"EntityCode","value":"CompositionCustomer"}],"select":"CompostionCustomerId","sort":25},{"action":[],"authority":[],"children":[],"code":"name","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"名称","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":200},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"Name","sort":26},{"action":[],"authority":[],"children":[],"code":"code","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"档案号","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":200},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"IsReadOnly","value":"true"}],"select":"Code","sort":18},{"action":[],"authority":[],"children":[],"code":"timestamp","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"时间戳","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":8},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"Timestamp","sort":27},{"action":[],"authority":[],"children":[],"code":"projectCode","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"项目编号","otherChildren":[],"property":[{"isHide":false,"name":"IsReadOnly","value":"true"}],"sort":14},{"action":[],"authority":[],"children":[],"code":"projectName","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"项目名称","otherChildren":[],"property":[{"isHide":false,"name":"IsReadOnly","value":"true"}],"sort":15},{"action":[],"authority":[],"children":[],"code":"projectManagerName","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"项目经理","otherChildren":[],"property":[{"isHide":false,"name":"IsReadOnly","value":"true"}],"sort":16},{"action":[],"authority":[],"children":[],"code":"businessCode","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"业务约定书编号","otherChildren":[],"property":[{"isHide":false,"name":"IsReadOnly","value":"true"}],"sort":17},{"action":[],"authority":[],"children":[],"code":"projectId","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"项目id","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":16},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"EntityCode","value":"Project"}],"select":"ProjectId","sort":7},{"action":[],"authority":[],"children":[],"code":"reviewState","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"复核等级","otherChildren":[],"property":[],"sort":6},{"action":[],"authority":[],"children":[],"code":"archivePath","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"归档路径","otherChildren":[],"property":[],"sort":2},{"action":[],"authority":[],"children":[],"code":"reviewStateAll","control":"Hidden","dataPermission":[],"isReference":false,"name":"ReviewStateAll","otherChildren":[],"property":[],"sort":1}],"code":"columnGroup","control":"ColumnGroup","dataPermission":[],"isReference":false,"name":"列集合","otherChildren":[],"property":[{"isHide":false,"name":"DetailColumns","value":"2"}],"sort":0}],"code":"archiveInfo","control":"FieldSet","dataPermission":[],"isReference":false,"name":"归档信息","otherChildren":[],"property":[],"sort":4},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":342930}],"sort":0}],"code":"approvalTrajectoryFieldSet","control":"FieldSet","dataPermission":[],"isReference":false,"name":"审批轨迹","otherChildren":[],"property":[{"isHide":false,"name":"style:min-height","value":"100px"},{"isHide":false,"name":"IsWorkFlowHide","value":"true"},{"isHide":false,"name":"style:margin-top","value":"10px"}],"sort":12},{"action":[],"authority":[],"children":[],"code":"uuid","control":"Hidden","dataPermission":[],"isReference":false,"name":"uuid","otherChildren":[],"property":[],"sort":1000}],"code":"manuscriptItemArchivesInfoQuery","control":"FormPanel","dataPermission":[],"isReference":false,"javaScript":"this.BeforeLoad=function(){\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;隐藏意见&quot;);\n&nbsp;&nbsp;&nbsp;\n\n}\r\n \r\nthis.BeforeLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;FormPanel=this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;report&nbsp;=&nbsp;this.DownForCode('ReporFileSet').Down(&quot;[controltype='GridPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;boxs&nbsp;=&nbsp;this.DownForCode('BoxAndBookFieldSet').Down(&quot;[controltype='EditorGridPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;BeforeLoad&nbsp;底稿归档111111&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tree&nbsp;=&nbsp;this.Top().DownForCode(&quot;compositionCustomerTreeQuery&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;params.compostionCustomerId&nbsp;=&nbsp;parseInt(tree.GetSelected().id);\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;/ManuScirptItemArchive-geCompostionCustomerAndArchiveInformation-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FormPanel.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;report.SetValue(result.repostList);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boxs.SetValue(result.boxAndBookDTOList);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTableData(me,&nbsp;result.reviewOpinionsDataDTOList);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n};\nfunction&nbsp;setTableData(Top,&nbsp;data)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fenOpinionsFirstTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;FenOpinionsThreeTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;FenOpinionsTwoTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalOpinionsFirstTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalOpinionsTwoTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalOpinionsThreeTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;//分所重点问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('focusProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fenOpinionsFirstTable&nbsp;=&nbsp;Top.DownForCode('focusProblem').DownForCode('fenOpinionsFirstTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;FirstTableArray&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;//分所报告问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('reportProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FenOpinionsTwoTable&nbsp;=&nbsp;Top.DownForCode('reportProblem').DownForCode('FenOpinionsTwoTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;TwoTableArray&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;//分所底稿问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('papersProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FenOpinionsThreeTable&nbsp;=&nbsp;Top.DownForCode('papersProblem').DownForCode('FenOpinionsThreeTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ThreeTableArray&nbsp;=&nbsp;[];\n\n&nbsp;&nbsp;&nbsp;&nbsp;//总所重点问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('generalFocusProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsFirstTable&nbsp;=&nbsp;Top.DownForCode('generalFocusProblem').DownForCode('genernalOpinionsFirstTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalFirstTableArray&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;//总所报告问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('generalReportProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsTwoTable&nbsp;=&nbsp;Top.DownForCode('generalReportProblem').DownForCode('genernaOpinionsTwoTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalTwoTableArray&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;//总所底稿问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('genernalPapersProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsThreeTable&nbsp;=&nbsp;Top.DownForCode('genernalPapersProblem').DownForCode('genernaOpinionsThreeTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalThreeTableArray&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;data.length;&nbsp;i++)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data[i].manuscriptReviewState&nbsp;==&nbsp;30)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data[i].rCType&nbsp;==&nbsp;10)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FirstTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(data[i].rCType&nbsp;==&nbsp;20)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TwoTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ThreeTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data[i].rCType&nbsp;==&nbsp;10)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalFirstTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(data[i].rCType&nbsp;==&nbsp;20)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalTwoTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalThreeTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(fenOpinionsFirstTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fenOpinionsFirstTable.SetValue(FirstTableArray);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(FenOpinionsTwoTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FenOpinionsTwoTable.SetValue(TwoTableArray);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(FenOpinionsThreeTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FenOpinionsThreeTable.SetValue(ThreeTableArray);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(generalOpinionsFirstTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsFirstTable.SetValue(generalFirstTableArray);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(generalOpinionsTwoTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsTwoTable.SetValue(generalTwoTableArray);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(generalOpinionsThreeTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsThreeTable.SetValue(generalThreeTableArray);\n}\n","name":"底稿归档详情","otherChildren":[],"property":[{"isHide":false,"name":"BaseCode","value":"manuscriptItemArchivesInfo"},{"isHide":false,"name":"Name","value":"底稿归档"},{"isHide":false,"name":"IsReadOnly","value":true},{"isHide":false,"name":"Description"},{"isHide":false,"name":"FormId","value":343100},{"isHide":false,"name":"OrderBy"},{"isHide":false,"name":"IsSqlForm","value":false},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.BeforeLoad=function(){\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;隐藏意见&quot;);\n&nbsp;&nbsp;&nbsp;\n\n}\r\n \r\nthis.BeforeLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;FormPanel=this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;report&nbsp;=&nbsp;this.DownForCode('ReporFileSet').Down(&quot;[controltype='GridPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;boxs&nbsp;=&nbsp;this.DownForCode('BoxAndBookFieldSet').Down(&quot;[controltype='EditorGridPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;BeforeLoad&nbsp;底稿归档111111&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tree&nbsp;=&nbsp;this.Top().DownForCode(&quot;compositionCustomerTreeQuery&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;params.compostionCustomerId&nbsp;=&nbsp;parseInt(tree.GetSelected().id);\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;/ManuScirptItemArchive-geCompostionCustomerAndArchiveInformation-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FormPanel.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;report.SetValue(result.repostList);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boxs.SetValue(result.boxAndBookDTOList);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTableData(me,&nbsp;result.reviewOpinionsDataDTOList);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n};\nfunction&nbsp;setTableData(Top,&nbsp;data)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fenOpinionsFirstTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;FenOpinionsThreeTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;FenOpinionsTwoTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalOpinionsFirstTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalOpinionsTwoTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalOpinionsThreeTable&nbsp;=&nbsp;null;\n&nbsp;&nbsp;&nbsp;&nbsp;//分所重点问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('focusProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fenOpinionsFirstTable&nbsp;=&nbsp;Top.DownForCode('focusProblem').DownForCode('fenOpinionsFirstTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;FirstTableArray&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;//分所报告问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('reportProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FenOpinionsTwoTable&nbsp;=&nbsp;Top.DownForCode('reportProblem').DownForCode('FenOpinionsTwoTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;TwoTableArray&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;//分所底稿问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('papersProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FenOpinionsThreeTable&nbsp;=&nbsp;Top.DownForCode('papersProblem').DownForCode('FenOpinionsThreeTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ThreeTableArray&nbsp;=&nbsp;[];\n\n&nbsp;&nbsp;&nbsp;&nbsp;//总所重点问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('generalFocusProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsFirstTable&nbsp;=&nbsp;Top.DownForCode('generalFocusProblem').DownForCode('genernalOpinionsFirstTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalFirstTableArray&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;//总所报告问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('generalReportProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsTwoTable&nbsp;=&nbsp;Top.DownForCode('generalReportProblem').DownForCode('genernaOpinionsTwoTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalTwoTableArray&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;//总所底稿问题\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(Top.DownForCode('genernalPapersProblem')))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsThreeTable&nbsp;=&nbsp;Top.DownForCode('genernalPapersProblem').DownForCode('genernaOpinionsThreeTable');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;generalThreeTableArray&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;data.length;&nbsp;i++)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data[i].manuscriptReviewState&nbsp;==&nbsp;30)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data[i].rCType&nbsp;==&nbsp;10)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FirstTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(data[i].rCType&nbsp;==&nbsp;20)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TwoTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ThreeTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data[i].rCType&nbsp;==&nbsp;10)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalFirstTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(data[i].rCType&nbsp;==&nbsp;20)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalTwoTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalThreeTableArray.push(data[i]);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(fenOpinionsFirstTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fenOpinionsFirstTable.SetValue(FirstTableArray);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(FenOpinionsTwoTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FenOpinionsTwoTable.SetValue(TwoTableArray);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(FenOpinionsThreeTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FenOpinionsThreeTable.SetValue(ThreeTableArray);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(generalOpinionsFirstTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsFirstTable.SetValue(generalFirstTableArray);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(generalOpinionsTwoTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsTwoTable.SetValue(generalTwoTableArray);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(generalOpinionsThreeTable))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generalOpinionsThreeTable.SetValue(generalThreeTableArray);\n}\n\r\n \r\n};"},{"isHide":false,"name":"EntityType","value":"ManuScirptItemArchive"},{"isHide":false,"name":"HelpPrompt","value":""},{"isHide":false,"name":"IsShowRefresh","value":"false"}],"sort":0}
2020-04-09 23:20:46