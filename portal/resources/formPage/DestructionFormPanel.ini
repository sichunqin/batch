{
	"action":[
		{
			"code":"ShowDetail",
			"name":"查看",
			"property":[
				
			],
			"sort":0
		},
		{
			"code":"Export",
			"container":"GridPanel",
			"name":"导出",
			"property":[
				
			],
			"sort":1
		}
	],
	"authority":[
		
	],
	"children":[
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"id",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"主键",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Length",
							"value":16
						},
						{
							"isHide":false,
							"name":"Required",
							"value":true
						},
						{
							"isHide":false,
							"name":"IsReadOnly",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsTransient",
							"value":false
						}
					],
					"select":"Id",
					"sort":14
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"deptId",
					"control":"GridCombobox",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"摧毁人所在部门",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Length",
							"value":50
						},
						{
							"isHide":false,
							"name":"Required",
							"value":true
						},
						{
							"isHide":false,
							"name":"IsTransient",
							"value":false
						},
						{
							"isHide":false,
							"name":"EntityConfig",
							"value":"[Entity(Department|Code(Code)#Name(Name))]"
						},
						{
							"isHide":false,
							"name":"EntityCode",
							"value":"Department"
						},
						{
							"isHide":false,
							"name":"IsReadOnly",
							"value":"true"
						}
					],
					"select":"deptId[Entity(Department|Code(Code)#Name(Name))]",
					"sort":17
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"userId",
					"control":"GridCombobox",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"摧毁人",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Length",
							"value":50
						},
						{
							"isHide":false,
							"name":"Required",
							"value":true
						},
						{
							"isHide":false,
							"name":"IsTransient",
							"value":false
						},
						{
							"isHide":false,
							"name":"EntityConfig",
							"value":"[Entity(User|Code(Code)#Name(Name))]"
						},
						{
							"isHide":false,
							"name":"EntityCode",
							"value":"User"
						},
						{
							"isHide":false,
							"name":"IsReadOnly",
							"value":"true"
						}
					],
					"select":"userId[Entity(User|Code(Code)#Name(Name))]",
					"sort":16
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"timestamp",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"时间戳",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Length",
							"value":8
						},
						{
							"isHide":false,
							"name":"Required",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsReadOnly",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsTransient",
							"value":false
						}
					],
					"select":"Timestamp",
					"sort":18
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"docState",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"运行状态",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Length",
							"value":16
						},
						{
							"isHide":false,
							"name":"Required",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsReadOnly",
							"value":true
						},
						{
							"isHide":false,
							"name":"IsTransient",
							"value":false
						},
						{
							"isHide":false,
							"name":"EnumType",
							"value":"DocStatusEnum"
						},
						{
							"isHide":false,
							"name":"EntityConfig",
							"value":"[Enum(DocStatusEnum)]"
						}
					],
					"select":"DocState[Enum(DocStatusEnum)]",
					"sort":6
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"taskName",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"节点名称",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Length",
							"value":1000
						},
						{
							"isHide":false,
							"name":"Required",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsReadOnly",
							"value":true
						},
						{
							"isHide":false,
							"name":"IsTransient",
							"value":false
						}
					],
					"select":"TaskName",
					"sort":5
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"submitById",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"发起人",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Length",
							"value":16
						},
						{
							"isHide":false,
							"name":"Required",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsReadOnly",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsTransient",
							"value":false
						},
						{
							"isHide":false,
							"name":"EntityConfig",
							"value":"[Entity(User|Code(Code)#Name(Name))]"
						},
						{
							"isHide":false,
							"name":"EntityCode",
							"value":"User"
						}
					],
					"select":"SubmitById[Entity(User|Code(Code)#Name(Name))]",
					"sort":4
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"approvedById",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"审批人",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Length",
							"value":16
						},
						{
							"isHide":false,
							"name":"Required",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsReadOnly",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsTransient",
							"value":false
						},
						{
							"isHide":false,
							"name":"EntityConfig",
							"value":"[Entity(User|Code(Code)#Name(Name))]"
						},
						{
							"isHide":false,
							"name":"EntityCode",
							"value":"User"
						}
					],
					"select":"ApprovedById[Entity(User|Code(Code)#Name(Name))]",
					"sort":3
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"submitOn",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"发起时间",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Length",
							"value":23
						},
						{
							"isHide":false,
							"name":"Required",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsReadOnly",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsTransient",
							"value":false
						}
					],
					"select":"SubmitOn",
					"sort":2
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"approvedOn",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"审批时间",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Length",
							"value":23
						},
						{
							"isHide":false,
							"name":"Required",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsReadOnly",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsTransient",
							"value":false
						}
					],
					"select":"ApprovedOn",
					"sort":1
				}
			],
			"code":"columnGroup",
			"control":"ColumnGroup",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"列集合",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":0
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"dataPermission":[
								
							],
							"isReference":true,
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":true,
									"name":"referenceFormId",
									"value":342845
								},
								{
									"isHide":false,
									"name":"MainParams",
									"value":"[{param:'destructionRecordsId',fieldId:'id'}]"
								},
								{
									"isHide":false,
									"name":"MustParam",
									"value":"query_destructionRecordsId"
								}
							],
							"sort":0
						}
					],
					"code":"columnGroup2324",
					"control":"ColumnGroup",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"集合测试",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"DetailColumns",
							"value":"1"
						}
					],
					"sort":12
				}
			],
			"code":"fristFieldSet",
			"control":"FieldSet",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"销毁照片",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":10
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"content",
					"control":"TextArea",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"销毁理由",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"Length",
							"value":1000
						},
						{
							"isHide":false,
							"name":"Required",
							"value":true
						},
						{
							"isHide":false,
							"name":"IsReadOnly",
							"value":false
						},
						{
							"isHide":false,
							"name":"IsTransient",
							"value":false
						},
						{
							"isHide":false,
							"name":"style:margin-left",
							"value":"30px"
						}
					],
					"select":"content",
					"sort":15
				}
			],
			"code":"fieldSetSecond",
			"control":"FieldSet",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"销毁事由",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":9
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"dataPermission":[
								
							],
							"isReference":true,
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":true,
									"name":"referenceFormId",
									"value":342848
								},
								{
									"isHide":false,
									"name":"MainParams",
									"value":"[{param:'destructionRecordsId',fieldId:'id'}]"
								},
								{
									"isHide":false,
									"name":"MustParam",
									"value":"query_destructionRecordsId"
								}
							],
							"sort":0
						}
					],
					"code":"destroyProjects",
					"control":"Tab",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"销毁项目Tab",
					"otherChildren":[
						
					],
					"property":[
						
					],
					"sort":7
				}
			],
			"code":"fieldSetFoor",
			"control":"FieldSet",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"销毁详情",
			"otherChildren":[
				
			],
			"property":[
				{
					"isHide":false,
					"name":"height",
					"value":"400"
				}
			],
			"sort":11
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"uuid",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"uuid",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":1000
		}
	],
	"code":"destructionFormPanel",
	"control":"FormPanel",
	"dataPermission":[
		
	],
	"isReference":false,
	"javaScript":"
this.AfterLoad = function () {
    console.log("afet");
   
    var opener = this.Top().Opener;
    var panel = opener.Top();
    var destructionQuery = panel.DownForCode("StayDestructionQuery");
   if(Framework.IsNotNullOrEmpty(destructionQuery )){
    this.DownForCode("userId").SetValue({id:AppContext.Profile.id,code:AppContext.Profile.name,name:AppContext.Profile.name})
    this.DownForCode("deptId").SetValue({id:AppContext.Profile.deptId,code:AppContext.Profile.deptName,name:AppContext.Profile.deptName})
    var array = destructionQuery.GetSelections();
    var destructionArray =[];
    for (i = 0; i < array.length; i++) { 
       var  destruction = {};
       destruction.manuScirptItemArchiveId = array[i].mid;
       destruction.manuScirptItemArchiveCode = array[i].code;
       destruction.projectName = array[i].compostionName;
       destruction.boxNumber = array[i].boxNumber;
       destruction.bookNumber =array[i].bookNumber;
       destructionArray.push(destruction);
    } 
    this.DownForCode("DestructionConposionCustomer").PushAllRow(destructionArray)

 }
};
// this.BeforeWorkFlowSubmit = function () {
//     console.log("BeforeWorkFlowSubmit ");
//     var opener = this.Opener;
//     var panel = opener.Top();
//     var destructionQuery = panel.DownForCode("StayDestructionQuery");
//     var array = destructionQuery.GetSelections();
//     var destructionArray = [];
//     for (i = 0; i < array.length; i++) {
//         destructionArray.push(array[i].compostionCustomerId);
//     }
//     var attachmentIdAaary = [];
//     var Attachmentslist = this.DownForCode("destructionRecordsAttachments").GetValue();
//     for (i = 0; i < Attachmentslist.length; i++) {
//         attachmentIdAaary.push(Attachmentslist[i].attachmentId);
//     }
//     var form = this.Top();
//     var obj = {}
//     obj.content = this.DownForCode("content").GetValue();
//     obj.compostionCustomerIdList = destructionArray;
//     obj.attachmentIdList = attachmentIdAaary;
//     var params = {}
//     params.dto = JSON.stringify(obj);
//
//     Framework.AjaxRequest(me, "ManuScirptItemArchive-saveDestruction.do", 'get', params, true, function (result) {
//             form.Close();
//             destructionQuery.Load();
//         },
//         function (result) {
//
//         });
//     //return false;
// }

",
	"name":"申请销毁",
	"otherChildren":[
		
	],
	"property":[
		{
			"isHide":false,
			"name":"BaseCode",
			"value":"destructionFormPanel"
		},
		{
			"isHide":false,
			"name":"Name",
			"value":"申请销毁"
		},
		{
			"isHide":false,
			"name":"IsReadOnly",
			"value":false
		},
		{
			"isHide":false,
			"name":"Description"
		},
		{
			"isHide":false,
			"name":"FormId",
			"value":342844
		},
		{
			"isHide":false,
			"name":"OrderBy"
		},
		{
			"isHide":false,
			"name":"IsSqlForm",
			"value":false
		},
		{
			"isHide":false,
			"name":"JavaScript",
			"value":"var registerJavaScript = function () {

 


this.AfterLoad = function () {
    console.log("afet");
   
    var opener = this.Top().Opener;
    var panel = opener.Top();
    var destructionQuery = panel.DownForCode("StayDestructionQuery");
   if(Framework.IsNotNullOrEmpty(destructionQuery )){
    this.DownForCode("userId").SetValue({id:AppContext.Profile.id,code:AppContext.Profile.name,name:AppContext.Profile.name})
    this.DownForCode("deptId").SetValue({id:AppContext.Profile.deptId,code:AppContext.Profile.deptName,name:AppContext.Profile.deptName})
    var array = destructionQuery.GetSelections();
    var destructionArray =[];
    for (i = 0; i < array.length; i++) { 
       var  destruction = {};
       destruction.manuScirptItemArchiveId = array[i].mid;
       destruction.manuScirptItemArchiveCode = array[i].code;
       destruction.projectName = array[i].compostionName;
       destruction.boxNumber = array[i].boxNumber;
       destruction.bookNumber =array[i].bookNumber;
       destructionArray.push(destruction);
    } 
    this.DownForCode("DestructionConposionCustomer").PushAllRow(destructionArray)

 }
};
// this.BeforeWorkFlowSubmit = function () {
//     console.log("BeforeWorkFlowSubmit ");
//     var opener = this.Opener;
//     var panel = opener.Top();
//     var destructionQuery = panel.DownForCode("StayDestructionQuery");
//     var array = destructionQuery.GetSelections();
//     var destructionArray = [];
//     for (i = 0; i < array.length; i++) {
//         destructionArray.push(array[i].compostionCustomerId);
//     }
//     var attachmentIdAaary = [];
//     var Attachmentslist = this.DownForCode("destructionRecordsAttachments").GetValue();
//     for (i = 0; i < Attachmentslist.length; i++) {
//         attachmentIdAaary.push(Attachmentslist[i].attachmentId);
//     }
//     var form = this.Top();
//     var obj = {}
//     obj.content = this.DownForCode("content").GetValue();
//     obj.compostionCustomerIdList = destructionArray;
//     obj.attachmentIdList = attachmentIdAaary;
//     var params = {}
//     params.dto = JSON.stringify(obj);
//
//     Framework.AjaxRequest(me, "ManuScirptItemArchive-saveDestruction.do", 'get', params, true, function (result) {
//             form.Close();
//             destructionQuery.Load();
//         },
//         function (result) {
//
//         });
//     //return false;
// }



 

};"
		},
		{
			"isHide":false,
			"name":"EntityType",
			"value":"DestructionRecords"
		}
	],
	"sort":0
}
{"action":[{"code":"ShowDetail","name":"查看","property":[],"sort":0},{"code":"Export","container":"GridPanel","name":"导出","property":[],"sort":1}],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"code":"id","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"主键","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":16},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"Id","sort":14},{"action":[],"authority":[],"children":[],"code":"deptId","control":"GridCombobox","dataPermission":[],"isReference":false,"javaScript":"","name":"摧毁人所在部门","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":50},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"EntityConfig","value":"[Entity(Department|Code(Code)#Name(Name))]"},{"isHide":false,"name":"EntityCode","value":"Department"},{"isHide":false,"name":"IsReadOnly","value":"true"}],"select":"deptId[Entity(Department|Code(Code)#Name(Name))]","sort":17},{"action":[],"authority":[],"children":[],"code":"userId","control":"GridCombobox","dataPermission":[],"isReference":false,"javaScript":"","name":"摧毁人","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":50},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"EntityConfig","value":"[Entity(User|Code(Code)#Name(Name))]"},{"isHide":false,"name":"EntityCode","value":"User"},{"isHide":false,"name":"IsReadOnly","value":"true"}],"select":"userId[Entity(User|Code(Code)#Name(Name))]","sort":16},{"action":[],"authority":[],"children":[],"code":"timestamp","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"时间戳","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":8},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"Timestamp","sort":18},{"action":[],"authority":[],"children":[],"code":"docState","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"运行状态","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":16},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":true},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"EnumType","value":"DocStatusEnum"},{"isHide":false,"name":"EntityConfig","value":"[Enum(DocStatusEnum)]"}],"select":"DocState[Enum(DocStatusEnum)]","sort":6},{"action":[],"authority":[],"children":[],"code":"taskName","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"节点名称","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":1000},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":true},{"isHide":false,"name":"IsTransient","value":false}],"select":"TaskName","sort":5},{"action":[],"authority":[],"children":[],"code":"submitById","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"发起人","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":16},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"EntityConfig","value":"[Entity(User|Code(Code)#Name(Name))]"},{"isHide":false,"name":"EntityCode","value":"User"}],"select":"SubmitById[Entity(User|Code(Code)#Name(Name))]","sort":4},{"action":[],"authority":[],"children":[],"code":"approvedById","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"审批人","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":16},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"EntityConfig","value":"[Entity(User|Code(Code)#Name(Name))]"},{"isHide":false,"name":"EntityCode","value":"User"}],"select":"ApprovedById[Entity(User|Code(Code)#Name(Name))]","sort":3},{"action":[],"authority":[],"children":[],"code":"submitOn","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"发起时间","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":23},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"SubmitOn","sort":2},{"action":[],"authority":[],"children":[],"code":"approvedOn","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"审批时间","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":23},{"isHide":false,"name":"Required","value":false},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false}],"select":"ApprovedOn","sort":1}],"code":"columnGroup","control":"ColumnGroup","dataPermission":[],"isReference":false,"javaScript":"","name":"列集合","otherChildren":[],"property":[],"sort":0},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":true,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":342845},{"isHide":false,"name":"MainParams","value":"[{param:'destructionRecordsId',fieldId:'id'}]"},{"isHide":false,"name":"MustParam","value":"query_destructionRecordsId"}],"sort":0}],"code":"columnGroup2324","control":"ColumnGroup","dataPermission":[],"isReference":false,"javaScript":"","name":"集合测试","otherChildren":[],"property":[{"isHide":false,"name":"DetailColumns","value":"1"}],"sort":12}],"code":"fristFieldSet","control":"FieldSet","dataPermission":[],"isReference":false,"javaScript":"","name":"销毁照片","otherChildren":[],"property":[],"sort":10},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"code":"content","control":"TextArea","dataPermission":[],"isReference":false,"javaScript":"","name":"销毁理由","otherChildren":[],"property":[{"isHide":false,"name":"Length","value":1000},{"isHide":false,"name":"Required","value":true},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"IsTransient","value":false},{"isHide":false,"name":"style:margin-left","value":"30px"}],"select":"content","sort":15}],"code":"fieldSetSecond","control":"FieldSet","dataPermission":[],"isReference":false,"javaScript":"","name":"销毁事由","otherChildren":[],"property":[],"sort":9},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":true,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":342848},{"isHide":false,"name":"MainParams","value":"[{param:'destructionRecordsId',fieldId:'id'}]"},{"isHide":false,"name":"MustParam","value":"query_destructionRecordsId"}],"sort":0}],"code":"destroyProjects","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"","name":"销毁项目Tab","otherChildren":[],"property":[],"sort":7}],"code":"fieldSetFoor","control":"FieldSet","dataPermission":[],"isReference":false,"javaScript":"","name":"销毁详情","otherChildren":[],"property":[{"isHide":false,"name":"height","value":"400"}],"sort":11},{"action":[],"authority":[],"children":[],"code":"uuid","control":"Hidden","dataPermission":[],"isReference":false,"name":"uuid","otherChildren":[],"property":[],"sort":1000}],"code":"destructionFormPanel","control":"FormPanel","dataPermission":[],"isReference":false,"javaScript":"\nthis.AfterLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;afet&quot;);\n&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;opener&nbsp;=&nbsp;this.Top().Opener;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;panel&nbsp;=&nbsp;opener.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;destructionQuery&nbsp;=&nbsp;panel.DownForCode(&quot;StayDestructionQuery&quot;);\n&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(destructionQuery&nbsp;)){\n&nbsp;&nbsp;&nbsp;&nbsp;this.DownForCode(&quot;userId&quot;).SetValue({id:AppContext.Profile.id,code:AppContext.Profile.name,name:AppContext.Profile.name})\n&nbsp;&nbsp;&nbsp;&nbsp;this.DownForCode(&quot;deptId&quot;).SetValue({id:AppContext.Profile.deptId,code:AppContext.Profile.deptName,name:AppContext.Profile.deptName})\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;array&nbsp;=&nbsp;destructionQuery.GetSelections();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;destructionArray&nbsp;=[];\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;array.length;&nbsp;i++)&nbsp;{&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;&nbsp;destruction&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruction.manuScirptItemArchiveId&nbsp;=&nbsp;array[i].mid;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruction.manuScirptItemArchiveCode&nbsp;=&nbsp;array[i].code;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruction.projectName&nbsp;=&nbsp;array[i].compostionName;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruction.boxNumber&nbsp;=&nbsp;array[i].boxNumber;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruction.bookNumber&nbsp;=array[i].bookNumber;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destructionArray.push(destruction);\n&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;this.DownForCode(&quot;DestructionConposionCustomer&quot;).PushAllRow(destructionArray)\n\n&nbsp;}\n};\n//&nbsp;this.BeforeWorkFlowSubmit&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;BeforeWorkFlowSubmit&nbsp;&quot;);\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;opener&nbsp;=&nbsp;this.Opener;\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;panel&nbsp;=&nbsp;opener.Top();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;destructionQuery&nbsp;=&nbsp;panel.DownForCode(&quot;StayDestructionQuery&quot;);\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;array&nbsp;=&nbsp;destructionQuery.GetSelections();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;destructionArray&nbsp;=&nbsp;[];\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;array.length;&nbsp;i++)&nbsp;{\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destructionArray.push(array[i].compostionCustomerId);\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;attachmentIdAaary&nbsp;=&nbsp;[];\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;Attachmentslist&nbsp;=&nbsp;this.DownForCode(&quot;destructionRecordsAttachments&quot;).GetValue();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;Attachmentslist.length;&nbsp;i++)&nbsp;{\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attachmentIdAaary.push(Attachmentslist[i].attachmentId);\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;obj&nbsp;=&nbsp;{}\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.content&nbsp;=&nbsp;this.DownForCode(&quot;content&quot;).GetValue();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.compostionCustomerIdList&nbsp;=&nbsp;destructionArray;\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.attachmentIdList&nbsp;=&nbsp;attachmentIdAaary;\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{}\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params.dto&nbsp;=&nbsp;JSON.stringify(obj);\n//\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;ManuScirptItemArchive-saveDestruction.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.Close();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destructionQuery.Load();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;(result)&nbsp;{\n//\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//return&nbsp;false;\n//&nbsp;}\n\n","name":"申请销毁","otherChildren":[],"property":[{"isHide":false,"name":"BaseCode","value":"destructionFormPanel"},{"isHide":false,"name":"Name","value":"申请销毁"},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"Description"},{"isHide":false,"name":"FormId","value":342844},{"isHide":false,"name":"OrderBy"},{"isHide":false,"name":"IsSqlForm","value":false},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\n\nthis.AfterLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;afet&quot;);\n&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;opener&nbsp;=&nbsp;this.Top().Opener;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;panel&nbsp;=&nbsp;opener.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;destructionQuery&nbsp;=&nbsp;panel.DownForCode(&quot;StayDestructionQuery&quot;);\n&nbsp;&nbsp;&nbsp;if(Framework.IsNotNullOrEmpty(destructionQuery&nbsp;)){\n&nbsp;&nbsp;&nbsp;&nbsp;this.DownForCode(&quot;userId&quot;).SetValue({id:AppContext.Profile.id,code:AppContext.Profile.name,name:AppContext.Profile.name})\n&nbsp;&nbsp;&nbsp;&nbsp;this.DownForCode(&quot;deptId&quot;).SetValue({id:AppContext.Profile.deptId,code:AppContext.Profile.deptName,name:AppContext.Profile.deptName})\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;array&nbsp;=&nbsp;destructionQuery.GetSelections();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;destructionArray&nbsp;=[];\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;array.length;&nbsp;i++)&nbsp;{&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;&nbsp;destruction&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruction.manuScirptItemArchiveId&nbsp;=&nbsp;array[i].mid;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruction.manuScirptItemArchiveCode&nbsp;=&nbsp;array[i].code;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruction.projectName&nbsp;=&nbsp;array[i].compostionName;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruction.boxNumber&nbsp;=&nbsp;array[i].boxNumber;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruction.bookNumber&nbsp;=array[i].bookNumber;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destructionArray.push(destruction);\n&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;this.DownForCode(&quot;DestructionConposionCustomer&quot;).PushAllRow(destructionArray)\n\n&nbsp;}\n};\n//&nbsp;this.BeforeWorkFlowSubmit&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;BeforeWorkFlowSubmit&nbsp;&quot;);\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;opener&nbsp;=&nbsp;this.Opener;\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;panel&nbsp;=&nbsp;opener.Top();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;destructionQuery&nbsp;=&nbsp;panel.DownForCode(&quot;StayDestructionQuery&quot;);\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;array&nbsp;=&nbsp;destructionQuery.GetSelections();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;destructionArray&nbsp;=&nbsp;[];\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;array.length;&nbsp;i++)&nbsp;{\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destructionArray.push(array[i].compostionCustomerId);\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;attachmentIdAaary&nbsp;=&nbsp;[];\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;Attachmentslist&nbsp;=&nbsp;this.DownForCode(&quot;destructionRecordsAttachments&quot;).GetValue();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;Attachmentslist.length;&nbsp;i++)&nbsp;{\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attachmentIdAaary.push(Attachmentslist[i].attachmentId);\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;obj&nbsp;=&nbsp;{}\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.content&nbsp;=&nbsp;this.DownForCode(&quot;content&quot;).GetValue();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.compostionCustomerIdList&nbsp;=&nbsp;destructionArray;\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.attachmentIdList&nbsp;=&nbsp;attachmentIdAaary;\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{}\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params.dto&nbsp;=&nbsp;JSON.stringify(obj);\n//\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;ManuScirptItemArchive-saveDestruction.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.Close();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destructionQuery.Load();\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;(result)&nbsp;{\n//\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\n//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//return&nbsp;false;\n//&nbsp;}\n\n\r\n \r\n};"},{"isHide":false,"name":"EntityType","value":"DestructionRecords"}],"sort":0}
2020-03-09 16:25:47