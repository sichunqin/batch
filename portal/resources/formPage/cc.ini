{
	"action":[
		
	],
	"authority":[
		
	],
	"children":[
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"dataPermission":[
								
							],
							"isReference":false,
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":true,
									"name":"referenceFormId",
									"value":53857
								}
							],
							"sort":0
						}
					],
					"code":"projectTab",
					"control":"Tab",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"this.OnSelect = function () {
    console.log('主项目信息');
    var me = this;
    var form = me.DownForCode('project');
    if (Framework.IsNullOrEmpty(form)) return;
    if (Framework.IsNullOrEmpty(form.Data)) {
        var projectId = form.DownForCode("id");
        form.Data = {};
        form.Data.id = projectId.GetValue();
    }
    form.Load(form.Data);
}",
					"name":"主项目信息",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"ClassGroup",
							"value":"CardA"
						},
						{
							"isHide":false,
							"name":"TitleLeftLine",
							"value":"true"
						},
						{
							"isHide":false,
							"name":"style:padding-top",
							"value":"2px"
						},
						{
							"isHide":false,
							"name":"JavaScript",
							"value":"var registerJavaScript = function () {

 

this.OnSelect = function () {
    console.log('主项目信息');
    var me = this;
    var form = me.DownForCode('project');
    if (Framework.IsNullOrEmpty(form)) return;
    if (Framework.IsNullOrEmpty(form.Data)) {
        var projectId = form.DownForCode("id");
        form.Data = {};
        form.Data.id = projectId.GetValue();
    }
    form.Load(form.Data);
}

 

};"
						}
					],
					"sort":29
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"dataPermission":[
								
							],
							"isReference":false,
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":true,
									"name":"referenceFormId",
									"value":16986
								}
							],
							"sort":0
						}
					],
					"code":"projectFrame",
					"control":"Tab",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"this.OnSelect = function () {
    console.log("项目架构点击")
    var me = this;
    var panel = me.TopForCode("projectManage");
    var projectForm = panel.DownForCode("projectPage");
    if (Framework.IsNullOrEmpty(projectForm)) return;

    var project = projectForm.DownForCode("id");
    if (Framework.IsNullOrEmpty(project)) return;

    var projectId = project.GetValue();
    if (Framework.IsNullOrEmpty(projectId)) return;

    var isApproval = false;
    var projectDoc = projectForm.DownForCode("docState");
    if (projectDoc && projectDoc.GetSubmitValue() == 20)
        isApproval = true;//是审批中的，审批人可以点项目架构的任何一个节点

    var tree = me.Down("[basecode='compositionCustomerTree']").First;
    if (Framework.IsNullOrEmpty(tree)) return;
    var isAdd = panel.IsAdd ? true : false;
    tree.ProjectId = projectId;
    tree.params = JSON.stringify([
        {param: 'projectId', value: projectId},
        {param: 'isAdd', value: isAdd},
        {param: 'isApproval', value: isApproval}]);
    tree.Load();
}",
					"name":"项目架构",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"IsLazy",
							"value":"true"
						},
						{
							"isHide":false,
							"name":"style:padding",
							"value":"0"
						},
						{
							"isHide":false,
							"name":"JavaScript",
							"value":"var registerJavaScript = function () {

 

this.OnSelect = function () {
    console.log("项目架构点击")
    var me = this;
    var panel = me.TopForCode("projectManage");
    var projectForm = panel.DownForCode("projectPage");
    if (Framework.IsNullOrEmpty(projectForm)) return;

    var project = projectForm.DownForCode("id");
    if (Framework.IsNullOrEmpty(project)) return;

    var projectId = project.GetValue();
    if (Framework.IsNullOrEmpty(projectId)) return;

    var isApproval = false;
    var projectDoc = projectForm.DownForCode("docState");
    if (projectDoc && projectDoc.GetSubmitValue() == 20)
        isApproval = true;//是审批中的，审批人可以点项目架构的任何一个节点

    var tree = me.Down("[basecode='compositionCustomerTree']").First;
    if (Framework.IsNullOrEmpty(tree)) return;
    var isAdd = panel.IsAdd ? true : false;
    tree.ProjectId = projectId;
    tree.params = JSON.stringify([
        {param: 'projectId', value: projectId},
        {param: 'isAdd', value: isAdd},
        {param: 'isApproval', value: isApproval}]);
    tree.Load();
}

 

};"
						}
					],
					"sort":33
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										
									],
									"dataPermission":[
										
									],
									"isReference":false,
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":true,
											"name":"referenceFormId",
											"value":20093
										}
									],
									"sort":0
								}
							],
							"code":"memberFieldSet",
							"control":"FieldSet",
							"dataPermission":[
								
							],
							"isReference":false,
							"name":"项目组成员",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"style:min-height",
									"value":"55%"
								},
								{
									"isHide":false,
									"name":"IsNtitle",
									"value":"true"
								},
								{
									"isHide":false,
									"name":"ClassGroup",
									"value":"CardB"
								}
							],
							"sort":9
						},
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										
									],
									"dataPermission":[
										
									],
									"isReference":false,
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":true,
											"name":"referenceFormId",
											"value":20142
										}
									],
									"sort":0
								}
							],
							"code":"independenceFieldSet",
							"control":"FieldSet",
							"dataPermission":[
								
							],
							"isReference":false,
							"name":"可能影响项目组成员独立性的情况",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"style:min-height",
									"value":"30%"
								}
							],
							"sort":10
						}
					],
					"code":"projectMember",
					"control":"Tab",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"this.OnSelect = function () {
    console.log("项目成员");
    var me = this;
    var model = me.Top();
    if (Framework.IsNullOrEmpty(model)) return;
    var docState = model.DownForCode("docState").GetSubmitValue();
    var apply = model.DownForCode("apply").GetValue();
    var projectMembers = me.DownForCode('projectMemberss');
    if (docState > 11) {
        var isVisible = apply == 1 || docState == 100
        SetLinkButtonVisible(me, !isVisible);
        projectMembers.SetReadOnly(!isVisible);
    }

    var projectManagerId = model.DownForCode("projectManagerId");
    if (projectManagerId) {//小项目经理进来没有操作权限
        var managerValue = projectManagerId.GetSubmitValue();
        if (managerValue && managerValue != AppContext.Profile.id) {
            SetLinkButtonVisible(me, true);
            projectMembers.SetReadOnly(true);
        }
    }

    projectMembers.Load();
    var projectId = model.DownForCode("id").GetValue();
    var param = {};
    param.projectId = projectId;
    Framework.AjaxRequest(me, "ProjectIndependenceMember-hideProjectIndependenceMember.do", 'get', param, false, function (result) {
        me.DownForCode('independenceFieldSet').SetVisible(result);
        if (!result) {
            //显示的时候才加载
            var projectIndependenceMembers = me.DownForCode('projectIndependenceMembers');
            projectIndependenceMembers.SetBusinessTitle(projectIndependenceMembers.displayname);
            projectIndependenceMembers.Load();
        }
    })
}

function SetLinkButtonVisible(me, isVisible) {
    var linkButtonArray = me.Down("[controltype='LinkButton']");
    Framework.ForEach(linkButtonArray, function (item) {
        if (item && item.SetVisible)
            item.SetVisible(isVisible);
    })
}",
					"name":"项目组成员",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"IsLazy",
							"value":"true"
						},
						{
							"isHide":false,
							"name":"ClassGroup",
							"value":"tableStyleA"
						},
						{
							"isHide":false,
							"name":"style:background-color",
							"value":"white"
						},
						{
							"isHide":false,
							"name":"JavaScript",
							"value":"var registerJavaScript = function () {

 

this.OnSelect = function () {
    console.log("项目成员");
    var me = this;
    var model = me.Top();
    if (Framework.IsNullOrEmpty(model)) return;
    var docState = model.DownForCode("docState").GetSubmitValue();
    var apply = model.DownForCode("apply").GetValue();
    var projectMembers = me.DownForCode('projectMemberss');
    if (docState > 11) {
        var isVisible = apply == 1 || docState == 100
        SetLinkButtonVisible(me, !isVisible);
        projectMembers.SetReadOnly(!isVisible);
    }

    var projectManagerId = model.DownForCode("projectManagerId");
    if (projectManagerId) {//小项目经理进来没有操作权限
        var managerValue = projectManagerId.GetSubmitValue();
        if (managerValue && managerValue != AppContext.Profile.id) {
            SetLinkButtonVisible(me, true);
            projectMembers.SetReadOnly(true);
        }
    }

    projectMembers.Load();
    var projectId = model.DownForCode("id").GetValue();
    var param = {};
    param.projectId = projectId;
    Framework.AjaxRequest(me, "ProjectIndependenceMember-hideProjectIndependenceMember.do", 'get', param, false, function (result) {
        me.DownForCode('independenceFieldSet').SetVisible(result);
        if (!result) {
            //显示的时候才加载
            var projectIndependenceMembers = me.DownForCode('projectIndependenceMembers');
            projectIndependenceMembers.SetBusinessTitle(projectIndependenceMembers.displayname);
            projectIndependenceMembers.Load();
        }
    })
}

function SetLinkButtonVisible(me, isVisible) {
    var linkButtonArray = me.Down("[controltype='LinkButton']");
    Framework.ForEach(linkButtonArray, function (item) {
        if (item && item.SetVisible)
            item.SetVisible(isVisible);
    })
}

 

};"
						}
					],
					"sort":31
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										{
											"action":[
												
											],
											"authority":[
												
											],
											"children":[
												
											],
											"dataPermission":[
												
											],
											"isReference":false,
											"otherChildren":[
												
											],
											"property":[
												{
													"isHide":true,
													"name":"referenceFormId",
													"value":16232
												}
											],
											"sort":0
										}
									],
									"code":"businessKeepTab",
									"control":"Tab",
									"dataPermission":[
										
									],
									"isReference":false,
									"javaScript":"
this.OnSelect = function () {
    var memberTab = this.Down("[controltype='FormPanel']").First;
    var me = this;
    var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;
    memberTab.SetBusinessTitle(this.displayname);

    var model = me.Top();
    if (!model) return;
    var projectForm = model.Down("[basecode='projectPage']").First;
    if (!projectForm) return;

    var projectId = projectForm.DownForCode("id").GetValue();
    if (Framework.IsNullOrEmpty(projectId)) return;
    var projectFrame = me.Down("[basecode='maintain12']").First;
    var params = {};
    params.projectId = projectId;
    params.formId = projectFrame.formid;

    Framework.AjaxRequest(me, "BusinessEvaluation-getIdByProjectId-Query.do", 'get', params, true, function (result) {
        projectFrame.SetValue(result);
    });
    
};",
									"name":"        业务保持评价表",
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":false,
											"name":"JavaScript",
											"value":"var registerJavaScript = function () {

 


this.OnSelect = function () {
    var memberTab = this.Down("[controltype='FormPanel']").First;
    var me = this;
    var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;
    memberTab.SetBusinessTitle(this.displayname);

    var model = me.Top();
    if (!model) return;
    var projectForm = model.Down("[basecode='projectPage']").First;
    if (!projectForm) return;

    var projectId = projectForm.DownForCode("id").GetValue();
    if (Framework.IsNullOrEmpty(projectId)) return;
    var projectFrame = me.Down("[basecode='maintain12']").First;
    var params = {};
    params.projectId = projectId;
    params.formId = projectFrame.formid;

    Framework.AjaxRequest(me, "BusinessEvaluation-getIdByProjectId-Query.do", 'get', params, true, function (result) {
        projectFrame.SetValue(result);
    });
    
};

 

};"
										}
									],
									"sort":7
								},
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										{
											"action":[
												
											],
											"authority":[
												
											],
											"children":[
												
											],
											"dataPermission":[
												
											],
											"isReference":false,
											"otherChildren":[
												
											],
											"property":[
												{
													"isHide":true,
													"name":"referenceFormId",
													"value":53
												}
											],
											"sort":0
										}
									],
									"code":"businessUndertakeTab",
									"control":"Tab",
									"dataPermission":[
										
									],
									"isReference":false,
									"javaScript":"
this.OnSelect = function () {
    var me = this;
    var memberTab = this.Down("[controltype='FormPanel']").First;
    memberTab .SetBusinessTitle(this.displayname);
    if (memberTab )
    {
        memberTab.SetBusinessTitle(this.displayname);
    }
    var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
    var model = me.Top();
    if (!model) return;
    var projectForm = model.Down("[basecode='projectPage']").First;
    if (!projectForm) return;

    var projectId = projectForm.DownForCode("id").GetValue();
    if (Framework.IsNullOrEmpty(projectId)) return;
    var projectFrame = me.Down("[basecode='maintain']").First;
    var params = {};
    params.projectId = projectId;
    params.formId = projectFrame.formid;

    Framework.AjaxRequest(me, "BusinessEvaluation-getIdByProjectId-Query.do", 'get', params, true, function (result) {
        projectFrame.SetValue(result);
    });
};",
									"name":"                        业务承接评价表",
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":false,
											"name":"IsLazy",
											"value":"false"
										},
										{
											"isHide":false,
											"name":"JavaScript",
											"value":"var registerJavaScript = function () {

 


this.OnSelect = function () {
    var me = this;
    var memberTab = this.Down("[controltype='FormPanel']").First;
    memberTab .SetBusinessTitle(this.displayname);
    if (memberTab )
    {
        memberTab.SetBusinessTitle(this.displayname);
    }
    var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
    var model = me.Top();
    if (!model) return;
    var projectForm = model.Down("[basecode='projectPage']").First;
    if (!projectForm) return;

    var projectId = projectForm.DownForCode("id").GetValue();
    if (Framework.IsNullOrEmpty(projectId)) return;
    var projectFrame = me.Down("[basecode='maintain']").First;
    var params = {};
    params.projectId = projectId;
    params.formId = projectFrame.formid;

    Framework.AjaxRequest(me, "BusinessEvaluation-getIdByProjectId-Query.do", 'get', params, true, function (result) {
        projectFrame.SetValue(result);
    });
};

 

};"
										}
									],
									"sort":21
								},
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										{
											"action":[
												
											],
											"authority":[
												
											],
											"children":[
												
											],
											"dataPermission":[
												
											],
											"isReference":false,
											"otherChildren":[
												
											],
											"property":[
												{
													"isHide":true,
													"name":"referenceFormId",
													"value":24667
												}
											],
											"sort":0
										}
									],
									"code":"businessHappenTab",
									"control":"Tab",
									"dataPermission":[
										
									],
									"isReference":false,
									"javaScript":"this.OnSelect = function () {
    console.log("被审计单位业务情况调查记录");
    var me = this;
var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;
    var businessHappenItem = this.DownForCode("project");
    businessHappenItem.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var params = {}
    params.projectId = id.GetValue();
    params.formId = businessHappenItem.formid;

    Framework.AjaxRequest(me, "Project-getProject-Query.do", 'get', params, true, function (result) {
        businessHappenItem.SetValue(result);
    });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};",
									"name":"被审计单位业务情况调查记录",
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":false,
											"name":"IsLazy",
											"value":"false"
										},
										{
											"isHide":false,
											"name":"JavaScript",
											"value":"var registerJavaScript = function () {

 

this.OnSelect = function () {
    console.log("被审计单位业务情况调查记录");
    var me = this;
var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;
    var businessHappenItem = this.DownForCode("project");
    businessHappenItem.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var params = {}
    params.projectId = id.GetValue();
    params.formId = businessHappenItem.formid;

    Framework.AjaxRequest(me, "Project-getProject-Query.do", 'get', params, true, function (result) {
        businessHappenItem.SetValue(result);
    });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};

 

};"
										}
									],
									"sort":22
								},
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										{
											"action":[
												
											],
											"authority":[
												
											],
											"children":[
												
											],
											"dataPermission":[
												
											],
											"isReference":false,
											"otherChildren":[
												
											],
											"property":[
												{
													"isHide":true,
													"name":"referenceFormId",
													"value":20588
												}
											],
											"sort":0
										}
									],
									"code":"businessFinanceTab",
									"control":"Tab",
									"dataPermission":[
										
									],
									"isReference":false,
									"javaScript":"this.OnSelect = function () {
    var me = this;
    console.log('33333333');
    var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;
    var prjAtt = this.DownForCode("prjAttachments");
    if(Framework.IsNullOrEmpty(prjAtt)) return;
    prjAtt.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var paramsprjAtt = {};
    paramsprjAtt.PrjId = id.GetValue();
    paramsprjAtt.flag = 20;
    paramsprjAtt.formId = prjAtt.formid;
    paramsprjAtt.engagId = null;


    var params = [];
    params.push({param: 'ProjectId', value: id.GetValue()});
    params.push({param: 'Flag', value: 20});



    prjAtt.params = JSON.stringify(params);
    prjAtt.Load();




    // Framework.AjaxRequest(me, "PrjAttachment-getPrjAttachment-Query.do", 'get', paramsprjAtt, true, function (result) {
    //     prjAtt.SetValue(result);
    // });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};
",
									"name":"被审计单位财务报表",
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":false,
											"name":"IsLazy",
											"value":"false"
										},
										{
											"isHide":false,
											"name":"ClassGroup",
											"value":"CardB"
										},
										{
											"isHide":false,
											"name":"JavaScript",
											"value":"var registerJavaScript = function () {

 

this.OnSelect = function () {
    var me = this;
    console.log('33333333');
    var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;
    var prjAtt = this.DownForCode("prjAttachments");
    if(Framework.IsNullOrEmpty(prjAtt)) return;
    prjAtt.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var paramsprjAtt = {};
    paramsprjAtt.PrjId = id.GetValue();
    paramsprjAtt.flag = 20;
    paramsprjAtt.formId = prjAtt.formid;
    paramsprjAtt.engagId = null;


    var params = [];
    params.push({param: 'ProjectId', value: id.GetValue()});
    params.push({param: 'Flag', value: 20});



    prjAtt.params = JSON.stringify(params);
    prjAtt.Load();




    // Framework.AjaxRequest(me, "PrjAttachment-getPrjAttachment-Query.do", 'get', paramsprjAtt, true, function (result) {
    //     prjAtt.SetValue(result);
    // });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};


 

};"
										}
									],
									"sort":23
								},
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										{
											"action":[
												
											],
											"authority":[
												
											],
											"children":[
												
											],
											"dataPermission":[
												
											],
											"isReference":false,
											"otherChildren":[
												
											],
											"property":[
												{
													"isHide":true,
													"name":"referenceFormId",
													"value":27147
												}
											],
											"sort":0
										}
									],
									"code":"financeSurveyTab",
									"control":"Tab",
									"dataPermission":[
										
									],
									"isReference":false,
									"javaScript":"this.OnSelect = function () {
    var me = this;
    var tabs = this.Up("[controltype='Tabs']");
    tabs.openTabCode = this.displayname;
    //财务尽职调查报告
    var prjAtt = this.DownForCode("prjAttachments");
    if (prjAtt && prjAtt.SetBusinessTitle) prjAtt.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var paramsprjAtt2 = {};
    paramsprjAtt2.PrjId = id.GetValue();
    paramsprjAtt2.flag = 30;
    paramsprjAtt2.formId = prjAtt.formid;
    paramsprjAtt2.engagId = null;


    var params = [];
    params.push({param: 'ProjectId', value: id.GetValue()});
    params.push({param: 'Flag', value: 30});
    prjAtt.params = JSON.stringify(params);
    prjAtt.Load();


    //
    // Framework.AjaxRequest(me, "PrjAttachment-getPrjAttachment-Query.do", 'get', paramsprjAtt2, true, function (result) {
    //     prjAtt.SetValue(result);
    // });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};",
									"name":"财务尽职调查报告",
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":false,
											"name":"IsLazy",
											"value":"false"
										},
										{
											"isHide":false,
											"name":"ClassGroup",
											"value":"CardB"
										},
										{
											"isHide":false,
											"name":"JavaScript",
											"value":"var registerJavaScript = function () {

 

this.OnSelect = function () {
    var me = this;
    var tabs = this.Up("[controltype='Tabs']");
    tabs.openTabCode = this.displayname;
    //财务尽职调查报告
    var prjAtt = this.DownForCode("prjAttachments");
    if (prjAtt && prjAtt.SetBusinessTitle) prjAtt.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var paramsprjAtt2 = {};
    paramsprjAtt2.PrjId = id.GetValue();
    paramsprjAtt2.flag = 30;
    paramsprjAtt2.formId = prjAtt.formid;
    paramsprjAtt2.engagId = null;


    var params = [];
    params.push({param: 'ProjectId', value: id.GetValue()});
    params.push({param: 'Flag', value: 30});
    prjAtt.params = JSON.stringify(params);
    prjAtt.Load();


    //
    // Framework.AjaxRequest(me, "PrjAttachment-getPrjAttachment-Query.do", 'get', paramsprjAtt2, true, function (result) {
    //     prjAtt.SetValue(result);
    // });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};

 

};"
										}
									],
									"sort":24
								},
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										{
											"action":[
												
											],
											"authority":[
												
											],
											"children":[
												
											],
											"dataPermission":[
												
											],
											"isReference":false,
											"otherChildren":[
												
											],
											"property":[
												{
													"isHide":true,
													"name":"referenceFormId",
													"value":24702
												}
											],
											"sort":0
										}
									],
									"code":"memberProfessionTab",
									"control":"Tab",
									"dataPermission":[
										
									],
									"isReference":false,
									"javaScript":"this.OnSelect = function () {
    var me = this;
    var tabs = this.Up("[controltype='Tabs']");
    tabs.openTabCode = this.displayname;
    var ompetencyExcel = this.DownForCode("project");
    if (ompetencyExcel && ompetencyExcel.SetBusinessTitle) ompetencyExcel.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var params8 = {}
    params8.projectId = id.GetValue();
    params8.formId = ompetencyExcel.formid;

    Framework.AjaxRequest(me, "Project-getProject-Query.do", 'get', params8, true, function (result) {
        ompetencyExcel.SetValue(result);
    });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};",
									"name":"项目组资源和专业胜任能力的调查记录",
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":false,
											"name":"IsLazy",
											"value":"false"
										},
										{
											"isHide":false,
											"name":"JavaScript",
											"value":"var registerJavaScript = function () {

 

this.OnSelect = function () {
    var me = this;
    var tabs = this.Up("[controltype='Tabs']");
    tabs.openTabCode = this.displayname;
    var ompetencyExcel = this.DownForCode("project");
    if (ompetencyExcel && ompetencyExcel.SetBusinessTitle) ompetencyExcel.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var params8 = {}
    params8.projectId = id.GetValue();
    params8.formId = ompetencyExcel.formid;

    Framework.AjaxRequest(me, "Project-getProject-Query.do", 'get', params8, true, function (result) {
        ompetencyExcel.SetValue(result);
    });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};

 

};"
										}
									],
									"sort":25
								},
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										{
											"action":[
												
											],
											"authority":[
												
											],
											"children":[
												
											],
											"dataPermission":[
												
											],
											"isReference":false,
											"otherChildren":[
												
											],
											"property":[
												{
													"isHide":true,
													"name":"referenceFormId",
													"value":20237
												}
											],
											"sort":0
										}
									],
									"code":"memberStatusTab",
									"control":"Tab",
									"dataPermission":[
										
									],
									"isReference":false,
									"javaScript":"this.OnSelect = function () {
    var memberTab = this.Down("[controltype='GridPanel']").First;
    if (memberTab && memberTab.Load)
    {
        memberTab.Load();
    }
var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;
    memberTab.SetBusinessTitle(this.displayname);
    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};",
									"name":"项目组构成人员情况表",
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":false,
											"name":"IsLazy",
											"value":"false"
										},
										{
											"isHide":false,
											"name":"ClassGroup",
											"value":"CardB"
										},
										{
											"isHide":false,
											"name":"JavaScript",
											"value":"var registerJavaScript = function () {

 

this.OnSelect = function () {
    var memberTab = this.Down("[controltype='GridPanel']").First;
    if (memberTab && memberTab.Load)
    {
        memberTab.Load();
    }
var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;
    memberTab.SetBusinessTitle(this.displayname);
    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};

 

};"
										}
									],
									"sort":26
								},
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										{
											"action":[
												
											],
											"authority":[
												
											],
											"children":[
												
											],
											"dataPermission":[
												
											],
											"isReference":false,
											"otherChildren":[
												
											],
											"property":[
												{
													"isHide":true,
													"name":"referenceFormId",
													"value":342919
												}
											],
											"sort":0
										}
									],
									"code":"programSheetTab",
									"control":"Tab",
									"dataPermission":[
										
									],
									"isReference":false,
									"javaScript":"this.OnSelect = function () {
    console.log("OnSelect初步业务活动");
    var me = this;
    var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;

    var businessHappenItem = this.DownForCode("project");
    businessHappenItem.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var params = {};
    params.projectId = id.GetValue();
    params.formId = businessHappenItem.formid;

    Framework.AjaxRequest(me, "Project-getProject-Query.do", 'get', params, true, function (result) {
        businessHappenItem.SetValue(result);
    });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};",
									"name":"初步业务活动程序表",
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":false,
											"name":"JavaScript",
											"value":"var registerJavaScript = function () {

 

this.OnSelect = function () {
    console.log("OnSelect初步业务活动");
    var me = this;
    var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;

    var businessHappenItem = this.DownForCode("project");
    businessHappenItem.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var params = {};
    params.projectId = id.GetValue();
    params.formId = businessHappenItem.formid;

    Framework.AjaxRequest(me, "Project-getProject-Query.do", 'get', params, true, function (result) {
        businessHappenItem.SetValue(result);
    });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};

 

};"
										}
									],
									"sort":5
								},
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										{
											"action":[
												
											],
											"authority":[
												
											],
											"children":[
												
											],
											"dataPermission":[
												
											],
											"isReference":false,
											"otherChildren":[
												
											],
											"property":[
												{
													"isHide":true,
													"name":"referenceFormId",
													"value":342920
												}
											],
											"sort":0
										}
									],
									"code":"minutesMeetingTab",
									"control":"Tab",
									"dataPermission":[
										
									],
									"isReference":false,
									"javaScript":"
this.OnSelect = function () {
    var me = this;
  console.log('55555555');
    var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;
    var prjAtt = this.DownForCode("prjAttachments");
    prjAtt.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var paramsprjAtt = {};
    paramsprjAtt.PrjId = id.GetValue();
    paramsprjAtt.flag = 40;
    paramsprjAtt.formId = prjAtt.formid;
    paramsprjAtt.engagId = null;


    var params = [];
    params.push({param: 'ProjectId', value: id.GetValue()});
    params.push({param: 'Flag', value: 40});
    prjAtt.params = JSON.stringify(params);
    prjAtt.Load();

    // Framework.AjaxRequest(me, "PrjAttachment-getPrjAttachment-Query.do", 'get', paramsprjAtt, true, function (result) {
    //     prjAtt.SetValue(result);
    // });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};
",
									"name":"项目进点前的技术准备会议记录",
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":false,
											"name":"ClassGroup",
											"value":"CardB"
										},
										{
											"isHide":false,
											"name":"JavaScript",
											"value":"var registerJavaScript = function () {

 


this.OnSelect = function () {
    var me = this;
  console.log('55555555');
    var tabs=this.Up("[controltype='Tabs']");
    tabs.openTabCode=this.displayname;
    var prjAtt = this.DownForCode("prjAttachments");
    prjAtt.SetBusinessTitle(this.displayname);
    var form = this.Top().DownForCode('projectTab').Down("[controltype='FormPanel']").First;
    var id = form.DownForCode("id");
    var paramsprjAtt = {};
    paramsprjAtt.PrjId = id.GetValue();
    paramsprjAtt.flag = 40;
    paramsprjAtt.formId = prjAtt.formid;
    paramsprjAtt.engagId = null;


    var params = [];
    params.push({param: 'ProjectId', value: id.GetValue()});
    params.push({param: 'Flag', value: 40});
    prjAtt.params = JSON.stringify(params);
    prjAtt.Load();

    // Framework.AjaxRequest(me, "PrjAttachment-getPrjAttachment-Query.do", 'get', paramsprjAtt, true, function (result) {
    //     prjAtt.SetValue(result);
    // });

    var businessActivity = me.UpForCode("BusinessActivity");
    if (Framework.IsNotNullOrEmpty(businessActivity) && businessActivity.ShowLinkButton)
        businessActivity.ShowLinkButton();
};


 

};"
										}
									],
									"sort":27
								}
							],
							"code":"businessActivityTabs",
							"control":"Tabs",
							"dataPermission":[
								
							],
							"isReference":false,
							"javaScript":"",
							"name":"初步业务活动主卡",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"TabPosition",
									"value":"left"
								},
								{
									"isHide":false,
									"name":"EnableValid",
									"value":"true"
								},
								{
									"isHide":false,
									"name":"ClassGroup",
									"value":"statisticalStyle"
								}
							],
							"sort":28
						}
					],
					"code":"businessActivity",
					"control":"Tab",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"this.OnSelect = function () {
    console.log("BeforeLoad初步业务活动");
    var me = this;
    var tabs = this.DownForCode("BusinessActivityTabs");
    var tabList = []
    if (tabs) {//选中加载前的时候不进行子的tabs离开校验
        tabList = tabs.Down("[controlType='Tab']");
        Framework.ForEach(tabList, function (item) {
            item.OldEnablevalid = item.enablevalid
            item.enablevalid = false;
        })
    }
    var tabCode = "";
    if (tabs.openTabCode) {
        tabCode = tabs.openTabCode;
    }

    var model = me.Top();
    if (!model) return;
    var projectForm = model.Down("[basecode='projectPage']").First;
    if (!projectForm) return;

    var projectId = projectForm.DownForCode("id").GetValue();
    if (Framework.IsNullOrEmpty(projectId)) return;

    var firstOrContinuous = projectForm.DownForCode("FirstOrContinuous").GetSubmitValue();

    var isUndertake = firstOrContinuous == 10;
    //业务承接评价表或者保持评价表
    var formBaseCode = isUndertake ? "[basecode='maintain']" : "[basecode='maintain12']";

    //是否首次承接，显示不同的表单
    me.DownForCode("BusinessUndertakeTab").SetVisible(!isUndertake);
    me.DownForCode("BusinessKeepTab").SetVisible(isUndertake);

    var projectFrame = me.Down(formBaseCode).First;

    var params = {};
    params.projectId = projectId;
    params.formId = projectFrame.formid;

    Framework.AjaxRequest(me, "BusinessEvaluation-getIdByProjectId-Query.do", 'get', params, true, function (result) {
        projectFrame.SetValue(result);
    });

    // 初步业务活动底稿程序
    var programSheet = me.Down("[basecode='programSheetExcel']").First;
    programSheet.SetBusinessTitle("初步业务活动程序表");
    var programSheetPath = projectForm.DownForCode("ProgramSheetPath").GetValue();
    if (programSheetPath && programSheet && programSheet.SetValue) {
        programSheet.SetValue({programSheetPath: programSheetPath, id: projectId});

    }

    me.mainProjectForm = projectForm;
    me.ShowLinkButton();


    if (tabs && tabs.SetTabSelect && tabCode) {
        tabs.SetTabSelect(tabCode);
    }

    if (tabList.length > 0) {
        //选中加载后开启子中tabs离开校验
        Framework.ForEach(tabList, function (item) {
            item.enablevalid = item.OldEnablevalid;
        })
    }

    var projectManagerId = model.DownForCode("projectManagerId");
    if (projectManagerId) {//小项目经理进来没有操作权限
        var managerValue = projectManagerId.GetSubmitValue();
        if (managerValue && managerValue != AppContext.Profile.id) {
            LinkButton(me, true);
        }
    }

};


this.ShowLinkButton = function () {
    var me = this;
    var model = me.Top();
    var form = me.mainProjectForm;
    var docState = form.DownForCode("docState").GetSubmitValue();
    var apply = model.DownForCode("apply").GetValue();
    if (!(docState > 11)) return;
    var isVisible = (apply == 1 && ((docState >= 30 && docState < 70) || docState == 11)) || docState == 100;
    LinkButton(me, !isVisible);
};

function LinkButton(me, visible) {
    var controls = ["LinkButton", "JExcel", "Text", "TextArea", "Money", "Combobox", "Date", "GridExcelPanel", "CheckBoxItem", "CheckRadio"];
    Framework.ForEach(controls, function (item) {
        var list = me.Down("[controltype='" + item + "']");
        Framework.ForEach(list, function (cont) {
            if (cont) {
                if (item == "LinkButton") {
                    cont.SetVisible(visible);
                } else {
                    cont.SetReadOnly(visible);
                }
            }
        })
    })
};",
					"name":"初步业务活动底稿",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"IsLazy",
							"value":"true"
						},
						{
							"isHide":false,
							"name":"ClassGroup",
							"value":"CardA"
						},
						{
							"isHide":false,
							"name":"JavaScript",
							"value":"var registerJavaScript = function () {

 

this.OnSelect = function () {
    console.log("BeforeLoad初步业务活动");
    var me = this;
    var tabs = this.DownForCode("BusinessActivityTabs");
    var tabList = []
    if (tabs) {//选中加载前的时候不进行子的tabs离开校验
        tabList = tabs.Down("[controlType='Tab']");
        Framework.ForEach(tabList, function (item) {
            item.OldEnablevalid = item.enablevalid
            item.enablevalid = false;
        })
    }
    var tabCode = "";
    if (tabs.openTabCode) {
        tabCode = tabs.openTabCode;
    }

    var model = me.Top();
    if (!model) return;
    var projectForm = model.Down("[basecode='projectPage']").First;
    if (!projectForm) return;

    var projectId = projectForm.DownForCode("id").GetValue();
    if (Framework.IsNullOrEmpty(projectId)) return;

    var firstOrContinuous = projectForm.DownForCode("FirstOrContinuous").GetSubmitValue();

    var isUndertake = firstOrContinuous == 10;
    //业务承接评价表或者保持评价表
    var formBaseCode = isUndertake ? "[basecode='maintain']" : "[basecode='maintain12']";

    //是否首次承接，显示不同的表单
    me.DownForCode("BusinessUndertakeTab").SetVisible(!isUndertake);
    me.DownForCode("BusinessKeepTab").SetVisible(isUndertake);

    var projectFrame = me.Down(formBaseCode).First;

    var params = {};
    params.projectId = projectId;
    params.formId = projectFrame.formid;

    Framework.AjaxRequest(me, "BusinessEvaluation-getIdByProjectId-Query.do", 'get', params, true, function (result) {
        projectFrame.SetValue(result);
    });

    // 初步业务活动底稿程序
    var programSheet = me.Down("[basecode='programSheetExcel']").First;
    programSheet.SetBusinessTitle("初步业务活动程序表");
    var programSheetPath = projectForm.DownForCode("ProgramSheetPath").GetValue();
    if (programSheetPath && programSheet && programSheet.SetValue) {
        programSheet.SetValue({programSheetPath: programSheetPath, id: projectId});

    }

    me.mainProjectForm = projectForm;
    me.ShowLinkButton();


    if (tabs && tabs.SetTabSelect && tabCode) {
        tabs.SetTabSelect(tabCode);
    }

    if (tabList.length > 0) {
        //选中加载后开启子中tabs离开校验
        Framework.ForEach(tabList, function (item) {
            item.enablevalid = item.OldEnablevalid;
        })
    }

    var projectManagerId = model.DownForCode("projectManagerId");
    if (projectManagerId) {//小项目经理进来没有操作权限
        var managerValue = projectManagerId.GetSubmitValue();
        if (managerValue && managerValue != AppContext.Profile.id) {
            LinkButton(me, true);
        }
    }

};


this.ShowLinkButton = function () {
    var me = this;
    var model = me.Top();
    var form = me.mainProjectForm;
    var docState = form.DownForCode("docState").GetSubmitValue();
    var apply = model.DownForCode("apply").GetValue();
    if (!(docState > 11)) return;
    var isVisible = (apply == 1 && ((docState >= 30 && docState < 70) || docState == 11)) || docState == 100;
    LinkButton(me, !isVisible);
};

function LinkButton(me, visible) {
    var controls = ["LinkButton", "JExcel", "Text", "TextArea", "Money", "Combobox", "Date", "GridExcelPanel", "CheckBoxItem", "CheckRadio"];
    Framework.ForEach(controls, function (item) {
        var list = me.Down("[controltype='" + item + "']");
        Framework.ForEach(list, function (cont) {
            if (cont) {
                if (item == "LinkButton") {
                    cont.SetVisible(visible);
                } else {
                    cont.SetReadOnly(visible);
                }
            }
        })
    })
};

 

};"
						}
					],
					"sort":34
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								{
									"action":[
										
									],
									"authority":[
										
									],
									"children":[
										
									],
									"dataPermission":[
										
									],
									"isReference":false,
									"otherChildren":[
										
									],
									"property":[
										{
											"isHide":true,
											"name":"referenceFormId",
											"value":18344
										}
									],
									"sort":0
								}
							],
							"code":"engagementPanel",
							"control":"Panel",
							"dataPermission":[
								
							],
							"isReference":false,
							"name":"业务约定书",
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":false,
									"name":"Height",
									"value":"96%"
								},
								{
									"isHide":false,
									"name":"style:padding",
									"value":"0"
								}
							],
							"sort":1
						}
					],
					"code":"businessAgreement",
					"control":"Tab",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"this.BeforeLoad = function () {
    var me = this;
    var model = me.Top();
    if (!model) return;
    var projectForm = model.Down("[basecode='projectPage']").First;
    if (!projectForm) return;

    var projectId = projectForm.DownForCode("id").GetValue();
    if (Framework.IsNullOrEmpty(projectId)) return;

    var engagement = me.DownForCode("engagements");

    if (Framework.IsNullOrEmpty(engagement)) return;

    engagement.projectId = projectId;
    engagement.Load();
};",
					"name":"业务约定书",
					"otherChildren":[
						
					],
					"property":[
						{
							"isHide":false,
							"name":"IsLazy",
							"value":"true"
						},
						{
							"isHide":false,
							"name":"style:text-align",
							"value":"left!important"
						},
						{
							"isHide":false,
							"name":"ClassGroup",
							"value":"CardB"
						},
						{
							"isHide":false,
							"name":"style:padding",
							"value":"0"
						},
						{
							"isHide":false,
							"name":"JavaScript",
							"value":"var registerJavaScript = function () {

 

this.BeforeLoad = function () {
    var me = this;
    var model = me.Top();
    if (!model) return;
    var projectForm = model.Down("[basecode='projectPage']").First;
    if (!projectForm) return;

    var projectId = projectForm.DownForCode("id").GetValue();
    if (Framework.IsNullOrEmpty(projectId)) return;

    var engagement = me.DownForCode("engagements");

    if (Framework.IsNullOrEmpty(engagement)) return;

    engagement.projectId = projectId;
    engagement.Load();
};

 

};"
						}
					],
					"sort":35
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"apply",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"name":"申请修改标记",
					"otherChildren":[
						
					],
					"property":[
						
					],
					"sort":8
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"riskMessage",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"风险等级变化记录",
					"otherChildren":[
						
					],
					"property":[
						
					],
					"sort":3
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						
					],
					"code":"riskLevelSpare",
					"control":"Hidden",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"风险备用",
					"otherChildren":[
						
					],
					"property":[
						
					],
					"sort":2
				}
			],
			"code":"formMainTabs",
			"control":"Tabs",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"主选项卡",
			"otherChildren":[
				
			],
			"property":[
				{
					"isHide":false,
					"name":"EnableValid",
					"value":"true"
				},
				{
					"isHide":false,
					"name":"ClassGroup",
					"value":"bRadiusA"
				},
				{
					"isHide":false,
					"name":"IsShowBackButton",
					"value":"true"
				}
			],
			"sort":0
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"uuid",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"uuid",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":1000
		}
	],
	"code":"cc",
	"control":"Panel",
	"dataPermission":[
		
	],
	"isReference":false,
	"javaScript":"this.BeforeLoad = function () {
    console.log('项目BeforeLoad ');
    var me = this;
    me.DownForCode('project').IsAdd=me.IsAdd;
    if (me.IsAdd) {
        if (AppContext.Profile.unitAttributes == 10 || AppContext.Profile.orgUnitAttributes == 10) {
            var headquartersReview = me.DownForCode("HeadquartersReview");
            if (headquartersReview) {
                headquartersReview.SetValue(10);
                headquartersReview.SetReadOnly(true);
                if (AppContext.Profile.orgUnitAttributes == 10) headquartersReview.SetVisible(true, false);
            }
        }
        me.DownForCode('projectManagerId').SetValue(AppContext.Profile);
        return;
    }


    var params = {id: me.projectId};//me.projectId通过打开是传项目Id
    if (Framework.IsNotNullOrEmpty(me.select)) {
        params = me.select;
    }

    var projectForm = me.Down("form[basecode='projectPage']").First;

    if (Framework.IsNullOrEmpty(projectForm)) return;
    if (Framework.IsNullOrEmpty(params.id)) return;
    projectForm.Data = params;
};

this.AfterLoad = function () {
    console.log('项目AfterLoad ');
    var me = this;
    var riskLevel = me.DownForCode("RiskLevel");
    if (!riskLevel) return;
    var riskMessage = me.DownForCode("riskMessage");
    if (riskMessage && riskMessage.SetValue) {
        riskMessage.SetValue(riskLevel.GetSubmitValue())
    }
    if (!me.IsAdd) {
        console.log('总所复核 ');
        var headquartersReview = me.DownForCode("HeadquartersReview");
        if (headquartersReview) {
            var orgUnitAttributes = me.DownForCode("DeptId_OrgId_UnitAttributes");
            if (orgUnitAttributes && orgUnitAttributes.GetValue() == 10) headquartersReview.SetVisible(true, false);
        }
    }

}",
	"name":"项目立项-财报项目",
	"otherChildren":[
		
	],
	"property":[
		{
			"isHide":false,
			"name":"BaseCode",
			"value":"projectManage"
		},
		{
			"isHide":false,
			"name":"Name",
			"value":"项目审批页面"
		},
		{
			"isHide":false,
			"name":"IsReadOnly",
			"value":true
		},
		{
			"isHide":false,
			"name":"Description"
		},
		{
			"isHide":false,
			"name":"FormId",
			"value":342892
		},
		{
			"isHide":false,
			"name":"OrderBy"
		},
		{
			"isHide":false,
			"name":"IsSqlForm",
			"value":false
		},
		{
			"isHide":false,
			"name":"JavaScript",
			"value":"var registerJavaScript = function () {

 

this.BeforeLoad = function () {
    console.log('项目BeforeLoad ');
    var me = this;
    me.DownForCode('project').IsAdd=me.IsAdd;
    if (me.IsAdd) {
        if (AppContext.Profile.unitAttributes == 10 || AppContext.Profile.orgUnitAttributes == 10) {
            var headquartersReview = me.DownForCode("HeadquartersReview");
            if (headquartersReview) {
                headquartersReview.SetValue(10);
                headquartersReview.SetReadOnly(true);
                if (AppContext.Profile.orgUnitAttributes == 10) headquartersReview.SetVisible(true, false);
            }
        }
        me.DownForCode('projectManagerId').SetValue(AppContext.Profile);
        return;
    }


    var params = {id: me.projectId};//me.projectId通过打开是传项目Id
    if (Framework.IsNotNullOrEmpty(me.select)) {
        params = me.select;
    }

    var projectForm = me.Down("form[basecode='projectPage']").First;

    if (Framework.IsNullOrEmpty(projectForm)) return;
    if (Framework.IsNullOrEmpty(params.id)) return;
    projectForm.Data = params;
};

this.AfterLoad = function () {
    console.log('项目AfterLoad ');
    var me = this;
    var riskLevel = me.DownForCode("RiskLevel");
    if (!riskLevel) return;
    var riskMessage = me.DownForCode("riskMessage");
    if (riskMessage && riskMessage.SetValue) {
        riskMessage.SetValue(riskLevel.GetSubmitValue())
    }
    if (!me.IsAdd) {
        console.log('总所复核 ');
        var headquartersReview = me.DownForCode("HeadquartersReview");
        if (headquartersReview) {
            var orgUnitAttributes = me.DownForCode("DeptId_OrgId_UnitAttributes");
            if (orgUnitAttributes && orgUnitAttributes.GetValue() == 10) headquartersReview.SetVisible(true, false);
        }
    }

}

 

};"
		},
		{
			"container":"Window",
			"isHide":false,
			"name":"maximized",
			"value":"true"
		},
		{
			"isHide":false,
			"name":"BackButton",
			"value":"BackButton"
		}
	],
	"sort":0
}
{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":53857}],"sort":0}],"code":"projectTab","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"this.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log('主项目信息');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;me.DownForCode('project');\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(form))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(form.Data))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.Data&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.Data.id&nbsp;=&nbsp;projectId.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;form.Load(form.Data);\n}","name":"主项目信息","otherChildren":[],"property":[{"isHide":false,"name":"ClassGroup","value":"CardA"},{"isHide":false,"name":"TitleLeftLine","value":"true"},{"isHide":false,"name":"style:padding-top","value":"2px"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log('主项目信息');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;me.DownForCode('project');\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(form))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(form.Data))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.Data&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.Data.id&nbsp;=&nbsp;projectId.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;form.Load(form.Data);\n}\r\n \r\n};"}],"sort":29},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":16986}],"sort":0}],"code":"projectFrame","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"this.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;项目架构点击&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;panel&nbsp;=&nbsp;me.TopForCode(&quot;projectManage&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;panel.DownForCode(&quot;projectPage&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectForm))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;project&nbsp;=&nbsp;projectForm.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(project))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;project.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectId))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isApproval&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectDoc&nbsp;=&nbsp;projectForm.DownForCode(&quot;docState&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(projectDoc&nbsp;&&&nbsp;projectDoc.GetSubmitValue()&nbsp;==&nbsp;20)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isApproval&nbsp;=&nbsp;true;//是审批中的，审批人可以点项目架构的任何一个节点\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tree&nbsp;=&nbsp;me.Down(&quot;[basecode='compositionCustomerTree']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(tree))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isAdd&nbsp;=&nbsp;panel.IsAdd&nbsp;?&nbsp;true&nbsp;:&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;tree.ProjectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;tree.params&nbsp;=&nbsp;JSON.stringify([\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{param:&nbsp;'projectId',&nbsp;value:&nbsp;projectId},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{param:&nbsp;'isAdd',&nbsp;value:&nbsp;isAdd},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{param:&nbsp;'isApproval',&nbsp;value:&nbsp;isApproval}]);\n&nbsp;&nbsp;&nbsp;&nbsp;tree.Load();\n}","name":"项目架构","otherChildren":[],"property":[{"isHide":false,"name":"IsLazy","value":"true"},{"isHide":false,"name":"style:padding","value":"0"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;项目架构点击&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;panel&nbsp;=&nbsp;me.TopForCode(&quot;projectManage&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;panel.DownForCode(&quot;projectPage&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectForm))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;project&nbsp;=&nbsp;projectForm.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(project))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;project.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectId))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isApproval&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectDoc&nbsp;=&nbsp;projectForm.DownForCode(&quot;docState&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(projectDoc&nbsp;&&&nbsp;projectDoc.GetSubmitValue()&nbsp;==&nbsp;20)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isApproval&nbsp;=&nbsp;true;//是审批中的，审批人可以点项目架构的任何一个节点\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tree&nbsp;=&nbsp;me.Down(&quot;[basecode='compositionCustomerTree']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(tree))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isAdd&nbsp;=&nbsp;panel.IsAdd&nbsp;?&nbsp;true&nbsp;:&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;tree.ProjectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;tree.params&nbsp;=&nbsp;JSON.stringify([\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{param:&nbsp;'projectId',&nbsp;value:&nbsp;projectId},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{param:&nbsp;'isAdd',&nbsp;value:&nbsp;isAdd},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{param:&nbsp;'isApproval',&nbsp;value:&nbsp;isApproval}]);\n&nbsp;&nbsp;&nbsp;&nbsp;tree.Load();\n}\r\n \r\n};"}],"sort":33},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":20093}],"sort":0}],"code":"memberFieldSet","control":"FieldSet","dataPermission":[],"isReference":false,"name":"项目组成员","otherChildren":[],"property":[{"isHide":false,"name":"style:min-height","value":"55%"},{"isHide":false,"name":"IsNtitle","value":"true"},{"isHide":false,"name":"ClassGroup","value":"CardB"}],"sort":9},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":20142}],"sort":0}],"code":"independenceFieldSet","control":"FieldSet","dataPermission":[],"isReference":false,"name":"可能影响项目组成员独立性的情况","otherChildren":[],"property":[{"isHide":false,"name":"style:min-height","value":"30%"}],"sort":10}],"code":"projectMember","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"this.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;项目成员&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(model))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;docState&nbsp;=&nbsp;model.DownForCode(&quot;docState&quot;).GetSubmitValue();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;apply&nbsp;=&nbsp;model.DownForCode(&quot;apply&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectMembers&nbsp;=&nbsp;me.DownForCode('projectMemberss');\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(docState&nbsp;&gt;&nbsp;11)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isVisible&nbsp;=&nbsp;apply&nbsp;==&nbsp;1&nbsp;||&nbsp;docState&nbsp;==&nbsp;100\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetLinkButtonVisible(me,&nbsp;!isVisible);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectMembers.SetReadOnly(!isVisible);\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectManagerId&nbsp;=&nbsp;model.DownForCode(&quot;projectManagerId&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(projectManagerId)&nbsp;{//小项目经理进来没有操作权限\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;managerValue&nbsp;=&nbsp;projectManagerId.GetSubmitValue();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(managerValue&nbsp;&&&nbsp;managerValue&nbsp;!=&nbsp;AppContext.Profile.id)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetLinkButtonVisible(me,&nbsp;true);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectMembers.SetReadOnly(true);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;projectMembers.Load();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;model.DownForCode(&quot;id&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;param&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;param.projectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;ProjectIndependenceMember-hideProjectIndependenceMember.do&quot;,&nbsp;'get',&nbsp;param,&nbsp;false,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode('independenceFieldSet').SetVisible(result);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//显示的时候才加载\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectIndependenceMembers&nbsp;=&nbsp;me.DownForCode('projectIndependenceMembers');\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectIndependenceMembers.SetBusinessTitle(projectIndependenceMembers.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectIndependenceMembers.Load();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;})\n}\n\nfunction&nbsp;SetLinkButtonVisible(me,&nbsp;isVisible)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;linkButtonArray&nbsp;=&nbsp;me.Down(&quot;[controltype='LinkButton']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(linkButtonArray,&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(item&nbsp;&&&nbsp;item.SetVisible)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.SetVisible(isVisible);\n&nbsp;&nbsp;&nbsp;&nbsp;})\n}","name":"项目组成员","otherChildren":[],"property":[{"isHide":false,"name":"IsLazy","value":"true"},{"isHide":false,"name":"ClassGroup","value":"tableStyleA"},{"isHide":false,"name":"style:background-color","value":"white"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;项目成员&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(model))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;docState&nbsp;=&nbsp;model.DownForCode(&quot;docState&quot;).GetSubmitValue();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;apply&nbsp;=&nbsp;model.DownForCode(&quot;apply&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectMembers&nbsp;=&nbsp;me.DownForCode('projectMemberss');\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(docState&nbsp;&gt;&nbsp;11)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isVisible&nbsp;=&nbsp;apply&nbsp;==&nbsp;1&nbsp;||&nbsp;docState&nbsp;==&nbsp;100\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetLinkButtonVisible(me,&nbsp;!isVisible);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectMembers.SetReadOnly(!isVisible);\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectManagerId&nbsp;=&nbsp;model.DownForCode(&quot;projectManagerId&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(projectManagerId)&nbsp;{//小项目经理进来没有操作权限\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;managerValue&nbsp;=&nbsp;projectManagerId.GetSubmitValue();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(managerValue&nbsp;&&&nbsp;managerValue&nbsp;!=&nbsp;AppContext.Profile.id)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetLinkButtonVisible(me,&nbsp;true);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectMembers.SetReadOnly(true);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;projectMembers.Load();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;model.DownForCode(&quot;id&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;param&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;param.projectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;ProjectIndependenceMember-hideProjectIndependenceMember.do&quot;,&nbsp;'get',&nbsp;param,&nbsp;false,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode('independenceFieldSet').SetVisible(result);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//显示的时候才加载\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectIndependenceMembers&nbsp;=&nbsp;me.DownForCode('projectIndependenceMembers');\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectIndependenceMembers.SetBusinessTitle(projectIndependenceMembers.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectIndependenceMembers.Load();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;})\n}\n\nfunction&nbsp;SetLinkButtonVisible(me,&nbsp;isVisible)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;linkButtonArray&nbsp;=&nbsp;me.Down(&quot;[controltype='LinkButton']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(linkButtonArray,&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(item&nbsp;&&&nbsp;item.SetVisible)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.SetVisible(isVisible);\n&nbsp;&nbsp;&nbsp;&nbsp;})\n}\r\n \r\n};"}],"sort":31},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":16232}],"sort":0}],"code":"businessKeepTab","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;memberTab&nbsp;=&nbsp;this.Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;memberTab.SetBusinessTitle(this.displayname);\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!model)&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;model.Down(&quot;[basecode='projectPage']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!projectForm)&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;projectForm.DownForCode(&quot;id&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectId))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectFrame&nbsp;=&nbsp;me.Down(&quot;[basecode='maintain12']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;params.projectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;params.formId&nbsp;=&nbsp;projectFrame.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;BusinessEvaluation-getIdByProjectId-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectFrame.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n&nbsp;&nbsp;&nbsp;&nbsp;\n};","name":"        业务保持评价表","otherChildren":[],"property":[{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\n\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;memberTab&nbsp;=&nbsp;this.Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;memberTab.SetBusinessTitle(this.displayname);\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!model)&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;model.Down(&quot;[basecode='projectPage']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!projectForm)&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;projectForm.DownForCode(&quot;id&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectId))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectFrame&nbsp;=&nbsp;me.Down(&quot;[basecode='maintain12']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;params.projectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;params.formId&nbsp;=&nbsp;projectFrame.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;BusinessEvaluation-getIdByProjectId-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectFrame.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n&nbsp;&nbsp;&nbsp;&nbsp;\n};\r\n \r\n};"}],"sort":7},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":53}],"sort":0}],"code":"businessUndertakeTab","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;memberTab&nbsp;=&nbsp;this.Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;memberTab&nbsp;.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(memberTab&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memberTab.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!model)&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;model.Down(&quot;[basecode='projectPage']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!projectForm)&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;projectForm.DownForCode(&quot;id&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectId))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectFrame&nbsp;=&nbsp;me.Down(&quot;[basecode='maintain']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;params.projectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;params.formId&nbsp;=&nbsp;projectFrame.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;BusinessEvaluation-getIdByProjectId-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectFrame.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n};","name":"                        业务承接评价表","otherChildren":[],"property":[{"isHide":false,"name":"IsLazy","value":"false"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\n\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;memberTab&nbsp;=&nbsp;this.Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;memberTab&nbsp;.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(memberTab&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memberTab.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!model)&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;model.Down(&quot;[basecode='projectPage']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!projectForm)&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;projectForm.DownForCode(&quot;id&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectId))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectFrame&nbsp;=&nbsp;me.Down(&quot;[basecode='maintain']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;params.projectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;params.formId&nbsp;=&nbsp;projectFrame.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;BusinessEvaluation-getIdByProjectId-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectFrame.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n};\r\n \r\n};"}],"sort":21},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":24667}],"sort":0}],"code":"businessHappenTab","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"this.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;被审计单位业务情况调查记录&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\nvar&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessHappenItem&nbsp;=&nbsp;this.DownForCode(&quot;project&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;businessHappenItem.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;params.projectId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;params.formId&nbsp;=&nbsp;businessHappenItem.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;Project-getProject-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessHappenItem.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};","name":"被审计单位业务情况调查记录","otherChildren":[],"property":[{"isHide":false,"name":"IsLazy","value":"false"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;被审计单位业务情况调查记录&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\nvar&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessHappenItem&nbsp;=&nbsp;this.DownForCode(&quot;project&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;businessHappenItem.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;params.projectId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;params.formId&nbsp;=&nbsp;businessHappenItem.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;Project-getProject-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessHappenItem.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};\r\n \r\n};"}],"sort":22},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":20588}],"sort":0}],"code":"businessFinanceTab","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"this.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;console.log('33333333');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;prjAtt&nbsp;=&nbsp;this.DownForCode(&quot;prjAttachments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNullOrEmpty(prjAtt))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;paramsprjAtt&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.PrjId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.flag&nbsp;=&nbsp;20;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.formId&nbsp;=&nbsp;prjAtt.formid;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.engagId&nbsp;=&nbsp;null;\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'ProjectId',&nbsp;value:&nbsp;id.GetValue()});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'Flag',&nbsp;value:&nbsp;20});\n\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.params&nbsp;=&nbsp;JSON.stringify(params);\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.Load();\n\n\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;PrjAttachment-getPrjAttachment-Query.do&quot;,&nbsp;'get',&nbsp;paramsprjAtt,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};\n","name":"被审计单位财务报表","otherChildren":[],"property":[{"isHide":false,"name":"IsLazy","value":"false"},{"isHide":false,"name":"ClassGroup","value":"CardB"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;console.log('33333333');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;prjAtt&nbsp;=&nbsp;this.DownForCode(&quot;prjAttachments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if(Framework.IsNullOrEmpty(prjAtt))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;paramsprjAtt&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.PrjId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.flag&nbsp;=&nbsp;20;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.formId&nbsp;=&nbsp;prjAtt.formid;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.engagId&nbsp;=&nbsp;null;\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'ProjectId',&nbsp;value:&nbsp;id.GetValue()});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'Flag',&nbsp;value:&nbsp;20});\n\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.params&nbsp;=&nbsp;JSON.stringify(params);\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.Load();\n\n\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;PrjAttachment-getPrjAttachment-Query.do&quot;,&nbsp;'get',&nbsp;paramsprjAtt,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};\n\r\n \r\n};"}],"sort":23},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":27147}],"sort":0}],"code":"financeSurveyTab","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"this.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs&nbsp;=&nbsp;this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode&nbsp;=&nbsp;this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;//财务尽职调查报告\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;prjAtt&nbsp;=&nbsp;this.DownForCode(&quot;prjAttachments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(prjAtt&nbsp;&&&nbsp;prjAtt.SetBusinessTitle)&nbsp;prjAtt.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;paramsprjAtt2&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt2.PrjId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt2.flag&nbsp;=&nbsp;30;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt2.formId&nbsp;=&nbsp;prjAtt.formid;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt2.engagId&nbsp;=&nbsp;null;\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'ProjectId',&nbsp;value:&nbsp;id.GetValue()});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'Flag',&nbsp;value:&nbsp;30});\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.params&nbsp;=&nbsp;JSON.stringify(params);\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.Load();\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;//\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;PrjAttachment-getPrjAttachment-Query.do&quot;,&nbsp;'get',&nbsp;paramsprjAtt2,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};","name":"财务尽职调查报告","otherChildren":[],"property":[{"isHide":false,"name":"IsLazy","value":"false"},{"isHide":false,"name":"ClassGroup","value":"CardB"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs&nbsp;=&nbsp;this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode&nbsp;=&nbsp;this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;//财务尽职调查报告\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;prjAtt&nbsp;=&nbsp;this.DownForCode(&quot;prjAttachments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(prjAtt&nbsp;&&&nbsp;prjAtt.SetBusinessTitle)&nbsp;prjAtt.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;paramsprjAtt2&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt2.PrjId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt2.flag&nbsp;=&nbsp;30;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt2.formId&nbsp;=&nbsp;prjAtt.formid;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt2.engagId&nbsp;=&nbsp;null;\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'ProjectId',&nbsp;value:&nbsp;id.GetValue()});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'Flag',&nbsp;value:&nbsp;30});\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.params&nbsp;=&nbsp;JSON.stringify(params);\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.Load();\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;//\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;PrjAttachment-getPrjAttachment-Query.do&quot;,&nbsp;'get',&nbsp;paramsprjAtt2,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};\r\n \r\n};"}],"sort":24},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":24702}],"sort":0}],"code":"memberProfessionTab","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"this.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs&nbsp;=&nbsp;this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode&nbsp;=&nbsp;this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ompetencyExcel&nbsp;=&nbsp;this.DownForCode(&quot;project&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ompetencyExcel&nbsp;&&&nbsp;ompetencyExcel.SetBusinessTitle)&nbsp;ompetencyExcel.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params8&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;params8.projectId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;params8.formId&nbsp;=&nbsp;ompetencyExcel.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;Project-getProject-Query.do&quot;,&nbsp;'get',&nbsp;params8,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ompetencyExcel.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};","name":"项目组资源和专业胜任能力的调查记录","otherChildren":[],"property":[{"isHide":false,"name":"IsLazy","value":"false"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs&nbsp;=&nbsp;this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode&nbsp;=&nbsp;this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ompetencyExcel&nbsp;=&nbsp;this.DownForCode(&quot;project&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ompetencyExcel&nbsp;&&&nbsp;ompetencyExcel.SetBusinessTitle)&nbsp;ompetencyExcel.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params8&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;params8.projectId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;params8.formId&nbsp;=&nbsp;ompetencyExcel.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;Project-getProject-Query.do&quot;,&nbsp;'get',&nbsp;params8,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ompetencyExcel.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};\r\n \r\n};"}],"sort":25},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":20237}],"sort":0}],"code":"memberStatusTab","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"this.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;memberTab&nbsp;=&nbsp;this.Down(&quot;[controltype='GridPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(memberTab&nbsp;&&&nbsp;memberTab.Load)\n&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memberTab.Load();\n&nbsp;&nbsp;&nbsp;&nbsp;}\nvar&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;memberTab.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};","name":"项目组构成人员情况表","otherChildren":[],"property":[{"isHide":false,"name":"IsLazy","value":"false"},{"isHide":false,"name":"ClassGroup","value":"CardB"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;memberTab&nbsp;=&nbsp;this.Down(&quot;[controltype='GridPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(memberTab&nbsp;&&&nbsp;memberTab.Load)\n&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memberTab.Load();\n&nbsp;&nbsp;&nbsp;&nbsp;}\nvar&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;memberTab.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};\r\n \r\n};"}],"sort":26},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":342919}],"sort":0}],"code":"programSheetTab","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"this.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;OnSelect初步业务活动&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessHappenItem&nbsp;=&nbsp;this.DownForCode(&quot;project&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;businessHappenItem.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;params.projectId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;params.formId&nbsp;=&nbsp;businessHappenItem.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;Project-getProject-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessHappenItem.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};","name":"初步业务活动程序表","otherChildren":[],"property":[{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;OnSelect初步业务活动&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessHappenItem&nbsp;=&nbsp;this.DownForCode(&quot;project&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;businessHappenItem.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;params.projectId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;params.formId&nbsp;=&nbsp;businessHappenItem.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;Project-getProject-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessHappenItem.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};\r\n \r\n};"}],"sort":5},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":342920}],"sort":0}],"code":"minutesMeetingTab","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;console.log('55555555');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;prjAtt&nbsp;=&nbsp;this.DownForCode(&quot;prjAttachments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;paramsprjAtt&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.PrjId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.flag&nbsp;=&nbsp;40;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.formId&nbsp;=&nbsp;prjAtt.formid;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.engagId&nbsp;=&nbsp;null;\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'ProjectId',&nbsp;value:&nbsp;id.GetValue()});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'Flag',&nbsp;value:&nbsp;40});\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.params&nbsp;=&nbsp;JSON.stringify(params);\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.Load();\n\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;PrjAttachment-getPrjAttachment-Query.do&quot;,&nbsp;'get',&nbsp;paramsprjAtt,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};\n","name":"项目进点前的技术准备会议记录","otherChildren":[],"property":[{"isHide":false,"name":"ClassGroup","value":"CardB"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\n\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;console.log('55555555');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs=this.Up(&quot;[controltype='Tabs']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;tabs.openTabCode=this.displayname;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;prjAtt&nbsp;=&nbsp;this.DownForCode(&quot;prjAttachments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.SetBusinessTitle(this.displayname);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;this.Top().DownForCode('projectTab').Down(&quot;[controltype='FormPanel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;id&nbsp;=&nbsp;form.DownForCode(&quot;id&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;paramsprjAtt&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.PrjId&nbsp;=&nbsp;id.GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.flag&nbsp;=&nbsp;40;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.formId&nbsp;=&nbsp;prjAtt.formid;\n&nbsp;&nbsp;&nbsp;&nbsp;paramsprjAtt.engagId&nbsp;=&nbsp;null;\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'ProjectId',&nbsp;value:&nbsp;id.GetValue()});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'Flag',&nbsp;value:&nbsp;40});\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.params&nbsp;=&nbsp;JSON.stringify(params);\n&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.Load();\n\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;PrjAttachment-getPrjAttachment-Query.do&quot;,&nbsp;'get',&nbsp;paramsprjAtt,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prjAtt.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;businessActivity&nbsp;=&nbsp;me.UpForCode(&quot;BusinessActivity&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(businessActivity)&nbsp;&&&nbsp;businessActivity.ShowLinkButton)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;businessActivity.ShowLinkButton();\n};\n\r\n \r\n};"}],"sort":27}],"code":"businessActivityTabs","control":"Tabs","dataPermission":[],"isReference":false,"javaScript":"","name":"初步业务活动主卡","otherChildren":[],"property":[{"isHide":false,"name":"TabPosition","value":"left"},{"isHide":false,"name":"EnableValid","value":"true"},{"isHide":false,"name":"ClassGroup","value":"statisticalStyle"}],"sort":28}],"code":"businessActivity","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"this.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;BeforeLoad初步业务活动&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs&nbsp;=&nbsp;this.DownForCode(&quot;BusinessActivityTabs&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabList&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tabs)&nbsp;{//选中加载前的时候不进行子的tabs离开校验\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabList&nbsp;=&nbsp;tabs.Down(&quot;[controlType='Tab']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(tabList,&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.OldEnablevalid&nbsp;=&nbsp;item.enablevalid\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.enablevalid&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabCode&nbsp;=&nbsp;&quot;&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tabs.openTabCode)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabCode&nbsp;=&nbsp;tabs.openTabCode;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!model)&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;model.Down(&quot;[basecode='projectPage']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!projectForm)&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;projectForm.DownForCode(&quot;id&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectId))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;firstOrContinuous&nbsp;=&nbsp;projectForm.DownForCode(&quot;FirstOrContinuous&quot;).GetSubmitValue();\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isUndertake&nbsp;=&nbsp;firstOrContinuous&nbsp;==&nbsp;10;\n&nbsp;&nbsp;&nbsp;&nbsp;//业务承接评价表或者保持评价表\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;formBaseCode&nbsp;=&nbsp;isUndertake&nbsp;?&nbsp;&quot;[basecode='maintain']&quot;&nbsp;:&nbsp;&quot;[basecode='maintain12']&quot;;\n\n&nbsp;&nbsp;&nbsp;&nbsp;//是否首次承接，显示不同的表单\n&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode(&quot;BusinessUndertakeTab&quot;).SetVisible(!isUndertake);\n&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode(&quot;BusinessKeepTab&quot;).SetVisible(isUndertake);\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectFrame&nbsp;=&nbsp;me.Down(formBaseCode).First;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;params.projectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;params.formId&nbsp;=&nbsp;projectFrame.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;BusinessEvaluation-getIdByProjectId-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectFrame.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;初步业务活动底稿程序\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;programSheet&nbsp;=&nbsp;me.Down(&quot;[basecode='programSheetExcel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;programSheet.SetBusinessTitle(&quot;初步业务活动程序表&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;programSheetPath&nbsp;=&nbsp;projectForm.DownForCode(&quot;ProgramSheetPath&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(programSheetPath&nbsp;&&&nbsp;programSheet&nbsp;&&&nbsp;programSheet.SetValue)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;programSheet.SetValue({programSheetPath:&nbsp;programSheetPath,&nbsp;id:&nbsp;projectId});\n\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;me.mainProjectForm&nbsp;=&nbsp;projectForm;\n&nbsp;&nbsp;&nbsp;&nbsp;me.ShowLinkButton();\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tabs&nbsp;&&&nbsp;tabs.SetTabSelect&nbsp;&&&nbsp;tabCode)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabs.SetTabSelect(tabCode);\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tabList.length&nbsp;&gt;&nbsp;0)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//选中加载后开启子中tabs离开校验\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(tabList,&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.enablevalid&nbsp;=&nbsp;item.OldEnablevalid;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectManagerId&nbsp;=&nbsp;model.DownForCode(&quot;projectManagerId&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(projectManagerId)&nbsp;{//小项目经理进来没有操作权限\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;managerValue&nbsp;=&nbsp;projectManagerId.GetSubmitValue();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(managerValue&nbsp;&&&nbsp;managerValue&nbsp;!=&nbsp;AppContext.Profile.id)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LinkButton(me,&nbsp;true);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n};\n\n\nthis.ShowLinkButton&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;me.mainProjectForm;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;docState&nbsp;=&nbsp;form.DownForCode(&quot;docState&quot;).GetSubmitValue();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;apply&nbsp;=&nbsp;model.DownForCode(&quot;apply&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(docState&nbsp;&gt;&nbsp;11))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isVisible&nbsp;=&nbsp;(apply&nbsp;==&nbsp;1&nbsp;&&&nbsp;((docState&nbsp;&gt;=&nbsp;30&nbsp;&&&nbsp;docState&nbsp;&lt;&nbsp;70)&nbsp;||&nbsp;docState&nbsp;==&nbsp;11))&nbsp;||&nbsp;docState&nbsp;==&nbsp;100;\n&nbsp;&nbsp;&nbsp;&nbsp;LinkButton(me,&nbsp;!isVisible);\n};\n\nfunction&nbsp;LinkButton(me,&nbsp;visible)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;controls&nbsp;=&nbsp;[&quot;LinkButton&quot;,&nbsp;&quot;JExcel&quot;,&nbsp;&quot;Text&quot;,&nbsp;&quot;TextArea&quot;,&nbsp;&quot;Money&quot;,&nbsp;&quot;Combobox&quot;,&nbsp;&quot;Date&quot;,&nbsp;&quot;GridExcelPanel&quot;,&nbsp;&quot;CheckBoxItem&quot;,&nbsp;&quot;CheckRadio&quot;];\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(controls,&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;list&nbsp;=&nbsp;me.Down(&quot;[controltype='&quot;&nbsp;+&nbsp;item&nbsp;+&nbsp;&quot;']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(list,&nbsp;function&nbsp;(cont)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(cont)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(item&nbsp;==&nbsp;&quot;LinkButton&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cont.SetVisible(visible);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cont.SetReadOnly(visible);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\n&nbsp;&nbsp;&nbsp;&nbsp;})\n};","name":"初步业务活动底稿","otherChildren":[],"property":[{"isHide":false,"name":"IsLazy","value":"true"},{"isHide":false,"name":"ClassGroup","value":"CardA"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.OnSelect&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;BeforeLoad初步业务活动&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabs&nbsp;=&nbsp;this.DownForCode(&quot;BusinessActivityTabs&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabList&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tabs)&nbsp;{//选中加载前的时候不进行子的tabs离开校验\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabList&nbsp;=&nbsp;tabs.Down(&quot;[controlType='Tab']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(tabList,&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.OldEnablevalid&nbsp;=&nbsp;item.enablevalid\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.enablevalid&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tabCode&nbsp;=&nbsp;&quot;&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tabs.openTabCode)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabCode&nbsp;=&nbsp;tabs.openTabCode;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!model)&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;model.Down(&quot;[basecode='projectPage']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!projectForm)&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;projectForm.DownForCode(&quot;id&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectId))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;firstOrContinuous&nbsp;=&nbsp;projectForm.DownForCode(&quot;FirstOrContinuous&quot;).GetSubmitValue();\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isUndertake&nbsp;=&nbsp;firstOrContinuous&nbsp;==&nbsp;10;\n&nbsp;&nbsp;&nbsp;&nbsp;//业务承接评价表或者保持评价表\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;formBaseCode&nbsp;=&nbsp;isUndertake&nbsp;?&nbsp;&quot;[basecode='maintain']&quot;&nbsp;:&nbsp;&quot;[basecode='maintain12']&quot;;\n\n&nbsp;&nbsp;&nbsp;&nbsp;//是否首次承接，显示不同的表单\n&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode(&quot;BusinessUndertakeTab&quot;).SetVisible(!isUndertake);\n&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode(&quot;BusinessKeepTab&quot;).SetVisible(isUndertake);\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectFrame&nbsp;=&nbsp;me.Down(formBaseCode).First;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;params.projectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;params.formId&nbsp;=&nbsp;projectFrame.formid;\n\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.AjaxRequest(me,&nbsp;&quot;BusinessEvaluation-getIdByProjectId-Query.do&quot;,&nbsp;'get',&nbsp;params,&nbsp;true,&nbsp;function&nbsp;(result)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectFrame.SetValue(result);\n&nbsp;&nbsp;&nbsp;&nbsp;});\n\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;初步业务活动底稿程序\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;programSheet&nbsp;=&nbsp;me.Down(&quot;[basecode='programSheetExcel']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;programSheet.SetBusinessTitle(&quot;初步业务活动程序表&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;programSheetPath&nbsp;=&nbsp;projectForm.DownForCode(&quot;ProgramSheetPath&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(programSheetPath&nbsp;&&&nbsp;programSheet&nbsp;&&&nbsp;programSheet.SetValue)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;programSheet.SetValue({programSheetPath:&nbsp;programSheetPath,&nbsp;id:&nbsp;projectId});\n\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;me.mainProjectForm&nbsp;=&nbsp;projectForm;\n&nbsp;&nbsp;&nbsp;&nbsp;me.ShowLinkButton();\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tabs&nbsp;&&&nbsp;tabs.SetTabSelect&nbsp;&&&nbsp;tabCode)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabs.SetTabSelect(tabCode);\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tabList.length&nbsp;&gt;&nbsp;0)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//选中加载后开启子中tabs离开校验\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(tabList,&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.enablevalid&nbsp;=&nbsp;item.OldEnablevalid;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectManagerId&nbsp;=&nbsp;model.DownForCode(&quot;projectManagerId&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(projectManagerId)&nbsp;{//小项目经理进来没有操作权限\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;managerValue&nbsp;=&nbsp;projectManagerId.GetSubmitValue();\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(managerValue&nbsp;&&&nbsp;managerValue&nbsp;!=&nbsp;AppContext.Profile.id)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LinkButton(me,&nbsp;true);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n};\n\n\nthis.ShowLinkButton&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;me.mainProjectForm;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;docState&nbsp;=&nbsp;form.DownForCode(&quot;docState&quot;).GetSubmitValue();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;apply&nbsp;=&nbsp;model.DownForCode(&quot;apply&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(docState&nbsp;&gt;&nbsp;11))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isVisible&nbsp;=&nbsp;(apply&nbsp;==&nbsp;1&nbsp;&&&nbsp;((docState&nbsp;&gt;=&nbsp;30&nbsp;&&&nbsp;docState&nbsp;&lt;&nbsp;70)&nbsp;||&nbsp;docState&nbsp;==&nbsp;11))&nbsp;||&nbsp;docState&nbsp;==&nbsp;100;\n&nbsp;&nbsp;&nbsp;&nbsp;LinkButton(me,&nbsp;!isVisible);\n};\n\nfunction&nbsp;LinkButton(me,&nbsp;visible)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;controls&nbsp;=&nbsp;[&quot;LinkButton&quot;,&nbsp;&quot;JExcel&quot;,&nbsp;&quot;Text&quot;,&nbsp;&quot;TextArea&quot;,&nbsp;&quot;Money&quot;,&nbsp;&quot;Combobox&quot;,&nbsp;&quot;Date&quot;,&nbsp;&quot;GridExcelPanel&quot;,&nbsp;&quot;CheckBoxItem&quot;,&nbsp;&quot;CheckRadio&quot;];\n&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(controls,&nbsp;function&nbsp;(item)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;list&nbsp;=&nbsp;me.Down(&quot;[controltype='&quot;&nbsp;+&nbsp;item&nbsp;+&nbsp;&quot;']&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.ForEach(list,&nbsp;function&nbsp;(cont)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(cont)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(item&nbsp;==&nbsp;&quot;LinkButton&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cont.SetVisible(visible);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cont.SetReadOnly(visible);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})\n&nbsp;&nbsp;&nbsp;&nbsp;})\n};\r\n \r\n};"}],"sort":34},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":18344}],"sort":0}],"code":"engagementPanel","control":"Panel","dataPermission":[],"isReference":false,"name":"业务约定书","otherChildren":[],"property":[{"isHide":false,"name":"Height","value":"96%"},{"isHide":false,"name":"style:padding","value":"0"}],"sort":1}],"code":"businessAgreement","control":"Tab","dataPermission":[],"isReference":false,"javaScript":"this.BeforeLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!model)&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;model.Down(&quot;[basecode='projectPage']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!projectForm)&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;projectForm.DownForCode(&quot;id&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectId))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;engagement&nbsp;=&nbsp;me.DownForCode(&quot;engagements&quot;);\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(engagement))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;engagement.projectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;engagement.Load();\n};","name":"业务约定书","otherChildren":[],"property":[{"isHide":false,"name":"IsLazy","value":"true"},{"isHide":false,"name":"style:text-align","value":"left!important"},{"isHide":false,"name":"ClassGroup","value":"CardB"},{"isHide":false,"name":"style:padding","value":"0"},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.BeforeLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;model&nbsp;=&nbsp;me.Top();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!model)&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;model.Down(&quot;[basecode='projectPage']&quot;).First;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!projectForm)&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectId&nbsp;=&nbsp;projectForm.DownForCode(&quot;id&quot;).GetValue();\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectId))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;engagement&nbsp;=&nbsp;me.DownForCode(&quot;engagements&quot;);\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(engagement))&nbsp;return;\n\n&nbsp;&nbsp;&nbsp;&nbsp;engagement.projectId&nbsp;=&nbsp;projectId;\n&nbsp;&nbsp;&nbsp;&nbsp;engagement.Load();\n};\r\n \r\n};"}],"sort":35},{"action":[],"authority":[],"children":[],"code":"apply","control":"Hidden","dataPermission":[],"isReference":false,"name":"申请修改标记","otherChildren":[],"property":[],"sort":8},{"action":[],"authority":[],"children":[],"code":"riskMessage","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"风险等级变化记录","otherChildren":[],"property":[],"sort":3},{"action":[],"authority":[],"children":[],"code":"riskLevelSpare","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"风险备用","otherChildren":[],"property":[],"sort":2}],"code":"formMainTabs","control":"Tabs","dataPermission":[],"isReference":false,"name":"主选项卡","otherChildren":[],"property":[{"isHide":false,"name":"EnableValid","value":"true"},{"isHide":false,"name":"ClassGroup","value":"bRadiusA"},{"isHide":false,"name":"IsShowBackButton","value":"true"}],"sort":0},{"action":[],"authority":[],"children":[],"code":"uuid","control":"Hidden","dataPermission":[],"isReference":false,"name":"uuid","otherChildren":[],"property":[],"sort":1000}],"code":"cc","control":"Panel","dataPermission":[],"isReference":false,"javaScript":"this.BeforeLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log('项目BeforeLoad&nbsp;');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode('project').IsAdd=me.IsAdd;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(me.IsAdd)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(AppContext.Profile.unitAttributes&nbsp;==&nbsp;10&nbsp;||&nbsp;AppContext.Profile.orgUnitAttributes&nbsp;==&nbsp;10)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;headquartersReview&nbsp;=&nbsp;me.DownForCode(&quot;HeadquartersReview&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(headquartersReview)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headquartersReview.SetValue(10);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headquartersReview.SetReadOnly(true);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(AppContext.Profile.orgUnitAttributes&nbsp;==&nbsp;10)&nbsp;headquartersReview.SetVisible(true,&nbsp;false);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode('projectManagerId').SetValue(AppContext.Profile);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{id:&nbsp;me.projectId};//me.projectId通过打开是传项目Id\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(me.select))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params&nbsp;=&nbsp;me.select;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;me.Down(&quot;form[basecode='projectPage']&quot;).First;\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectForm))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(params.id))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;projectForm.Data&nbsp;=&nbsp;params;\n};\n\nthis.AfterLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log('项目AfterLoad&nbsp;');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;riskLevel&nbsp;=&nbsp;me.DownForCode(&quot;RiskLevel&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!riskLevel)&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;riskMessage&nbsp;=&nbsp;me.DownForCode(&quot;riskMessage&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(riskMessage&nbsp;&&&nbsp;riskMessage.SetValue)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;riskMessage.SetValue(riskLevel.GetSubmitValue())\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!me.IsAdd)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('总所复核&nbsp;');\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;headquartersReview&nbsp;=&nbsp;me.DownForCode(&quot;HeadquartersReview&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(headquartersReview)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;orgUnitAttributes&nbsp;=&nbsp;me.DownForCode(&quot;DeptId_OrgId_UnitAttributes&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(orgUnitAttributes&nbsp;&&&nbsp;orgUnitAttributes.GetValue()&nbsp;==&nbsp;10)&nbsp;headquartersReview.SetVisible(true,&nbsp;false);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n}","name":"项目立项-财报项目","otherChildren":[],"property":[{"isHide":false,"name":"BaseCode","value":"projectManage"},{"isHide":false,"name":"Name","value":"项目审批页面"},{"isHide":false,"name":"IsReadOnly","value":true},{"isHide":false,"name":"Description"},{"isHide":false,"name":"FormId","value":342892},{"isHide":false,"name":"OrderBy"},{"isHide":false,"name":"IsSqlForm","value":false},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.BeforeLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log('项目BeforeLoad&nbsp;');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode('project').IsAdd=me.IsAdd;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(me.IsAdd)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(AppContext.Profile.unitAttributes&nbsp;==&nbsp;10&nbsp;||&nbsp;AppContext.Profile.orgUnitAttributes&nbsp;==&nbsp;10)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;headquartersReview&nbsp;=&nbsp;me.DownForCode(&quot;HeadquartersReview&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(headquartersReview)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headquartersReview.SetValue(10);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headquartersReview.SetReadOnly(true);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(AppContext.Profile.orgUnitAttributes&nbsp;==&nbsp;10)&nbsp;headquartersReview.SetVisible(true,&nbsp;false);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;me.DownForCode('projectManagerId').SetValue(AppContext.Profile);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;{id:&nbsp;me.projectId};//me.projectId通过打开是传项目Id\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(me.select))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params&nbsp;=&nbsp;me.select;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;projectForm&nbsp;=&nbsp;me.Down(&quot;form[basecode='projectPage']&quot;).First;\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(projectForm))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(params.id))&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;projectForm.Data&nbsp;=&nbsp;params;\n};\n\nthis.AfterLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log('项目AfterLoad&nbsp;');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;riskLevel&nbsp;=&nbsp;me.DownForCode(&quot;RiskLevel&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!riskLevel)&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;riskMessage&nbsp;=&nbsp;me.DownForCode(&quot;riskMessage&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(riskMessage&nbsp;&&&nbsp;riskMessage.SetValue)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;riskMessage.SetValue(riskLevel.GetSubmitValue())\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!me.IsAdd)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('总所复核&nbsp;');\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;headquartersReview&nbsp;=&nbsp;me.DownForCode(&quot;HeadquartersReview&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(headquartersReview)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;orgUnitAttributes&nbsp;=&nbsp;me.DownForCode(&quot;DeptId_OrgId_UnitAttributes&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(orgUnitAttributes&nbsp;&&&nbsp;orgUnitAttributes.GetValue()&nbsp;==&nbsp;10)&nbsp;headquartersReview.SetVisible(true,&nbsp;false);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n}\r\n \r\n};"},{"container":"Window","isHide":false,"name":"maximized","value":"true"},{"isHide":false,"name":"BackButton","value":"BackButton"}],"sort":0}
2020-05-09 17:34:47