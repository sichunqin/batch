{
	"action":[
		{
			"code":"Export",
			"container":"GridPanel",
			"name":"导出",
			"property":[
				
			],
			"sort":0
		}
	],
	"authority":[
		
	],
	"children":[
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"code",
			"control":"Text",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"项目编号",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":0
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"name",
			"control":"Text",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"项目名称",
			"otherChildren":[
				
			],
			"property":[
				{
					"isHide":false,
					"name":"IsRenderLink",
					"value":"true"
				}
			],
			"sort":8
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"customerType",
			"control":"Text",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"客户类型",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":9
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"businessType",
			"control":"Text",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"业务类型",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":10
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"riskLevel",
			"control":"Text",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"风险等级",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":11
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"department",
			"control":"Text",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"部门",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":12
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"projectPartnerId",
			"control":"Text",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"项目合伙人",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":13
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"projectManager",
			"control":"Text",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"项目经理",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":14
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"reviewStatus",
			"control":"Text",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"复核状态",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":16
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"created_Time",
			"control":"Date",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"提交日期",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":15
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"whetherShow",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"是否标记",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":7
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"reviewOpinionState",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"底稿复核意见回复状态",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":6
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"uiFormCode",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"uiFormCode",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":5
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"workitem_Id",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"Workitem_Id",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":4
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"entityId",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"EntityId",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":3
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"actor_id",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"Actor_id",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":2
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"hasComments",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"HasComments",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":1
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"uuid",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"uuid",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":1000
		}
	],
	"code":"manuscriptToReview",
	"control":"GridPanel",
	"dataPermission":[
		
	],
	"isReference":false,
	"javaScript":"this.AfterRender = function () {
    var me = this;
    me.Load();
};

this.OpenLinkForm = function (row) {
    var mainGrid = this;

    var selected = row;
    if (Framework.IsNullOrEmpty(selected.uiFormCode)) Framework.Message("未找到流程表单！");

    var url = "UIForm-Web-Schema.json";
    var parameter = {};
    parameter.schemaCode = selected.uiFormCode;
    parameter.schemaType = "FormPanel";
    parameter.reference = false;
    parameter.workItemId = selected.workitem_Id;

    var data = {};
    data.id = selected.entityId;
    data.workItemId = selected.workitem_Id;

    if (data.id) {
        Framework.OpenForm(mainGrid, url, parameter, function (form) {
            form.OpenSelectRow = row;
            if (form.Load) form.Load(data);
        });
    }
};
this.RenderRowStyler = function (index, row) {
    // if (Framework.IsNullOrEmpty(row.reviewOpinionState)) {
    //     // return 'background-color:#ffffff';
    //     return;
    // }
    if (row.reviewOpinionState == 30 && row.whetherShow) {// 提醒
        return 'background-color:#f2dcac';

    }
};

this.RenderColumnTextStyler = function (row, flied, value) {
    if (flied == "riskLevel") {
        if (value == "A")
            return '#e41303';
    }
    if (flied == "riskLevel") {
        if (value == 'B')
            return '#ffd900';
    }
    if (flied == "riskLevel") {
        if (value == 'C')
            return '#46aaff';
    }
    if (flied == "riskLevel") {
        if (value == 'D')
            return '#5cdfb3';
    }
}",
	"name":"底稿复核之复核中二",
	"otherChildren":[
		
	],
	"property":[
		{
			"isHide":false,
			"name":"BaseCode",
			"value":"manuscriptToReview"
		},
		{
			"isHide":false,
			"name":"Name",
			"value":"底稿复核之复核中二"
		},
		{
			"isHide":false,
			"name":"IsReadOnly",
			"value":false
		},
		{
			"isHide":false,
			"name":"Description"
		},
		{
			"isHide":false,
			"name":"FormId",
			"value":23628
		},
		{
			"isHide":false,
			"name":"OrderBy",
			"value":"Created_Time"
		},
		{
			"isHide":false,
			"name":"IsSqlForm",
			"value":true
		},
		{
			"isHide":false,
			"name":"JavaScript",
			"value":"var registerJavaScript = function () {

 

this.AfterRender = function () {
    var me = this;
    me.Load();
};

this.OpenLinkForm = function (row) {
    var mainGrid = this;

    var selected = row;
    if (Framework.IsNullOrEmpty(selected.uiFormCode)) Framework.Message("未找到流程表单！");

    var url = "UIForm-Web-Schema.json";
    var parameter = {};
    parameter.schemaCode = selected.uiFormCode;
    parameter.schemaType = "FormPanel";
    parameter.reference = false;
    parameter.workItemId = selected.workitem_Id;

    var data = {};
    data.id = selected.entityId;
    data.workItemId = selected.workitem_Id;

    if (data.id) {
        Framework.OpenForm(mainGrid, url, parameter, function (form) {
            form.OpenSelectRow = row;
            if (form.Load) form.Load(data);
        });
    }
};
this.RenderRowStyler = function (index, row) {
    // if (Framework.IsNullOrEmpty(row.reviewOpinionState)) {
    //     // return 'background-color:#ffffff';
    //     return;
    // }
    if (row.reviewOpinionState == 30 && row.whetherShow) {// 提醒
        return 'background-color:#f2dcac';

    }
};

this.RenderColumnTextStyler = function (row, flied, value) {
    if (flied == "riskLevel") {
        if (value == "A")
            return '#e41303';
    }
    if (flied == "riskLevel") {
        if (value == 'B')
            return '#ffd900';
    }
    if (flied == "riskLevel") {
        if (value == 'C')
            return '#46aaff';
    }
    if (flied == "riskLevel") {
        if (value == 'D')
            return '#5cdfb3';
    }
}

 

};"
		}
	],
	"sort":0,
	"sql":"select  'QualityReview' as 'uiFormCode',workitem_Id,processinstance_id,
entityId,entitytype,
process_id,activity_dispalyname,
creator_name,actor_id,
actor_name,post,workitem_state,
created_Time,comments,taskinStance_Name,
step_number,tododescription,formurl,
batchapproval,flowcode   ,
(select u.name from base_user u where u.id = p.projectmanagerid) as 'projectManager',
(select u.name from base_user u where u.id = p.projectpartnerid) as 'projectPartnerId',
(select d.name from Base_Department d where d.id = p.deptid) as 'department',
(select v.name from sys_enumvalue v,sys_enumtype t where v.enumtypeid=t.id and t.code='risklevel' and v.value=p.risklevel)as riskLevel,
p.businesstypevalue as 'businessType'
,p.customertypevalue as 'customerType',
(select v.name from sys_enumvalue v,sys_enumtype et where v.enumtypeid=et.id and et.code='ManuscriptReviewStateType' and v.value=t.entityStatus)as 'reviewStatus' ,
p.code,p.ShowName as 'name',p.id as 'prjId',p.whetherShow,p.reviewOpinionState,b.hasComments

from wf_todo t
inner join  qr_draftreviewbatch b  on t.entityid=b.id
inner join prj_project p on b.projectid=p.id

where t.ACTOR_ID =#AppContext.Profile.Id# and t.workitem_state = 10 and t.flowcode is not  null  
and exists (select code from Base_WorkFlowConfig where workflowtypeid =24615 and flowcode =code) 
and t.entityStatus='30'"
}
{"action":[{"code":"Export","container":"GridPanel","name":"导出","property":[],"sort":0}],"authority":[],"children":[{"action":[],"authority":[],"children":[],"code":"code","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"项目编号","otherChildren":[],"property":[],"sort":0},{"action":[],"authority":[],"children":[],"code":"name","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"项目名称","otherChildren":[],"property":[{"isHide":false,"name":"IsRenderLink","value":"true"}],"sort":8},{"action":[],"authority":[],"children":[],"code":"customerType","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"客户类型","otherChildren":[],"property":[],"sort":9},{"action":[],"authority":[],"children":[],"code":"businessType","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"业务类型","otherChildren":[],"property":[],"sort":10},{"action":[],"authority":[],"children":[],"code":"riskLevel","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"风险等级","otherChildren":[],"property":[],"sort":11},{"action":[],"authority":[],"children":[],"code":"department","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"部门","otherChildren":[],"property":[],"sort":12},{"action":[],"authority":[],"children":[],"code":"projectPartnerId","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"项目合伙人","otherChildren":[],"property":[],"sort":13},{"action":[],"authority":[],"children":[],"code":"projectManager","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"项目经理","otherChildren":[],"property":[],"sort":14},{"action":[],"authority":[],"children":[],"code":"reviewStatus","control":"Text","dataPermission":[],"isReference":false,"javaScript":"","name":"复核状态","otherChildren":[],"property":[],"sort":16},{"action":[],"authority":[],"children":[],"code":"created_Time","control":"Date","dataPermission":[],"isReference":false,"javaScript":"","name":"提交日期","otherChildren":[],"property":[],"sort":15},{"action":[],"authority":[],"children":[],"code":"whetherShow","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"是否标记","otherChildren":[],"property":[],"sort":7},{"action":[],"authority":[],"children":[],"code":"reviewOpinionState","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"底稿复核意见回复状态","otherChildren":[],"property":[],"sort":6},{"action":[],"authority":[],"children":[],"code":"uiFormCode","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"uiFormCode","otherChildren":[],"property":[],"sort":5},{"action":[],"authority":[],"children":[],"code":"workitem_Id","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"Workitem_Id","otherChildren":[],"property":[],"sort":4},{"action":[],"authority":[],"children":[],"code":"entityId","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"EntityId","otherChildren":[],"property":[],"sort":3},{"action":[],"authority":[],"children":[],"code":"actor_id","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"Actor_id","otherChildren":[],"property":[],"sort":2},{"action":[],"authority":[],"children":[],"code":"hasComments","control":"Hidden","dataPermission":[],"isReference":false,"javaScript":"","name":"HasComments","otherChildren":[],"property":[],"sort":1},{"action":[],"authority":[],"children":[],"code":"uuid","control":"Hidden","dataPermission":[],"isReference":false,"name":"uuid","otherChildren":[],"property":[],"sort":1000}],"code":"manuscriptToReview","control":"GridPanel","dataPermission":[],"isReference":false,"javaScript":"this.AfterRender&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;me.Load();\n};\n\nthis.OpenLinkForm&nbsp;=&nbsp;function&nbsp;(row)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;mainGrid&nbsp;=&nbsp;this;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;selected&nbsp;=&nbsp;row;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(selected.uiFormCode))&nbsp;Framework.Message(&quot;未找到流程表单！&quot;);\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;url&nbsp;=&nbsp;&quot;UIForm-Web-Schema.json&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;parameter&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;parameter.schemaCode&nbsp;=&nbsp;selected.uiFormCode;\n&nbsp;&nbsp;&nbsp;&nbsp;parameter.schemaType&nbsp;=&nbsp;&quot;FormPanel&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;parameter.reference&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;parameter.workItemId&nbsp;=&nbsp;selected.workitem_Id;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;data.id&nbsp;=&nbsp;selected.entityId;\n&nbsp;&nbsp;&nbsp;&nbsp;data.workItemId&nbsp;=&nbsp;selected.workitem_Id;\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data.id)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.OpenForm(mainGrid,&nbsp;url,&nbsp;parameter,&nbsp;function&nbsp;(form)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.OpenSelectRow&nbsp;=&nbsp;row;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(form.Load)&nbsp;form.Load(data);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\n&nbsp;&nbsp;&nbsp;&nbsp;}\n};\nthis.RenderRowStyler&nbsp;=&nbsp;function&nbsp;(index,&nbsp;row)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;if&nbsp;(Framework.IsNullOrEmpty(row.reviewOpinionState))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;return&nbsp;'background-color:#ffffff';\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(row.reviewOpinionState&nbsp;==&nbsp;30&nbsp;&&&nbsp;row.whetherShow)&nbsp;{//&nbsp;提醒\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'background-color:#f2dcac';\n\n&nbsp;&nbsp;&nbsp;&nbsp;}\n};\n\nthis.RenderColumnTextStyler&nbsp;=&nbsp;function&nbsp;(row,&nbsp;flied,&nbsp;value)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(flied&nbsp;==&nbsp;&quot;riskLevel&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;==&nbsp;&quot;A&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'#e41303';\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(flied&nbsp;==&nbsp;&quot;riskLevel&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;==&nbsp;'B')\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'#ffd900';\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(flied&nbsp;==&nbsp;&quot;riskLevel&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;==&nbsp;'C')\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'#46aaff';\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(flied&nbsp;==&nbsp;&quot;riskLevel&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;==&nbsp;'D')\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'#5cdfb3';\n&nbsp;&nbsp;&nbsp;&nbsp;}\n}","name":"底稿复核之复核中二","otherChildren":[],"property":[{"isHide":false,"name":"BaseCode","value":"manuscriptToReview"},{"isHide":false,"name":"Name","value":"底稿复核之复核中二"},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"Description"},{"isHide":false,"name":"FormId","value":23628},{"isHide":false,"name":"OrderBy","value":"Created_Time"},{"isHide":false,"name":"IsSqlForm","value":true},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.AfterRender&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;\n&nbsp;&nbsp;&nbsp;&nbsp;me.Load();\n};\n\nthis.OpenLinkForm&nbsp;=&nbsp;function&nbsp;(row)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;mainGrid&nbsp;=&nbsp;this;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;selected&nbsp;=&nbsp;row;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(selected.uiFormCode))&nbsp;Framework.Message(&quot;未找到流程表单！&quot;);\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;url&nbsp;=&nbsp;&quot;UIForm-Web-Schema.json&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;parameter&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;parameter.schemaCode&nbsp;=&nbsp;selected.uiFormCode;\n&nbsp;&nbsp;&nbsp;&nbsp;parameter.schemaType&nbsp;=&nbsp;&quot;FormPanel&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;parameter.reference&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;parameter.workItemId&nbsp;=&nbsp;selected.workitem_Id;\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;{};\n&nbsp;&nbsp;&nbsp;&nbsp;data.id&nbsp;=&nbsp;selected.entityId;\n&nbsp;&nbsp;&nbsp;&nbsp;data.workItemId&nbsp;=&nbsp;selected.workitem_Id;\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(data.id)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Framework.OpenForm(mainGrid,&nbsp;url,&nbsp;parameter,&nbsp;function&nbsp;(form)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.OpenSelectRow&nbsp;=&nbsp;row;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(form.Load)&nbsp;form.Load(data);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\n&nbsp;&nbsp;&nbsp;&nbsp;}\n};\nthis.RenderRowStyler&nbsp;=&nbsp;function&nbsp;(index,&nbsp;row)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;if&nbsp;(Framework.IsNullOrEmpty(row.reviewOpinionState))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;return&nbsp;'background-color:#ffffff';\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(row.reviewOpinionState&nbsp;==&nbsp;30&nbsp;&&&nbsp;row.whetherShow)&nbsp;{//&nbsp;提醒\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'background-color:#f2dcac';\n\n&nbsp;&nbsp;&nbsp;&nbsp;}\n};\n\nthis.RenderColumnTextStyler&nbsp;=&nbsp;function&nbsp;(row,&nbsp;flied,&nbsp;value)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(flied&nbsp;==&nbsp;&quot;riskLevel&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;==&nbsp;&quot;A&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'#e41303';\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(flied&nbsp;==&nbsp;&quot;riskLevel&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;==&nbsp;'B')\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'#ffd900';\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(flied&nbsp;==&nbsp;&quot;riskLevel&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;==&nbsp;'C')\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'#46aaff';\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(flied&nbsp;==&nbsp;&quot;riskLevel&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(value&nbsp;==&nbsp;'D')\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'#5cdfb3';\n&nbsp;&nbsp;&nbsp;&nbsp;}\n}\r\n \r\n};"}],"sort":0,"sql":"select&nbsp;&nbsp;'QualityReview'&nbsp;as&nbsp;'uiFormCode',workitem_Id,processinstance_id,\nentityId,entitytype,\nprocess_id,activity_dispalyname,\ncreator_name,actor_id,\nactor_name,post,workitem_state,\ncreated_Time,comments,taskinStance_Name,\nstep_number,tododescription,formurl,\nbatchapproval,flowcode&nbsp;&nbsp;&nbsp;,\n(select&nbsp;u.name&nbsp;from&nbsp;base_user&nbsp;u&nbsp;where&nbsp;u.id&nbsp;=&nbsp;p.projectmanagerid)&nbsp;as&nbsp;'projectManager',\n(select&nbsp;u.name&nbsp;from&nbsp;base_user&nbsp;u&nbsp;where&nbsp;u.id&nbsp;=&nbsp;p.projectpartnerid)&nbsp;as&nbsp;'projectPartnerId',\n(select&nbsp;d.name&nbsp;from&nbsp;Base_Department&nbsp;d&nbsp;where&nbsp;d.id&nbsp;=&nbsp;p.deptid)&nbsp;as&nbsp;'department',\n(select&nbsp;v.name&nbsp;from&nbsp;sys_enumvalue&nbsp;v,sys_enumtype&nbsp;t&nbsp;where&nbsp;v.enumtypeid=t.id&nbsp;and&nbsp;t.code='risklevel'&nbsp;and&nbsp;v.value=p.risklevel)as&nbsp;riskLevel,\np.businesstypevalue&nbsp;as&nbsp;'businessType'\n,p.customertypevalue&nbsp;as&nbsp;'customerType',\n(select&nbsp;v.name&nbsp;from&nbsp;sys_enumvalue&nbsp;v,sys_enumtype&nbsp;et&nbsp;where&nbsp;v.enumtypeid=et.id&nbsp;and&nbsp;et.code='ManuscriptReviewStateType'&nbsp;and&nbsp;v.value=t.entityStatus)as&nbsp;'reviewStatus'&nbsp;,\np.code,p.ShowName&nbsp;as&nbsp;'name',p.id&nbsp;as&nbsp;'prjId',p.whetherShow,p.reviewOpinionState,b.hasComments\n\nfrom&nbsp;wf_todo&nbsp;t\ninner&nbsp;join&nbsp;&nbsp;qr_draftreviewbatch&nbsp;b&nbsp;&nbsp;on&nbsp;t.entityid=b.id\ninner&nbsp;join&nbsp;prj_project&nbsp;p&nbsp;on&nbsp;b.projectid=p.id\n\nwhere&nbsp;t.ACTOR_ID&nbsp;=#AppContext.Profile.Id#&nbsp;and&nbsp;t.workitem_state&nbsp;=&nbsp;10&nbsp;and&nbsp;t.flowcode&nbsp;is&nbsp;not&nbsp;&nbsp;null&nbsp;&nbsp;\nand&nbsp;exists&nbsp;(select&nbsp;code&nbsp;from&nbsp;Base_WorkFlowConfig&nbsp;where&nbsp;workflowtypeid&nbsp;=24615&nbsp;and&nbsp;flowcode&nbsp;=code)&nbsp;\nand&nbsp;t.entityStatus='30'"}
2020-03-09 16:25:22