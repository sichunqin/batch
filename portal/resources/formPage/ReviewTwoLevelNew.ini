{
	"action":[
		
	],
	"authority":[
		
	],
	"children":[
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"dataPermission":[
								
							],
							"isReference":false,
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":true,
									"name":"referenceFormId",
									"value":342994
								}
							],
							"sort":0
						}
					],
					"code":"keyIssue",
					"control":"AccordionItem",
					"dataPermission":[
						
					],
					"isReference":false,
					"name":"重点问题",
					"otherChildren":[
						
					],
					"property":[
						
					],
					"sort":0
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"dataPermission":[
								
							],
							"isReference":false,
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":true,
									"name":"referenceFormId",
									"value":342994
								}
							],
							"sort":0
						}
					],
					"code":"report",
					"control":"AccordionItem",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"报告问题",
					"otherChildren":[
						
					],
					"property":[
						
					],
					"sort":2
				},
				{
					"action":[
						
					],
					"authority":[
						
					],
					"children":[
						{
							"action":[
								
							],
							"authority":[
								
							],
							"children":[
								
							],
							"dataPermission":[
								
							],
							"isReference":false,
							"otherChildren":[
								
							],
							"property":[
								{
									"isHide":true,
									"name":"referenceFormId",
									"value":342994
								}
							],
							"sort":0
						}
					],
					"code":"draft",
					"control":"AccordionItem",
					"dataPermission":[
						
					],
					"isReference":false,
					"javaScript":"",
					"name":"底稿问题",
					"otherChildren":[
						
					],
					"property":[
						
					],
					"sort":5
				}
			],
			"code":"accordion",
			"control":"Accordion",
			"dataPermission":[
				
			],
			"isReference":false,
			"javaScript":"",
			"name":"复核意见框架",
			"otherChildren":[
				
			],
			"property":[
				{
					"isHide":false,
					"name":"AllExpand",
					"value":"true"
				}
			],
			"sort":3
		},
		{
			"action":[
				
			],
			"authority":[
				
			],
			"children":[
				
			],
			"code":"uuid",
			"control":"Hidden",
			"dataPermission":[
				
			],
			"isReference":false,
			"name":"uuid",
			"otherChildren":[
				
			],
			"property":[
				
			],
			"sort":1000
		}
	],
	"code":"reviewTwoLevelNew",
	"control":"Panel",
	"dataPermission":[
		
	],
	"isReference":false,
	"javaScript":"this.BeforeLoad = function () {
    console.log("ReviewTwoLevel BeforeLoad 测试");
    var mt = this.Up('[controltype="Tab"]');
    var t = this.TopForCode("ReviewCommentsLiNew");
    var mtkey = mt.DownForCode("keyIssue");
    var form = mtkey.DownForCode("reviewComments");
    if (Framework.IsNullOrEmpty(mt.manuscriptReviewState)) {
        return false;
    }
    form.rCType = 10;
    form.manuscriptReviewState = mt.manuscriptReviewState;//
    var tree = this.Top().DownForCode("twoLevelCompositionCustomerTreeQ");
    var select = tree.GetSelected();
    var isHaveOper;
    if (Framework.IsNotNullOrEmpty(t.haveOper)) {
        if (t.haveOper == "F") {
            isHaveOper = false;
        }
    } else {
        if (Framework.IsNullOrEmpty(t.curstate)) {
            isHaveOper = true;
        } else {
            isHaveOper = t.curstate == mt.manuscriptReviewState;
        }
    }

    var params = [];
    if (Framework.IsNullOrEmpty(select.docStateAllE) || select.docStateAllE == "10") {
        params.push({param: 'customerID', value: 0});
        form.isShowAddReview = false;
    } else {
        params.push({param: 'customerID', value: select.id});
        if (select.docStateAllE.indexOf("70") > -1) {
            form.isShowAddReview = false;
        } else {
            form.isShowAddReview = true;
        }

    }

    params.push({param: 'rCType', value: 10});
    params.push({param: 'manuscriptReviewState', value: mt.manuscriptReviewState});
    params.push({param: 'isReview', value: t.isShowAddReview});
    params.push({param: 'isHaveOper', value: isHaveOper});
    form.params = JSON.stringify(params);
    form.customerID = select.id;
    form.Load();

    //加载报告问题
    var mtkey2 = mt.DownForCode("report");
    var form2 = mtkey2.DownForCode("reviewComments");
    form2.rCType = 20;
    form2.manuscriptReviewState = mt.manuscriptReviewState;//总所复核

    var params2 = [];
    if (Framework.IsNullOrEmpty(select.docStateAllE) || select.docStateAllE == "10") {
        params2.push({param: 'customerID', value: 0});
        form2.isShowAddReview = false;
    } else {
        params2.push({param: 'customerID', value: select.id});
        if (select.docStateAllE.indexOf("70") > -1) {
            form2.isShowAddReview = false;
        } else {
            form2.isShowAddReview = true;
        }
    }

    params2.push({param: 'rCType', value: 20});
    params2.push({param: 'manuscriptReviewState', value: mt.manuscriptReviewState});
    params2.push({param: 'isReview', value: t.isShowAddReview});
    params2.push({param: 'isHaveOper', value: isHaveOper});
    form2.params = JSON.stringify(params2);
    form2.customerID = select.id;
    form2.Load();

    //加载底稿问题d
    var mtkey3 = mt.DownForCode("draft");
    var form3 = mtkey3.DownForCode("reviewComments");
    form3.rCType = 30;
    form3.manuscriptReviewState = mt.manuscriptReviewState;//合伙人复核

    var params3 = [];

    if (Framework.IsNullOrEmpty(select.docStateAllE) || select.docStateAllE == "10") {
        params3.push({param: 'customerID', value: 0});
        form3.isShowAddReview = false;
    } else {
        params3.push({param: 'customerID', value: select.id});
        if (select.docStateAllE.indexOf("70") > -1) {
            form3.isShowAddReview = false;
        } else {
            form3.isShowAddReview = true;
        }
    }
    params3.push({param: 'rCType', value: 30});
    params3.push({param: 'manuscriptReviewState', value: mt.manuscriptReviewState});
    params3.push({param: 'isReview', value: t.isShowAddReview});
    params3.push({param: 'isHaveOper', value: isHaveOper});
    form3.params = JSON.stringify(params3);
    form3.customerID = select.id;
    form3.Load();
};",
	"name":"复核意见主（二级）弹出页签",
	"otherChildren":[
		
	],
	"property":[
		{
			"isHide":false,
			"name":"BaseCode",
			"value":"reviewTwoLevelNew"
		},
		{
			"isHide":false,
			"name":"Name",
			"value":"复核意见主"
		},
		{
			"isHide":false,
			"name":"IsReadOnly",
			"value":false
		},
		{
			"isHide":false,
			"name":"Description"
		},
		{
			"isHide":false,
			"name":"FormId",
			"value":20000024
		},
		{
			"isHide":false,
			"name":"OrderBy"
		},
		{
			"isHide":false,
			"name":"IsSqlForm",
			"value":false
		},
		{
			"isHide":false,
			"name":"JavaScript",
			"value":"var registerJavaScript = function () {

 

this.BeforeLoad = function () {
    console.log("ReviewTwoLevel BeforeLoad 测试");
    var mt = this.Up('[controltype="Tab"]');
    var t = this.TopForCode("ReviewCommentsLiNew");
    var mtkey = mt.DownForCode("keyIssue");
    var form = mtkey.DownForCode("reviewComments");
    if (Framework.IsNullOrEmpty(mt.manuscriptReviewState)) {
        return false;
    }
    form.rCType = 10;
    form.manuscriptReviewState = mt.manuscriptReviewState;//
    var tree = this.Top().DownForCode("twoLevelCompositionCustomerTreeQ");
    var select = tree.GetSelected();
    var isHaveOper;
    if (Framework.IsNotNullOrEmpty(t.haveOper)) {
        if (t.haveOper == "F") {
            isHaveOper = false;
        }
    } else {
        if (Framework.IsNullOrEmpty(t.curstate)) {
            isHaveOper = true;
        } else {
            isHaveOper = t.curstate == mt.manuscriptReviewState;
        }
    }

    var params = [];
    if (Framework.IsNullOrEmpty(select.docStateAllE) || select.docStateAllE == "10") {
        params.push({param: 'customerID', value: 0});
        form.isShowAddReview = false;
    } else {
        params.push({param: 'customerID', value: select.id});
        if (select.docStateAllE.indexOf("70") > -1) {
            form.isShowAddReview = false;
        } else {
            form.isShowAddReview = true;
        }

    }

    params.push({param: 'rCType', value: 10});
    params.push({param: 'manuscriptReviewState', value: mt.manuscriptReviewState});
    params.push({param: 'isReview', value: t.isShowAddReview});
    params.push({param: 'isHaveOper', value: isHaveOper});
    form.params = JSON.stringify(params);
    form.customerID = select.id;
    form.Load();

    //加载报告问题
    var mtkey2 = mt.DownForCode("report");
    var form2 = mtkey2.DownForCode("reviewComments");
    form2.rCType = 20;
    form2.manuscriptReviewState = mt.manuscriptReviewState;//总所复核

    var params2 = [];
    if (Framework.IsNullOrEmpty(select.docStateAllE) || select.docStateAllE == "10") {
        params2.push({param: 'customerID', value: 0});
        form2.isShowAddReview = false;
    } else {
        params2.push({param: 'customerID', value: select.id});
        if (select.docStateAllE.indexOf("70") > -1) {
            form2.isShowAddReview = false;
        } else {
            form2.isShowAddReview = true;
        }
    }

    params2.push({param: 'rCType', value: 20});
    params2.push({param: 'manuscriptReviewState', value: mt.manuscriptReviewState});
    params2.push({param: 'isReview', value: t.isShowAddReview});
    params2.push({param: 'isHaveOper', value: isHaveOper});
    form2.params = JSON.stringify(params2);
    form2.customerID = select.id;
    form2.Load();

    //加载底稿问题d
    var mtkey3 = mt.DownForCode("draft");
    var form3 = mtkey3.DownForCode("reviewComments");
    form3.rCType = 30;
    form3.manuscriptReviewState = mt.manuscriptReviewState;//合伙人复核

    var params3 = [];

    if (Framework.IsNullOrEmpty(select.docStateAllE) || select.docStateAllE == "10") {
        params3.push({param: 'customerID', value: 0});
        form3.isShowAddReview = false;
    } else {
        params3.push({param: 'customerID', value: select.id});
        if (select.docStateAllE.indexOf("70") > -1) {
            form3.isShowAddReview = false;
        } else {
            form3.isShowAddReview = true;
        }
    }
    params3.push({param: 'rCType', value: 30});
    params3.push({param: 'manuscriptReviewState', value: mt.manuscriptReviewState});
    params3.push({param: 'isReview', value: t.isShowAddReview});
    params3.push({param: 'isHaveOper', value: isHaveOper});
    form3.params = JSON.stringify(params3);
    form3.customerID = select.id;
    form3.Load();
};

 

};"
		},
		{
			"isHide":false,
			"name":"AllExpand",
			"value":"true"
		},
		{
			"isHide":false,
			"name":"style:background",
			"value":"white"
		}
	],
	"sort":0
}
{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":342994}],"sort":0}],"code":"keyIssue","control":"AccordionItem","dataPermission":[],"isReference":false,"name":"重点问题","otherChildren":[],"property":[],"sort":0},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":342994}],"sort":0}],"code":"report","control":"AccordionItem","dataPermission":[],"isReference":false,"javaScript":"","name":"报告问题","otherChildren":[],"property":[],"sort":2},{"action":[],"authority":[],"children":[{"action":[],"authority":[],"children":[],"dataPermission":[],"isReference":false,"otherChildren":[],"property":[{"isHide":true,"name":"referenceFormId","value":342994}],"sort":0}],"code":"draft","control":"AccordionItem","dataPermission":[],"isReference":false,"javaScript":"","name":"底稿问题","otherChildren":[],"property":[],"sort":5}],"code":"accordion","control":"Accordion","dataPermission":[],"isReference":false,"javaScript":"","name":"复核意见框架","otherChildren":[],"property":[{"isHide":false,"name":"AllExpand","value":"true"}],"sort":3},{"action":[],"authority":[],"children":[],"code":"uuid","control":"Hidden","dataPermission":[],"isReference":false,"name":"uuid","otherChildren":[],"property":[],"sort":1000}],"code":"reviewTwoLevelNew","control":"Panel","dataPermission":[],"isReference":false,"javaScript":"this.BeforeLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;ReviewTwoLevel&nbsp;BeforeLoad 测试&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;mt&nbsp;=&nbsp;this.Up('[controltype=&quot;Tab&quot;]');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;t&nbsp;=&nbsp;this.TopForCode(&quot;ReviewCommentsLiNew&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;mtkey&nbsp;=&nbsp;mt.DownForCode(&quot;keyIssue&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;mtkey.DownForCode(&quot;reviewComments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(mt.manuscriptReviewState))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;form.rCType&nbsp;=&nbsp;10;\n&nbsp;&nbsp;&nbsp;&nbsp;form.manuscriptReviewState&nbsp;=&nbsp;mt.manuscriptReviewState;//\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tree&nbsp;=&nbsp;this.Top().DownForCode(&quot;twoLevelCompositionCustomerTreeQ&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;select&nbsp;=&nbsp;tree.GetSelected();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isHaveOper;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(t.haveOper))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(t.haveOper&nbsp;==&nbsp;&quot;F&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isHaveOper&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(t.curstate))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isHaveOper&nbsp;=&nbsp;true;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isHaveOper&nbsp;=&nbsp;t.curstate&nbsp;==&nbsp;mt.manuscriptReviewState;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(select.docStateAllE)&nbsp;||&nbsp;select.docStateAllE&nbsp;==&nbsp;&quot;10&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;0});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;select.id});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(select.docStateAllE.indexOf(&quot;70&quot;)&nbsp;&gt;&nbsp;-1)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.isShowAddReview&nbsp;=&nbsp;true;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'rCType',&nbsp;value:&nbsp;10});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'manuscriptReviewState',&nbsp;value:&nbsp;mt.manuscriptReviewState});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'isReview',&nbsp;value:&nbsp;t.isShowAddReview});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'isHaveOper',&nbsp;value:&nbsp;isHaveOper});\n&nbsp;&nbsp;&nbsp;&nbsp;form.params&nbsp;=&nbsp;JSON.stringify(params);\n&nbsp;&nbsp;&nbsp;&nbsp;form.customerID&nbsp;=&nbsp;select.id;\n&nbsp;&nbsp;&nbsp;&nbsp;form.Load();\n\n&nbsp;&nbsp;&nbsp;&nbsp;//加载报告问题\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;mtkey2&nbsp;=&nbsp;mt.DownForCode(&quot;report&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form2&nbsp;=&nbsp;mtkey2.DownForCode(&quot;reviewComments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;form2.rCType&nbsp;=&nbsp;20;\n&nbsp;&nbsp;&nbsp;&nbsp;form2.manuscriptReviewState&nbsp;=&nbsp;mt.manuscriptReviewState;//总所复核\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params2&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(select.docStateAllE)&nbsp;||&nbsp;select.docStateAllE&nbsp;==&nbsp;&quot;10&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;0});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form2.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;select.id});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(select.docStateAllE.indexOf(&quot;70&quot;)&nbsp;&gt;&nbsp;-1)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form2.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form2.isShowAddReview&nbsp;=&nbsp;true;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'rCType',&nbsp;value:&nbsp;20});\n&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'manuscriptReviewState',&nbsp;value:&nbsp;mt.manuscriptReviewState});\n&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'isReview',&nbsp;value:&nbsp;t.isShowAddReview});\n&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'isHaveOper',&nbsp;value:&nbsp;isHaveOper});\n&nbsp;&nbsp;&nbsp;&nbsp;form2.params&nbsp;=&nbsp;JSON.stringify(params2);\n&nbsp;&nbsp;&nbsp;&nbsp;form2.customerID&nbsp;=&nbsp;select.id;\n&nbsp;&nbsp;&nbsp;&nbsp;form2.Load();\n\n&nbsp;&nbsp;&nbsp;&nbsp;//加载底稿问题d\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;mtkey3&nbsp;=&nbsp;mt.DownForCode(&quot;draft&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form3&nbsp;=&nbsp;mtkey3.DownForCode(&quot;reviewComments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;form3.rCType&nbsp;=&nbsp;30;\n&nbsp;&nbsp;&nbsp;&nbsp;form3.manuscriptReviewState&nbsp;=&nbsp;mt.manuscriptReviewState;//合伙人复核\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params3&nbsp;=&nbsp;[];\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(select.docStateAllE)&nbsp;||&nbsp;select.docStateAllE&nbsp;==&nbsp;&quot;10&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;0});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form3.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;select.id});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(select.docStateAllE.indexOf(&quot;70&quot;)&nbsp;&gt;&nbsp;-1)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form3.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form3.isShowAddReview&nbsp;=&nbsp;true;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'rCType',&nbsp;value:&nbsp;30});\n&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'manuscriptReviewState',&nbsp;value:&nbsp;mt.manuscriptReviewState});\n&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'isReview',&nbsp;value:&nbsp;t.isShowAddReview});\n&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'isHaveOper',&nbsp;value:&nbsp;isHaveOper});\n&nbsp;&nbsp;&nbsp;&nbsp;form3.params&nbsp;=&nbsp;JSON.stringify(params3);\n&nbsp;&nbsp;&nbsp;&nbsp;form3.customerID&nbsp;=&nbsp;select.id;\n&nbsp;&nbsp;&nbsp;&nbsp;form3.Load();\n};","name":"复核意见主（二级）弹出页签","otherChildren":[],"property":[{"isHide":false,"name":"BaseCode","value":"reviewTwoLevelNew"},{"isHide":false,"name":"Name","value":"复核意见主"},{"isHide":false,"name":"IsReadOnly","value":false},{"isHide":false,"name":"Description"},{"isHide":false,"name":"FormId","value":20000024},{"isHide":false,"name":"OrderBy"},{"isHide":false,"name":"IsSqlForm","value":false},{"isHide":false,"name":"JavaScript","value":"var registerJavaScript = function () {\r\n \r\nthis.BeforeLoad&nbsp;=&nbsp;function&nbsp;()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;ReviewTwoLevel&nbsp;BeforeLoad 测试&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;mt&nbsp;=&nbsp;this.Up('[controltype=&quot;Tab&quot;]');\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;t&nbsp;=&nbsp;this.TopForCode(&quot;ReviewCommentsLiNew&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;mtkey&nbsp;=&nbsp;mt.DownForCode(&quot;keyIssue&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;mtkey.DownForCode(&quot;reviewComments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(mt.manuscriptReviewState))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;form.rCType&nbsp;=&nbsp;10;\n&nbsp;&nbsp;&nbsp;&nbsp;form.manuscriptReviewState&nbsp;=&nbsp;mt.manuscriptReviewState;//\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tree&nbsp;=&nbsp;this.Top().DownForCode(&quot;twoLevelCompositionCustomerTreeQ&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;select&nbsp;=&nbsp;tree.GetSelected();\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;isHaveOper;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNotNullOrEmpty(t.haveOper))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(t.haveOper&nbsp;==&nbsp;&quot;F&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isHaveOper&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(t.curstate))&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isHaveOper&nbsp;=&nbsp;true;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isHaveOper&nbsp;=&nbsp;t.curstate&nbsp;==&nbsp;mt.manuscriptReviewState;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(select.docStateAllE)&nbsp;||&nbsp;select.docStateAllE&nbsp;==&nbsp;&quot;10&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;0});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;select.id});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(select.docStateAllE.indexOf(&quot;70&quot;)&nbsp;&gt;&nbsp;-1)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.isShowAddReview&nbsp;=&nbsp;true;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'rCType',&nbsp;value:&nbsp;10});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'manuscriptReviewState',&nbsp;value:&nbsp;mt.manuscriptReviewState});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'isReview',&nbsp;value:&nbsp;t.isShowAddReview});\n&nbsp;&nbsp;&nbsp;&nbsp;params.push({param:&nbsp;'isHaveOper',&nbsp;value:&nbsp;isHaveOper});\n&nbsp;&nbsp;&nbsp;&nbsp;form.params&nbsp;=&nbsp;JSON.stringify(params);\n&nbsp;&nbsp;&nbsp;&nbsp;form.customerID&nbsp;=&nbsp;select.id;\n&nbsp;&nbsp;&nbsp;&nbsp;form.Load();\n\n&nbsp;&nbsp;&nbsp;&nbsp;//加载报告问题\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;mtkey2&nbsp;=&nbsp;mt.DownForCode(&quot;report&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form2&nbsp;=&nbsp;mtkey2.DownForCode(&quot;reviewComments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;form2.rCType&nbsp;=&nbsp;20;\n&nbsp;&nbsp;&nbsp;&nbsp;form2.manuscriptReviewState&nbsp;=&nbsp;mt.manuscriptReviewState;//总所复核\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params2&nbsp;=&nbsp;[];\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(select.docStateAllE)&nbsp;||&nbsp;select.docStateAllE&nbsp;==&nbsp;&quot;10&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;0});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form2.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;select.id});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(select.docStateAllE.indexOf(&quot;70&quot;)&nbsp;&gt;&nbsp;-1)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form2.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form2.isShowAddReview&nbsp;=&nbsp;true;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'rCType',&nbsp;value:&nbsp;20});\n&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'manuscriptReviewState',&nbsp;value:&nbsp;mt.manuscriptReviewState});\n&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'isReview',&nbsp;value:&nbsp;t.isShowAddReview});\n&nbsp;&nbsp;&nbsp;&nbsp;params2.push({param:&nbsp;'isHaveOper',&nbsp;value:&nbsp;isHaveOper});\n&nbsp;&nbsp;&nbsp;&nbsp;form2.params&nbsp;=&nbsp;JSON.stringify(params2);\n&nbsp;&nbsp;&nbsp;&nbsp;form2.customerID&nbsp;=&nbsp;select.id;\n&nbsp;&nbsp;&nbsp;&nbsp;form2.Load();\n\n&nbsp;&nbsp;&nbsp;&nbsp;//加载底稿问题d\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;mtkey3&nbsp;=&nbsp;mt.DownForCode(&quot;draft&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form3&nbsp;=&nbsp;mtkey3.DownForCode(&quot;reviewComments&quot;);\n&nbsp;&nbsp;&nbsp;&nbsp;form3.rCType&nbsp;=&nbsp;30;\n&nbsp;&nbsp;&nbsp;&nbsp;form3.manuscriptReviewState&nbsp;=&nbsp;mt.manuscriptReviewState;//合伙人复核\n\n&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;params3&nbsp;=&nbsp;[];\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Framework.IsNullOrEmpty(select.docStateAllE)&nbsp;||&nbsp;select.docStateAllE&nbsp;==&nbsp;&quot;10&quot;)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;0});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form3.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'customerID',&nbsp;value:&nbsp;select.id});\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(select.docStateAllE.indexOf(&quot;70&quot;)&nbsp;&gt;&nbsp;-1)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form3.isShowAddReview&nbsp;=&nbsp;false;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form3.isShowAddReview&nbsp;=&nbsp;true;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'rCType',&nbsp;value:&nbsp;30});\n&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'manuscriptReviewState',&nbsp;value:&nbsp;mt.manuscriptReviewState});\n&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'isReview',&nbsp;value:&nbsp;t.isShowAddReview});\n&nbsp;&nbsp;&nbsp;&nbsp;params3.push({param:&nbsp;'isHaveOper',&nbsp;value:&nbsp;isHaveOper});\n&nbsp;&nbsp;&nbsp;&nbsp;form3.params&nbsp;=&nbsp;JSON.stringify(params3);\n&nbsp;&nbsp;&nbsp;&nbsp;form3.customerID&nbsp;=&nbsp;select.id;\n&nbsp;&nbsp;&nbsp;&nbsp;form3.Load();\n};\r\n \r\n};"},{"isHide":false,"name":"AllExpand","value":"true"},{"isHide":false,"name":"style:background","value":"white"}],"sort":0}
2020-03-09 16:26:26